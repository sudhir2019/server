import{j as e,r as u}from"./react-Oa8yNXwS.js";import{c as wn}from"./react-dom-BRLWn-ZH.js";import{u as T,a as D,P as Sn}from"./react-redux-B01RRXBz.js";import{p as An,a as Ln,s as En,P as Dn}from"./redux-persist-DBtw5npe.js";import{c as re,a as q,b as $n}from"./@reduxjs-DlP2RsC8.js";import{a as qn}from"./axios-t--hEgTQ.js";import{c as Mn}from"./redux-BXkGT1VS.js";import{G as Oa,F as In,T as Tn,I as kn,M as Un,P as Pn,L as Rn,a as On,U as ee}from"./lucide-react-DTgmfkZn.js";import{u as ae,O as qe,N as Le,a as X,L as B,b as _a,c as Ze,B as _n,R as Bn,d as Ce}from"./react-router-CBg-ao9u.js";import{T as Ba}from"./bootstrap-HteFnant.js";import{P as Bt}from"./perfect-scrollbar-DLkoU13u.js";import{C as Fa}from"./clipboard-xHUGfOGo.js";import{f as Ga}from"./feather-icons-fcRffF_2.js";import{L as Fn}from"./react-toastify-BrhYJIGB.js";import{u as Z,C as Gn}from"./react-hook-form-BHog4oKg.js";import{C as ne,S as le,a as ie}from"./country-state-city-DaTLf9H0.js";import{S as F}from"./react-spinners-iTZ8X4_X.js";import{X as oe}from"./react-data-table-component-DA87cljH.js";import{E as zn}from"./exceljs-Cb_v_KjI.js";/* empty css                     */import{u as te,w as Me}from"./xlsx-DiVeCTYF.js";import{l as Hn}from"./socket.io-client-COFPOLJh.js";import{h as Yn}from"./moment-C5S46NFB.js";import{M as it}from"./react-modal-Dl5JG54W.js";import"./react-datepicker-gLVB3y3N.js";import{C as Kn}from"./react-csv-BrHS42PW.js";import"./scheduler-C323NY8X.js";import"./use-sync-external-store-CqL86neZ.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./cookie--_YQFYBD.js";import"./@popperjs-BEKk9TLb.js";import"./clsx-B-dksMZM.js";import"./styled-components-CDCIJ_e6.js";import"./@emotion-sScrWPmR.js";import"./stylis-DinRj2j6.js";import"./jquery-CIsksilN.js";import"./engine.io-client-C44f3zIw.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./prop-types-C_2s_Ts6.js";import"./warning-C20GYw-A.js";import"./exenv-BS7ugsZD.js";import"./react-lifecycles-compat-DQCaDEo4.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();const za=re({name:"theme",initialState:{mode:"light"},reducers:{toggleTheme:t=>{t.mode=t.mode==="light"?"dark":"light"},setTheme:(t,s)=>{t.mode=s.payload}}}),{toggleTheme:Fo,setTheme:Go}=za.actions,Xn=za.reducer,Vn={isLoading:!0},Ha=re({name:"app",initialState:Vn,reducers:{setLoading:(t,s)=>{t.isLoading=s.payload}}}),{setLoading:zo}=Ha.actions,Zn=Ha.reducer,Ie=qn.create({baseURL:"https://api.singhjyotiadmin.life/api",withCredentials:!0}),nt="session-token",is=()=>{const t=localStorage.getItem(nt);return t||Jn(nt)},Ft=()=>{localStorage.removeItem(nt),Qn(nt),localStorage.removeItem("persist:auth"),sessionStorage.removeItem("persist:auth")},ke=()=>{Ft()},Jn=t=>{const s=document.cookie.match(new RegExp(`(^| )${t}=([^;]+)`));return s&&s?decodeURIComponent(s[2]):null},Qn=t=>{document.cookie=`${t}=; max-age=0; path=/`};async function Y(t){var s;try{const a={Authorization:`Bearer ${is()}`,Accept:"application/json"},l=await Ie.get(t,{headers:a});return{response:l,json:l.data}}catch(r){return{response:r.response,json:((s=r.response)==null?void 0:s.data)||{}}}}async function J(t,s,r){var a;try{const c={Authorization:`Bearer ${is()}`,Accept:"application/json"};r==="formData"&&(c["Content-Type"]="multipart/form-data");const i=await Ie.post(t,s,{headers:c});return{response:i,json:i.data}}catch(l){return{response:l.response,json:((a=l.response)==null?void 0:a.data)||{}}}}async function me(t,s,r){var a;try{const c={Authorization:`Bearer ${is()}`,Accept:"application/json"},i=await Ie.put(t,s,{headers:c});return{response:i,json:i.data}}catch(l){return{response:l.response,json:((a=l.response)==null?void 0:a.data)||{}}}}async function je(t,s,r){var a;try{const c={Authorization:`Bearer ${is()}`,Accept:"application/json"},i=await Ie.patch(t,s,{headers:c});return{response:i,json:i.data}}catch(l){return{response:l.response,json:((a=l.response)==null?void 0:a.data)||{}}}}async function ce(t){var s;try{const a={Authorization:`Bearer ${is()}`,Accept:"application/json"},l=await Ie.delete(t,{headers:a});return{response:l,json:l.data}}catch(r){return{response:r.response,json:((s=r.response)==null?void 0:s.data)||{}}}}const N=t=>t.response&&t.response.data?t.response.data.message||"Something went wrong":t.message||"An unexpected error occurred";q("auth/signUp",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("auth/signup",t);return r.status===201?a:s(N(a))}catch(r){return s(N(r))}});const ps=q("auth/login",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("auth/login",t);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),xt=q("auth/getSession",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("auth/session",{token:t});return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),fs=q("auth/logout",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("auth/logout");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),ue=q("auth/getUserById",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`auth/userauth/${t}`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),Ca={id:"",isLoading:!1,isLoggedIn:!1,isLoadingSession:!1,authUser:[],token:"",roles:"",serverError:null,redirectUrl:"",isAdmin:!1,isSuperAdmin:!1,isSuperdistributers:!1,isDistributers:!1,isRetailers:!1,isUser:!1,session:null,isVerificationSuccessful:!1,confirmationEmailSent:!1,resetPasswordEmailSent:!1,successMessage:null},Ya=re({name:"auth",initialState:Ca,reducers:{resetAuthState:()=>(ke(),Ca),resetData:()=>({authUser:[]})},extraReducers:t=>{t.addCase(ps.pending,s=>{s.isLoading=!0,s.serverError=null}).addCase(ps.fulfilled,(s,r)=>{const{token:a,user:l,roles:c}=r.payload;s.isLoading=!1,s.isLoggedIn=!0,s.token=a,s.authUser=l,s.roles=c,localStorage.removeItem("persist:auth"),sessionStorage.removeItem("persist:auth");const i=Date.now()+30*60*1e3;sessionStorage.setItem("authToken",a),sessionStorage.setItem("tokenExpiryTime",i),sessionStorage.setItem("role",c)}).addCase(ps.rejected,(s,r)=>{s.isLoading=!1,s.serverError=r.payload||"Login failed."}).addCase(xt.pending,s=>{s.isLoadingSession=!0}).addCase(xt.fulfilled,(s,r)=>{const{token:a,user:l}=r.payload;s.isLoadingSession=!1,s.isLoggedIn=!0,s.token=a,s.authUser=l,s.roles=l.roles}).addCase(xt.rejected,s=>{s.isLoadingSession=!1,ke()}).addCase(fs.pending,s=>{s.isLoading=!0,s.serverError=null,Ft(),ke(),s.serverError=null,s.isLoading=!1,s.isLoggedIn=!1,s.isLoadingSession=!1,s.authUser=[]}).addCase(fs.fulfilled,s=>{s.isLoading=!1,Ft(),ke(),s.serverError=null,s.isLoading=!1,s.isLoggedIn=!1,s.isLoadingSession=!1,s.authUser=[]}).addCase(fs.rejected,(s,r)=>{s.isLoading=!1,s.serverError=r.payload||"Logout failed."}).addCase(ue.fulfilled,(s,r)=>{s.authUser=r.payload.data})}}),{resetAuthState:Ho,resetData:Yo}=Ya.actions,Wn=Ya.reducer,Je=q("games/fetchTimes",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("time/timelist");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),gs=q("games/fetchGames",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("game/");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),js=q("games/createGame",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("game",t,"formData","");return r.status===201?a:s(N(a))}catch(r){return s(N(r))}}),bs=q("games/updateGame",async({gameId:t,gameData:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await me(`game/${t}`,s);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Ns=q("games/deleteGame",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await ce(`game/:${t}`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),ys=q("games/:id/:action",async({gameId:t,action:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await me(`game/:${t}/${s}`);return a.status===200?a.data:r(N(l))}catch(a){return r(N(a))}}),el=q("fetchGamesByUser",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`game/usergames/${t}`);return r.status===200?r.data:s(N(a))}catch(r){return s(N(r))}}),Ka=re({name:"games",initialState:{games:[],currentGame:null,gamesLoading:!1,gamesError:null,gamesMessage:null,lastUpdated:null,gameDeleted:!1,lastFetchAttempt:null,gamesList:[],historyUsers:[],adminGameList:[]},reducers:{clearGamesError:t=>{t.gamesError=null},clearGamesMessage:t=>{t.gamesMessage=null},setCurrentGame:(t,s)=>{t.currentGame=s.payload},setGameDeleted:t=>{t.gameDeleted=!0},resetData:()=>({games:[],gamesList:[],historyUsers:[],adminGameList:[]})},extraReducers:t=>{t.addCase(el.fulfilled,(s,r)=>{s.gamesList=r.payload.games,s.historyUsers=r.payload.users,s.adminGameList=r.payload.adminGameList}),t.addCase(gs.pending,s=>{s.gamesLoading=!0}).addCase(gs.fulfilled,(s,r)=>{s.gamesLoading=!1,s.games=r.payload.data,s.gamesMessage="Games fetched successfully",s.lastUpdated=new Date().toISOString()}).addCase(gs.rejected,(s,r)=>{s.gamesLoading=!1,s.gamesError=r.payload||"Failed to fetch games. Please try again later."}).addCase(js.pending,s=>{s.gamesLoading=!0}).addCase(js.fulfilled,(s,r)=>{s.gamesLoading=!1,s.games=r.payload.data,s.gamesMessage="Game created successfully",s.lastUpdated=new Date().toISOString()}).addCase(js.rejected,(s,r)=>{s.gamesLoading=!1,s.gamesError=r.payload||"Failed to create game"}).addCase(bs.pending,s=>{s.gamesLoading=!0}).addCase(bs.fulfilled,(s,r)=>{s.gamesLoading=!1,s.games=r.payload.game||[],s.currentGame=r.payload,s.gamesMessage=`Game "${r.payload.updatedGame.gameName}" updated successfully`,s.lastUpdated=new Date().toISOString()}).addCase(bs.rejected,(s,r)=>{s.gamesLoading=!1,s.gamesError=r.payload||"Failed to update game"}).addCase(Ns.pending,s=>{s.gamesLoading=!0}).addCase(Ns.fulfilled,(s,r)=>{s.gamesLoading=!1,s.games=s.games.filter(a=>a._id!==r.meta.arg),s.gamesMessage="Game deleted successfully",s.lastUpdated=new Date().toISOString()}).addCase(Ns.rejected,(s,r)=>{s.gamesLoading=!1,s.gamesError=" Failed to Game deletion "}).addCase(ys.pending,s=>{s.gamesLoading=!0}).addCase(ys.fulfilled,(s,r)=>{s.gamesLoading=!1,s.games=r.payload.data,s.gamesMessage=r.payload.message,s.lastUpdated=new Date().toISOString()}).addCase(ys.rejected,(s,r)=>{s.gamesLoading=!1,s.gamesError=r.payload||"Failed to update game status"})}}),{clearGamesError:Qe,clearGamesMessage:lt,setCurrentGame:Ko,setGameDeleted:wa,resetData:Xo}=Ka.actions,sl=Ka.reducer,he="/superadmins",pt=q("superadmin/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${he}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),We=q("superadmin/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${he}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),ft=q("superadmin/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${he}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),gt=q("superadmin/update",async({superadminId:t,updateData:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${he}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),jt=q("superadmin/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role;return(await ce(`${he}/${t}?id=${l}&role=${c}`)).data}catch(a){return s(N(a))}}),bt=q("superadmin/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role;return(await J(`${he}/credit-transfer?id=${l}&role=${c}`,t)).data}catch(a){return s(N(a))}}),Nt=q("superadmin/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role;return(await J(`${he}/credit-adjust?id=${l}&role=${c}`,t)).data}catch(a){return s(N(a))}}),yt=q("superadmin/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role;return(await je(`${he}/toggle-status/${t}/${s}?id=${c}&role=${i}`)).data}catch(l){return r(N(l))}}),vt=q("superadmin/getChildren",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`${he}/${t}/children`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),Ct=q("superadmin/createChild",async({childAdminData:t,parentAdminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await J(`${he}/${s}/children`,t);return a.status===201?l:r(N(l))}catch(a){return r(N(a))}}),wt=q("superadmin/updateChild",async({parentAdminId:t,superdistributorsId:s,updatedFields:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await me(`${he}/${t}/children/${s}`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),St=q("superadmin/creditTransferToChild",async({parentAdminId:t,superdistributorsId:s,transferData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${he}/${t}/children/${s}/credit-transfer`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),At=q("superadmin/creditAdjustToChild",async({any:t,id:s,requestData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${he}/${t}/children/${s}/credit-adjust`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Lt=q("superadmin/toggleChildStatus",async({userId:t,adminId:s,action:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await je(`${he}/${s}/children/${t}/toggle-status/${r}`);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Et=q("superadmin/deleteChild",async({userId:t,adminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await ce(`${he}/${s}/children/delete/${t}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Dt=q("superadmin/getChildById",async({any:t,id:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await Y(`${he}/${t}/children/${s}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Xa=re({name:"superadmins",initialState:{superadmins:[],superadmin:null,superadminLoading:!1,superadminError:null,superadminMessage:null,children:[],childrenInfo:null,childrenLoading:!1,childrenError:null,childrenMessage:null},reducers:{resetsuperadminState:t=>{t.superadminError=null,t.superadminMessage=null},resetData:()=>({superadmins:[],children:[]})},extraReducers:t=>{t.addCase(We.pending,s=>{s.superadminLoading=!0}).addCase(We.fulfilled,(s,r)=>{s.superadmins=r.payload.data,s.superadminLoading=!1,s.superadminMessage="superadmins fetched successfully.",s.superadminError=null}).addCase(We.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(pt.pending,s=>{s.superadminLoading=!0}).addCase(pt.fulfilled,(s,r)=>{s.superadmins=r.payload.data,s.superadminLoading=!1,s.superadminMessage="superadmin created successfully."}).addCase(pt.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(ft.pending,s=>{s.superadminLoading=!0}).addCase(ft.fulfilled,(s,r)=>{s.superadmin=r.payload.data,s.superadminLoading=!1}).addCase(ft.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(gt.pending,s=>{s.superadminLoading=!0}).addCase(gt.fulfilled,(s,r)=>{s.superadmins=s.superadmins.map(a=>a._id===r.payload.data._id?r.payload.data:a),s.superadminLoading=!1,s.superadminMessage="superadmin updated successfully."}).addCase(gt.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(jt.pending,s=>{s.superadminLoading=!0}).addCase(jt.fulfilled,(s,r)=>{s.superadmins=r.payload.data,s.superadminLoading=!1,s.superadminMessage="superadmin deleted successfully."}).addCase(jt.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(bt.pending,s=>{s.superadminLoading=!0}).addCase(bt.fulfilled,(s,r)=>{s.superadmins=r.payload.data,s.superadminLoading=!1,s.superadminMessage="Credit transferred successfully."}).addCase(bt.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(Nt.pending,s=>{s.superadminLoading=!0}).addCase(Nt.fulfilled,(s,r)=>{s.superadmins=r.payload.data,s.superadminLoading=!1,s.superadminMessage="Credit adjustment successful."}).addCase(Nt.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(yt.pending,s=>{s.superadminLoading=!0}).addCase(yt.fulfilled,(s,r)=>{s.superadmins=r.payload.data,s.superadminLoading=!1,s.superadminMessage="User status updated successfully."}).addCase(yt.rejected,(s,r)=>{s.superadminLoading=!1,s.superadminError=r.payload}),t.addCase(vt.pending,s=>{s.childrenLoading=!0}).addCase(vt.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children fetched successfully.",s.admin=r.payload.data.admin,s.children=r.payload.data.children}).addCase(vt.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Dt.pending,s=>{s.childrenLoading=!0}).addCase(Dt.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children fetched successfully.",s.childrenInfo=r.payload.data}).addCase(Dt.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Ct.pending,s=>{s.childrenLoading=!0}).addCase(Ct.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Create successfully.",s.children=r.payload.data}).addCase(Ct.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(wt.pending,s=>{s.childrenLoading=!0}).addCase(wt.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Update successfully.",s.children=r.payload.data}).addCase(wt.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Et.pending,s=>{s.childrenLoading=!0}).addCase(Et.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Delete successfully.",s.children=r.payload.data}).addCase(Et.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(St.pending,s=>{s.childrenLoading=!0}).addCase(St.fulfilled,(s,r)=>{const{AdminChildren:a,receiverWallet:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Credit Transfer successfully.",s.children=a,s.childrenInfo=l}).addCase(St.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(At.pending,s=>{s.childrenLoading=!0}).addCase(At.fulfilled,(s,r)=>{const{distributorChildren:a,receiver:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Credit Adjust successfully.",s.children=a,s.childrenInfo=l}).addCase(At.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Lt.pending,s=>{s.childrenLoading=!0}).addCase(Lt.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Status updated successfully.",s.children=r.payload.data}).addCase(Lt.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload})}}),{resetsuperadminState:Vo,resetData:Zo}=Xa.actions,rl=Xa.reducer,xe="/admins",vs=q("admin/create",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J(`${xe}/create`,t);return r.status===201?a:s(N(a))}catch(r){return s(N(r))}}),es=q("admin/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${xe}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Cs=q("admin/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${xe}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),ws=q("admin/update",async({adminId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${xe}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Ss=q("admin/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${xe}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),As=q("admin/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${xe}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Ls=q("admin/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${xe}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Es=q("admin/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${xe}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Ds=q("admin/getChildren",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`${xe}/${t}/children`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),$s=q("admin/createChild",async({childAdminData:t,parentAdminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await J(`${xe}/${s}/children`,t);return a.status===201?l:r(N(l))}catch(a){return r(N(a))}}),qs=q("admin/updateChild",async({parentAdminId:t,superdistributorsId:s,updatedFields:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await me(`${xe}/${t}/children/${s}`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Ms=q("admin/creditTransferToChild",async({parentAdminId:t,superdistributorsId:s,transferData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${xe}/${t}/children/${s}/credit-transfer`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Is=q("admin/creditAdjustToChild",async({any:t,id:s,requestData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${xe}/${t}/children/${s}/credit-adjust`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Ts=q("admin/toggleChildStatus",async({userId:t,adminId:s,action:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await je(`${xe}/${s}/children/${t}/toggle-status/${r}`);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),ks=q("admin/deleteChild",async({userId:t,adminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await ce(`${xe}/${s}/children/delete/${t}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Us=q("admin/getChildById",async({any:t,id:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await Y(`${xe}/${t}/children/${s}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Va=re({name:"admins",initialState:{admins:[],admin:null,adminLoading:!1,adminError:null,adminMessage:null,senderAmount:0,receiverAmount:0,children:[],childrenInfo:null,childrenLoading:!1,childrenError:null,childrenMessage:null},reducers:{resetAdminState:t=>{t.adminError=null,t.adminMessage=null},resetData:()=>({admins:[],children:[]})},extraReducers:t=>{t.addCase(es.pending,s=>{s.adminLoading=!0}).addCase(es.fulfilled,(s,r)=>{s.admins=r.payload.data,s.adminLoading=!1,s.adminMessage="Admins fetched successfully.",s.adminError=null}).addCase(es.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(vs.pending,s=>{s.adminLoading=!0}).addCase(vs.fulfilled,(s,r)=>{s.admins=r.payload.data,s.adminLoading=!1,s.adminMessage="Admin created successfully."}).addCase(vs.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(Cs.pending,s=>{s.adminLoading=!0}).addCase(Cs.fulfilled,(s,r)=>{s.admin=r.payload.data,s.adminLoading=!1}).addCase(Cs.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(ws.pending,s=>{s.adminLoading=!0}).addCase(ws.fulfilled,(s,r)=>{s.admins=r.payload.data,s.adminLoading=!1,s.adminMessage="Admin updated successfully."}).addCase(ws.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(Ss.pending,s=>{s.adminLoading=!0}).addCase(Ss.fulfilled,(s,r)=>{const{admins:a,receiverWallet:l,senderWallet:c}=r.payload.data;s.admins=a,s.admin=l,s.adminLoading=!1,s.adminMessage="Credit transferred successfully."}).addCase(Ss.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(Es.pending,s=>{s.adminLoading=!0}).addCase(Es.fulfilled,(s,r)=>{s.admins=r.payload.data,s.adminLoading=!1,s.adminMessage="Admin deleted successfully."}).addCase(Es.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(As.pending,s=>{s.adminLoading=!0}).addCase(As.fulfilled,(s,r)=>{const{admins:a,receiver:l}=r.payload.data;s.admins=a,s.admin=l,s.adminLoading=!1,s.adminMessage="Credit adjustment successful."}).addCase(As.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(Ls.pending,s=>{s.adminLoading=!0}).addCase(Ls.fulfilled,(s,r)=>{s.admins=r.payload.data,s.adminLoading=!1,s.adminMessage="User status updated successfully."}).addCase(Ls.rejected,(s,r)=>{s.adminLoading=!1,s.adminError=r.payload}),t.addCase(Ds.pending,s=>{s.childrenLoading=!0}).addCase(Ds.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children fetched successfully.",s.admin=r.payload.data.admin,s.children=r.payload.data.children}).addCase(Ds.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Us.pending,s=>{s.childrenLoading=!0}).addCase(Us.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children fetched successfully.",s.childrenInfo=r.payload.data}).addCase(Us.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase($s.pending,s=>{s.childrenLoading=!0}).addCase($s.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Create successfully.",s.children=r.payload.data}).addCase($s.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(qs.pending,s=>{s.childrenLoading=!0}).addCase(qs.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Update successfully.",s.children=r.payload.data}).addCase(qs.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(ks.pending,s=>{s.childrenLoading=!0}).addCase(ks.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Delete successfully.",s.children=r.payload.data}).addCase(ks.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Ms.pending,s=>{s.childrenLoading=!0}).addCase(Ms.fulfilled,(s,r)=>{const{AdminChildren:a,receiverWallet:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Credit Transfer successfully.",s.children=a,s.childrenInfo=l}).addCase(Ms.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Is.pending,s=>{s.childrenLoading=!0}).addCase(Is.fulfilled,(s,r)=>{const{AdminChildren:a,receiver:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Credit Adjust successfully.",s.children=a,s.childrenInfo=l}).addCase(Is.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Ts.pending,s=>{s.childrenLoading=!0}).addCase(Ts.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children Status updated successfully.",s.children=r.payload.data}).addCase(Ts.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload})}}),{resetAdminState:Jo,resetData:Qo}=Va.actions,tl=Va.reducer,$t=q("fetchSuperAdmins",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y("super/");return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("deleteSuperAdmin",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`super/${l}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("fetchAdmins",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`admins?id=${l}&currentrole=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("deleteAdmins",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`admins/${l}?currentrole=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("fetchSuperDistributors",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`superdistributors?id=${l}&currentrole=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("deleteSuperDistributors",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`superdistributors/${l}?currentrole=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("fetchDistributors",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`distibutors?id=${l}&currentrole=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}});q("deleteDistributors",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth,i=c.role,n=c._id,{response:d,json:o}=await ce(`distibutors/${n}?currentrole=${i}`,l);return d.status===200?o:r(N(o))}catch(a){return r(N(a))}});q("fetchRetailers",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth,i=c.role,n=c._id,{response:d,json:o}=await Y(`retailers?id=${n}&currentrole=${i}`,l);return d.status===200?o:r(N(o))}catch(a){return r(N(a))}});q("deleteRetailers",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth,i=c.role,n=c._id,{response:d,json:o}=await ce(`retailers/${n}?currentrole=${i}`,l);return d.status===200?o:r(N(o))}catch(a){return r(N(a))}});q("fetchUsers",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l}=a.auth,{response:c,json:i}=await Y("allusers/",l);return c.status===200?i:r(N(i))}catch(a){return r(N(a))}});q("deleteUsers",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l}=a.auth,{response:c,json:i}=await ce(`allusers/${t}`,l);return c.status===200?i:r(N(i))}catch(a){return r(N(a))}});const qt=q("fetchUserById",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth,i=c==null?void 0:c.role;let n;if(c.role!==void 0){const{response:d,json:o}=await Y(`fetchUserById?id=${t}&currentrole=${i}`,l);if(n=o,d.status===200)return o}return r(N(n))}catch(a){return r(N(a))}}),Ee=q("super/fetchUserCount",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth;let i=c._id,n=c.role,d="";if(n!==void 0){const{response:o,json:p}=await Y(`counts/usercount?role=${n}&id=${i}&currentrole=${n}`,l);if(d=p,o.status===200)return p}return r(N(d))}catch(a){return r(N(a))}}),Za=re({name:"supers",initialState:{superadmins:[],usercount:[],userInfo:[],user:[],userss:[],isLoading:!1},reducers:{resetAuthState:()=>(ke(),{superadmins:[]})},extraReducers:t=>{t.addCase($t.pending,s=>{s.isLoading=!0,s.superadmins=[]}).addCase($t.fulfilled,(s,r)=>{s.isLoading=!1,s.superadmins=r.payload.data}).addCase($t.rejected,s=>{s.isLoading=!1,s.superadmins=[]}).addCase(qt.pending,s=>{s.isLoading=!0,s.userInfo=[]}).addCase(qt.fulfilled,(s,r)=>{s.user=r.payload.data,s.userss=r.payload.users,s.isLoading=!1,s.userInfo=r.payload.data}).addCase(qt.rejected,s=>{s.isLoading=!1,s.userInfo=[]}).addCase(Ee.pending,s=>{s.isLoading=!0,s.usercount=[]}).addCase(Ee.fulfilled,(s,r)=>{s.isLoading=!1,s.usercount=r.payload}).addCase(Ee.rejected,s=>{s.isLoading=!1,s.usercount=[]})}}),{resetAuthState:Wo}=Za.actions,al=Za.reducer,pe="/superareamanager",Ps=q("superareamanager/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${pe}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),Ue=q("superareamanager/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${pe}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Rs=q("superareamanager/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${pe}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Os=q("superareamanager/update",async({superdistributorsId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${pe}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),_s=q("superareamanager/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${pe}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Bs=q("superareamanager/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${pe}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Fs=q("superareamanager/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${pe}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Gs=q("superareamanager/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${pe}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),zs=q("superareamanager/getChildren",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`${pe}/${t}/children`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),Hs=q("superareamanager/createChild",async({childAdminData:t,parentAdminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await J(`${pe}/${s}/children`,t);return a.status===201?l:r(N(l))}catch(a){return r(N(a))}}),Ys=q("superareamanager/updateChild",async({parentAdminId:t,superdistributorsId:s,updatedFields:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await me(`${pe}/${t}/children/${s}`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Ks=q("superareamanager/creditTransferToChild",async({parentAdminId:t,superdistributorsId:s,transferData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${pe}/${t}/children/${s}/credit-transfer`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Xs=q("superareamanager/creditAdjustToChild",async({any:t,id:s,requestData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${pe}/${t}/children/${s}/credit-adjust`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Vs=q("superareamanager/toggleChildStatus",async({userId:t,adminId:s,action:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await je(`${pe}/${s}/children/${t}/toggle-status/${r}`);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Zs=q("superareamanager/deleteChild",async({userId:t,adminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await ce(`${pe}/${s}/children/delete/${t}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Js=q("superareamanager/getChildById",async({any:t,id:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await Y(`${pe}/${t}/children/${s}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Ja=re({name:"superdistributors",initialState:{superdistributors:[],superdistributor:null,superdistributorsLoading:!1,superdistributorsError:null,superdistributorsMessage:null,children:[],childrenInfo:null,childrenLoading:!1,childrenError:null,childrenMessage:null},reducers:{resetsuperdistributorsState:t=>{t.superdistributorsError=null,t.superdistributorsMessage=null,t.superdistributors=[],t.children=[]},resetData:()=>({superdistributors:[],children:[]})},extraReducers:t=>{t.addCase(Ue.pending,s=>{s.superdistributorsLoading=!0}).addCase(Ue.fulfilled,(s,r)=>{s.superdistributors=r.payload.data,s.superdistributorsLoading=!1,s.superdistributorsMessage="superdistributorss fetched successfully.",s.superdistributorsError=null}).addCase(Ue.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(Ps.pending,s=>{s.superdistributorsLoading=!0}).addCase(Ps.fulfilled,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsMessage="superdistributors created successfully."}).addCase(Ps.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(Rs.pending,s=>{s.superdistributorsLoading=!0}).addCase(Rs.fulfilled,(s,r)=>{s.superdistributor=r.payload.data,s.superdistributorsLoading=!1}).addCase(Rs.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(Os.pending,s=>{s.superdistributorsLoading=!0}).addCase(Os.fulfilled,(s,r)=>{s.superdistributors=r.payload.data,s.superdistributorsLoading=!1,s.superdistributorsMessage="superdistributors updated successfully."}).addCase(Os.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(_s.pending,s=>{s.superdistributorsLoading=!0}).addCase(_s.fulfilled,(s,r)=>{const{superdistributors:a,receiverWallet:l}=r.payload.data;s.superdistributors=a,s.superdistributor=l,s.superdistributorsLoading=!1,s.superdistributorsMessage="Credit transferred successfully."}).addCase(_s.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(Gs.pending,s=>{s.superdistributorsLoading=!0}).addCase(Gs.fulfilled,(s,r)=>{s.superdistributors=r.payload.data,s.superdistributorsLoading=!1,s.superdistributorsMessage="superdistributors deleted successfully."}).addCase(Gs.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(Bs.pending,s=>{s.superdistributorsLoading=!0}).addCase(Bs.fulfilled,(s,r)=>{const{superdistributors:a,receiver:l}=r.payload.data;s.superdistributors=a,s.superdistributor=l,s.superdistributorsLoading=!1,s.superdistributorsMessage="Credit adjustment successful."}).addCase(Bs.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(Fs.pending,s=>{s.superdistributorsLoading=!0}).addCase(Fs.fulfilled,(s,r)=>{s.superdistributors=r.payload.data,s.superdistributorsLoading=!1,s.superdistributorsMessage="User status updated successfully."}).addCase(Fs.rejected,(s,r)=>{s.superdistributorsLoading=!1,s.superdistributorsError=r.payload}),t.addCase(zs.pending,s=>{s.childrenLoading=!0}).addCase(zs.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributorss Children fetched successfully.",s.superdistributor=r.payload.data.Superareamanager,s.children=r.payload.data.children}).addCase(zs.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Js.pending,s=>{s.childrenLoading=!0}).addCase(Js.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="Admins Children fetched successfully.",s.childrenInfo=r.payload.data}).addCase(Js.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Hs.pending,s=>{s.childrenLoading=!0}).addCase(Hs.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributorss Children Create successfully.",s.children=r.payload.data}).addCase(Hs.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Ys.pending,s=>{s.childrenLoading=!0}).addCase(Ys.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributorss Children Update successfully.",s.children=r.payload.data}).addCase(Ys.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Zs.pending,s=>{s.childrenLoading=!0}).addCase(Zs.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributorss Children Delete successfully.",s.children=r.payload.data}).addCase(Zs.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Ks.pending,s=>{s.childrenLoading=!0}).addCase(Ks.fulfilled,(s,r)=>{const{distributorChildren:a,receiverWallet:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributorss Children Credit Transfer successfully.",s.children=a,s.childrenInfo=l}).addCase(Ks.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Xs.pending,s=>{s.childrenLoading=!0}).addCase(Xs.fulfilled,(s,r)=>{const{distributorChildren:a,receiver:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributorss Children Credit Adjust successfully.",s.children=a,s.childrenInfo=l}).addCase(Xs.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Vs.pending,s=>{s.childrenLoading=!0}).addCase(Vs.fulfilled,(s,r)=>{s.children=r.payload.data,s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="superdistributors Children Status updated successfully."}).addCase(Vs.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload})}}),{resetsuperdistributorsState:eu,resetData:su}=Ja.actions,nl=Ja.reducer,fe="/areamanager",Qs=q("areamanager/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${fe}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),Pe=q("areamanager/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${fe}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Ws=q("areamanager/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${fe}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),er=q("areamanager/update",async({distributorsId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${fe}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),sr=q("areamanager/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${fe}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),rr=q("areamanager/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${fe}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),tr=q("areamanager/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${fe}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),ar=q("areamanager/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${fe}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),nr=q("areamanager/getChildren",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`${fe}/${t}/children`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),lr=q("areamanager/createChild",async({childAdminData:t,parentAdminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await J(`${fe}/${s}/children`,t);return a.status===201?l:r(N(l))}catch(a){return r(N(a))}}),ir=q("areamanager/updateChild",async({parentAdminId:t,superdistributorsId:s,updatedFields:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await me(`${fe}/${t}/children/${s}`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),cr=q("areamanager/creditTransferToChild",async({parentdistributorId:t,superdistributorsId:s,transferData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${fe}/${t}/children/${s}/credit-transfer`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),dr=q("areamanager/creditAdjustToChild",async({any:t,id:s,requestData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${fe}/${t}/children/${s}/credit-adjust`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),or=q("areamanager/toggleChildStatus",async({userId:t,adminId:s,action:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await je(`${fe}/${s}/children/${t}/toggle-status/${r}`);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),ur=q("areamanager/deleteChild",async({userId:t,adminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await ce(`${fe}/${s}/children/delete/${t}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),mr=q("areamanager/getChildById",async({any:t,id:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await Y(`${fe}/${t}/children/${s}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Qa=re({name:"distributors",initialState:{distributors:[],distributor:null,distributorsLoading:!1,distributorsError:null,distributorsMessage:null,children:[],childrenInfo:null,childrenLoading:!1,childrenError:null,childrenMessage:null},reducers:{resetdistributorsState:t=>{t.distributorsError=null,t.distributorsMessage=null},resetData:()=>({distributors:[],children:[]})},extraReducers:t=>{t.addCase(Pe.pending,s=>{s.distributorsLoading=!0}).addCase(Pe.fulfilled,(s,r)=>{s.distributors=r.payload.data,s.distributorsLoading=!1,s.distributorsMessage="distributorss fetched successfully.",s.distributorsError=null}).addCase(Pe.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(Qs.pending,s=>{s.distributorsLoading=!0}).addCase(Qs.fulfilled,(s,r)=>{s.distributorsLoading=!1,s.distributorsMessage="distributors created successfully."}).addCase(Qs.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(Ws.pending,s=>{s.distributorsLoading=!0}).addCase(Ws.fulfilled,(s,r)=>{s.distributor=r.payload.data,s.distributorsLoading=!1}).addCase(Ws.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(er.pending,s=>{s.distributorsLoading=!0}).addCase(er.fulfilled,(s,r)=>{s.distributors=r.payload.data,s.distributorsLoading=!1,s.distributorsMessage="distributors updated successfully."}).addCase(er.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(sr.pending,s=>{s.distributorsLoading=!0}).addCase(sr.fulfilled,(s,r)=>{const{distributors:a,receiverWallet:l}=r.payload.data;s.distributors=a,s.distributor=l,s.distributorsLoading=!1,s.distributorsMessage="Credit transferred successfully."}).addCase(sr.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(ar.pending,s=>{s.distributorsLoading=!0}).addCase(ar.fulfilled,(s,r)=>{s.distributors=r.payload.data,s.distributorsLoading=!1,s.distributorsMessage="distributors deleted successfully."}).addCase(ar.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(rr.pending,s=>{s.distributorsLoading=!0}).addCase(rr.fulfilled,(s,r)=>{const{distributors:a,receiver:l}=r.payload.data;s.distributors=a,s.distributor=l,s.distributorsLoading=!1,s.distributorsMessage="Credit adjustment successful."}).addCase(rr.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(tr.pending,s=>{s.distributorsLoading=!0}).addCase(tr.fulfilled,(s,r)=>{s.distributors=r.payload.data,s.distributorsLoading=!1,s.distributorsMessage="User status updated successfully."}).addCase(tr.rejected,(s,r)=>{s.distributorsLoading=!1,s.distributorsError=r.payload}),t.addCase(nr.pending,s=>{s.childrenLoading=!0}).addCase(nr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children fetched successfully.",s.distributor=r.payload.data.masters,s.children=r.payload.data.children}).addCase(nr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(mr.pending,s=>{s.childrenLoading=!0}).addCase(mr.fulfilled,(s,r)=>{s.childrenInfo=r.payload.data,s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children fetched successfully."}).addCase(mr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(lr.pending,s=>{s.childrenLoading=!0}).addCase(lr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children Create successfully.",s.children=r.payload.data}).addCase(lr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(ir.pending,s=>{s.childrenLoading=!0}).addCase(ir.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children Update successfully.",s.children=r.payload.data}).addCase(ir.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(ur.pending,s=>{s.childrenLoading=!0}).addCase(ur.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children Delete successfully.",s.children=r.payload.data}).addCase(ur.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(cr.pending,s=>{s.childrenLoading=!0}).addCase(cr.fulfilled,(s,r)=>{const{retailersChildren:a,receiverWallet:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children Credit Transfer successfully.",s.children=a,s.childrenInfo=l}).addCase(cr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(dr.pending,s=>{s.childrenLoading=!0}).addCase(dr.fulfilled,(s,r)=>{const{retailersChildren:a,receiver:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children Credit Adjust successfully.",s.children=a,s.childrenInfo=l}).addCase(dr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(or.pending,s=>{s.childrenLoading=!0}).addCase(or.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="distributors Children Status updated successfully.",s.children=r.payload.data}).addCase(or.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload})}}),{resetdistributorsState:ru,resetData:tu}=Qa.actions,ll=Qa.reducer,ge="/master",hr=q("master/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${ge}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),Re=q("master/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${ge}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),xr=q("master/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${ge}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),pr=q("master/update",async({retailersId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${ge}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),fr=q("master/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${ge}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),gr=q("master/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${ge}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),jr=q("master/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${ge}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),br=q("master/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${ge}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Nr=q("master/getChildren",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`${ge}/${t}/children`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),yr=q("master/createChild",async({childAdminData:t,parentAdminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await J(`${ge}/${s}/children`,t);return a.status===201?l:r(N(l))}catch(a){return r(N(a))}}),vr=q("master/updateChild",async({parentAdminId:t,superdistributorsId:s,updatedFields:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await me(`${ge}/${t}/children/${s}`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Cr=q("master/creditTransferToChild",async({parentAdminId:t,superdistributorsId:s,transferData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${ge}/${t}/children/${s}/credit-transfer`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),wr=q("master/creditAdjustToChild",async({any:t,id:s,requestData:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await J(`${ge}/${t}/children/${s}/credit-adjust`,r);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Sr=q("master/toggleChildStatus",async({userId:t,adminId:s,action:r},{rejectWithValue:a})=>{try{const{response:l,json:c}=await je(`${ge}/${s}/children/${t}/toggle-status/${r}`);return l.status===200?c:a(N(c))}catch(l){return a(N(l))}}),Ar=q("master/deleteChild",async({userId:t,adminId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await ce(`${ge}/${s}/children/delete/${t}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Lr=q("master/getChildById",async({any:t,id:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await Y(`${ge}/${t}/children/${s}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Wa=re({name:"retailer",initialState:{retailers:[],retailer:null,retailerLoading:!1,retailerError:null,retailerMessage:null,children:[],childrenInfo:null,childrenLoading:!1,childrenError:null,childrenMessage:null},reducers:{resetretailerState:t=>{t.retailerError=null,t.retailerMessage=null},resetData:()=>({retailers:[],children:[]})},extraReducers:t=>{t.addCase(Re.pending,s=>{s.retailerLoading=!0}).addCase(Re.fulfilled,(s,r)=>{s.retailers=r.payload.data,s.retailerLoading=!1,s.retailerMessage="retailers fetched successfully.",s.retailerError=null}).addCase(Re.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(hr.pending,s=>{s.retailerLoading=!0}).addCase(hr.fulfilled,(s,r)=>{s.retailerLoading=!1,s.retailerMessage="retailer created successfully."}).addCase(hr.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(xr.pending,s=>{s.retailerLoading=!0}).addCase(xr.fulfilled,(s,r)=>{s.retailer=r.payload.data,s.retailerLoading=!1}).addCase(xr.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(pr.pending,s=>{s.retailerLoading=!0}).addCase(pr.fulfilled,(s,r)=>{s.retailers=r.payload.data,s.retailerLoading=!1,s.retailerMessage="retailer updated successfully."}).addCase(pr.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(fr.pending,s=>{s.retailerLoading=!0}).addCase(fr.fulfilled,(s,r)=>{const{retailers:a,receiverWallet:l}=r.payload.data;s.retailers=a,s.retailer=l,s.retailerLoading=!1,s.retailerMessage="Credit transferred successfully."}).addCase(fr.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(br.pending,s=>{s.retailerLoading=!0}).addCase(br.fulfilled,(s,r)=>{s.retailers=r.payload.data,s.retailerLoading=!1,s.retailerMessage="retailer deleted successfully."}).addCase(br.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(gr.pending,s=>{s.retailerLoading=!0}).addCase(gr.fulfilled,(s,r)=>{const{retailers:a,receiver:l}=r.payload.data;s.retailers=a,s.retailer=l,s.retailerLoading=!1,s.retailerMessage="Credit adjustment successful."}).addCase(gr.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(jr.pending,s=>{s.retailerLoading=!0}).addCase(jr.fulfilled,(s,r)=>{s.retailers=r.payload.data,s.retailerLoading=!1,s.retailerMessage="User status updated successfully."}).addCase(jr.rejected,(s,r)=>{s.retailerLoading=!1,s.retailerError=r.payload}),t.addCase(Nr.pending,s=>{s.childrenLoading=!0}).addCase(Nr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children fetched successfully.",s.retailer=r.payload.data.Master,s.children=r.payload.data.children}).addCase(Nr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Lr.pending,s=>{s.childrenLoading=!0}).addCase(Lr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children fetched successfully.",s.childrenInfo=r.payload.data}).addCase(Lr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(yr.pending,s=>{s.childrenLoading=!0}).addCase(yr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children Create successfully.",s.children=r.payload.data}).addCase(yr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(vr.pending,s=>{s.childrenLoading=!0}).addCase(vr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children Update successfully.",s.children=r.payload.data}).addCase(vr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Ar.pending,s=>{s.childrenLoading=!0}).addCase(Ar.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children Delete successfully.",s.children=r.payload.data}).addCase(Ar.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Cr.pending,s=>{s.childrenLoading=!0}).addCase(Cr.fulfilled,(s,r)=>{const{RetailerChildren:a,receiverWallet:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children Credit Transfer successfully.",s.children=a,s.childrenInfo=l}).addCase(Cr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(wr.pending,s=>{s.childrenLoading=!0}).addCase(wr.fulfilled,(s,r)=>{const{RetailerChildren:a,receiver:l}=r.payload.data;s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children Credit Adjust successfully.",s.children=a,s.childrenInfo=l}).addCase(wr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload}),t.addCase(Sr.pending,s=>{s.childrenLoading=!0}).addCase(Sr.fulfilled,(s,r)=>{s.childrenLoading=!1,s.childrenError=null,s.childrenMessage="retailerss Children Status updated successfully.",s.children=r.payload.data}).addCase(Sr.rejected,(s,r)=>{s.childrenLoading=!1,s.childrenError=r.payload})}}),{resetretailerState:au,resetData:nu}=Wa.actions,il=Wa.reducer,De="/player",Er=q("player/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${De}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),Oe=q("player/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${De}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Dr=q("player/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${De}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),$r=q("player/update",async({usersId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${De}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),qr=q("player/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${De}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Mr=q("player/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${De}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Ir=q("player/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${De}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Tr=q("player/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${De}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),en=re({name:"user",initialState:{users:[],user:null,userLoading:!1,userError:null,userMessage:null},reducers:{resetuserState:t=>{t.userError=null,t.userMessage=null},resetData:()=>({users:[]})},extraReducers:t=>{t.addCase(Oe.pending,s=>{s.userLoading=!0}).addCase(Oe.fulfilled,(s,r)=>{s.users=r.payload.data,s.userLoading=!1,s.userMessage="users fetched successfully.",s.userError=null}).addCase(Oe.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase(Er.pending,s=>{s.userLoading=!0}).addCase(Er.fulfilled,(s,r)=>{s.userLoading=!1,s.userMessage="user created successfully."}).addCase(Er.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase(Dr.pending,s=>{s.userLoading=!0}).addCase(Dr.fulfilled,(s,r)=>{s.user=r.payload.data,s.userLoading=!1}).addCase(Dr.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase($r.pending,s=>{s.userLoading=!0}).addCase($r.fulfilled,(s,r)=>{s.users=r.payload.data,s.userLoading=!1,s.userMessage="user updated successfully."}).addCase($r.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase(qr.pending,s=>{s.userLoading=!0}).addCase(qr.fulfilled,(s,r)=>{const{users:a,receiverWallet:l}=r.payload.data;s.users=a,s.user=l,s.userLoading=!1,s.userMessage="Credit transferred successfully."}).addCase(qr.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase(Tr.pending,s=>{s.userLoading=!0}).addCase(Tr.fulfilled,(s,r)=>{s.users=r.payload.data,s.userLoading=!1,s.userMessage="user deleted successfully."}).addCase(Tr.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase(Mr.pending,s=>{s.userLoading=!0}).addCase(Mr.fulfilled,(s,r)=>{const{users:a,receiver:l}=r.payload.data;s.users=a,s.user=l,s.userLoading=!1,s.userMessage="Credit adjustment successful."}).addCase(Mr.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload}),t.addCase(Ir.pending,s=>{s.userLoading=!0}).addCase(Ir.fulfilled,(s,r)=>{s.users=r.payload.data,s.userLoading=!1,s.userMessage="User status updated successfully."}).addCase(Ir.rejected,(s,r)=>{s.userLoading=!1,s.userError=r.payload})}}),{resetuserState:lu,resetData:iu}=en.actions,cl=en.reducer,sn="/percentage",kr=q("percentage/fetchGamepercentageByAdmin",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`${sn}/usergames/${t}`);return r.status===200?r.data:s(N(a))}catch(r){return s(N(r))}}),Ur=q("percentage/updateWinpercentageBulk",async({id:t,data:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await me(`${sn}/bulk/winpercentage/${t}`,s);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),rn=re({name:"percentage",initialState:{adminGameList:[],gamesList:[],historyUsers:[],percentage:[],percentageError:null,percentageLoading:!1,percentageMessage:null},reducers:{setPercentage:(t,s)=>{t.percentage=s.payload},resetData:()=>({adminGameList:[],gamesList:[],historyUsers:[],percentage:[]})},extraReducers:t=>{t.addCase(kr.pending,s=>{s.percentageLoading=!0}).addCase(kr.fulfilled,(s,r)=>{s.percentageLoading=!1,s.gamesList=r.payload.games,s.historyUsers=r.payload.users,s.adminGameList=r.payload.adminGameList}).addCase(kr.rejected,(s,r)=>{s.percentageLoading=!1,s.percentageError=r.payload}),t.addCase(Ur.pending,s=>{s.percentageLoading=!0}).addCase(Ur.fulfilled,(s,r)=>{console.log(r.payload.message),s.percentageLoading=!1,s.gamesList=r.payload.games,s.historyUsers=r.payload.users,s.adminGameList=r.payload.adminGameList,s.percentageMessage=r.payload}).addCase(Ur.rejected,(s,r)=>{s.percentageLoading=!1,s.percentageError=r.payload})}}),{setPercentage:cu,resetData:du}=rn.actions,dl=rn.reducer,Pr=q("logs/getAll",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("/logs");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),ol=q("logs/getByUserId",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`/logs/${t}`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),ul=q("logs/getById",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`/logs/getUserLogById/${t}`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),ml=q("logs/logActivity",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("/logs/logUserActivity",t);return r.status===201?a:s(N(a))}catch(r){return s(N(r))}}),hl=q("logs/getActivityLogs",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("/logs/activityLogs");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),xl={logs:[],log:null,logloading:!1,logerror:null},tn=re({name:"logs",initialState:xl,reducers:{resetLogs:t=>{t.logs=[],t.logerror=null}},extraReducers:t=>{t.addCase(Pr.pending,s=>{s.logloading=!0,s.logerror=null}).addCase(Pr.fulfilled,(s,r)=>{s.logloading=!1,s.logs=r.payload.data}).addCase(Pr.rejected,(s,r)=>{s.logloading=!1,s.logerror=r.payload})}}),{resetLogs:ou}=tn.actions,pl=tn.reducer,we="/otc",Mt=q("otc/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${we}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),ss=q("otc/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${we}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Rr=q("otc/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${we}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Or=q("otc/update",async({usersId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${we}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),_r=q("otc/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${we}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Br=q("otc/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${we}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Fr=q("otc/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${we}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Gr=q("otc/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${we}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),rs=q("otc/loadcredit",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${we}/loadcredit/${l}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),an=re({name:"otc",initialState:{otcs:[],otc:null,otcLoading:!1,amountError:null,amountLoding:null,senderAmount:0,receiverAmount:0,otcError:null,otcMessage:null},reducers:{resetotcState:t=>{t.otcError=null,t.otcMessage=null},resetData:()=>({otcs:[]})},extraReducers:t=>{t.addCase(ss.pending,s=>{s.otcLoading=!0}).addCase(ss.fulfilled,(s,r)=>{s.otcs=r.payload.data,s.otcLoading=!1,s.otcMessage="otcs fetched successfully.",s.otcError=null}).addCase(ss.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(Mt.pending,s=>{s.otcLoading=!0}).addCase(Mt.fulfilled,(s,r)=>{s.otcLoading=!1,s.otcMessage="otc created successfully."}).addCase(Mt.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(Rr.pending,s=>{s.otcLoading=!0}).addCase(Rr.fulfilled,(s,r)=>{s.otc=r.payload.data,s.otcLoading=!1}).addCase(Rr.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(Or.pending,s=>{s.otcLoading=!0}).addCase(Or.fulfilled,(s,r)=>{s.otcs=r.payload.data,s.otcLoading=!1,s.otcMessage="otc updated successfully."}).addCase(Or.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(_r.pending,s=>{s.otcLoading=!0}).addCase(_r.fulfilled,(s,r)=>{const{otcs:a,receiverWallet:l}=r.payload.data;s.otcs=a,s.otc=l,s.otcLoading=!1,s.otcMessage="Credit transferred successfully."}).addCase(_r.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(Gr.pending,s=>{s.otcLoading=!0}).addCase(Gr.fulfilled,(s,r)=>{s.otcs=r.payload.data,s.otcLoading=!1,s.otcMessage="otc deleted successfully."}).addCase(Gr.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(Br.pending,s=>{s.otcLoading=!0}).addCase(Br.fulfilled,(s,r)=>{const{otcs:a,receiver:l}=r.payload.data;s.otcs=a,s.otc=l,s.otcLoading=!1,s.otcMessage="Credit adjustment successful."}).addCase(Br.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(Fr.pending,s=>{s.otcLoading=!0}).addCase(Fr.fulfilled,(s,r)=>{s.otcs=r.payload.data,s.otcLoading=!1,s.otcMessage="otc status updated successfully."}).addCase(Fr.rejected,(s,r)=>{s.otcLoading=!1,s.otcError=r.payload}),t.addCase(rs.pending,s=>{s.amountLoding=!0,s.serverError=null}).addCase(rs.fulfilled,(s,r)=>{s.amountLoding=!1,s.senderAmount=r.payload.data[0],s.amountError=null}).addCase(rs.rejected,(s,r)=>{s.amountLoding=!1,s.amountError=r.error.message})}}),{resetotcState:uu,resetData:mu}=an.actions,fl=an.reducer,Se="/loan",It=q("loan/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${Se}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),ts=q("loan/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${Se}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),zr=q("loan/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${Se}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Hr=q("loan/update",async({usersId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${Se}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Yr=q("loan/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${Se}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Kr=q("loan/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${Se}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Xr=q("loan/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${Se}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Vr=q("loan/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${Se}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),as=q("loan/loadcredit",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${Se}/loadcredit/${l}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),nn=re({name:"loan",initialState:{loans:[],loan:null,loanLoading:!1,amountError:null,amountLoding:null,senderAmount:0,receiverAmount:0,loanError:null,loanMessage:null},reducers:{resetloanState:t=>{t.loanError=null,t.loanMessage=null},resetData:()=>({loans:[]})},extraReducers:t=>{t.addCase(ts.pending,s=>{s.loanLoading=!0}).addCase(ts.fulfilled,(s,r)=>{s.loans=r.payload.data,s.loanLoading=!1,s.loanMessage="loans fetched successfully.",s.loanError=null}).addCase(ts.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(It.pending,s=>{s.loanLoading=!0}).addCase(It.fulfilled,(s,r)=>{s.loanLoading=!1,s.loanMessage="loan created successfully."}).addCase(It.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(zr.pending,s=>{s.loanLoading=!0}).addCase(zr.fulfilled,(s,r)=>{s.loan=r.payload.data,s.loanLoading=!1}).addCase(zr.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(Hr.pending,s=>{s.loanLoading=!0}).addCase(Hr.fulfilled,(s,r)=>{s.loans=r.payload.data,s.loanLoading=!1,s.loanMessage="loan updated successfully."}).addCase(Hr.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(Yr.pending,s=>{s.loanLoading=!0}).addCase(Yr.fulfilled,(s,r)=>{const{loans:a,receiverWallet:l}=r.payload.data;s.loans=a,s.loan=l,s.loanLoading=!1,s.loanMessage="Credit transferred successfully."}).addCase(Yr.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(Vr.pending,s=>{s.loanLoading=!0}).addCase(Vr.fulfilled,(s,r)=>{s.loans=r.payload.data,s.loanLoading=!1,s.loanMessage="loan deleted successfully."}).addCase(Vr.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(Kr.pending,s=>{s.loanLoading=!0}).addCase(Kr.fulfilled,(s,r)=>{const{loans:a,receiver:l}=r.payload.data;s.loans=a,s.loan=l,s.loanLoading=!1,s.loanMessage="Credit adjustment successful."}).addCase(Kr.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(Xr.pending,s=>{s.loanLoading=!0}).addCase(Xr.fulfilled,(s,r)=>{s.loans=r.payload.data,s.loanLoading=!1,s.loanMessage="loan status updated successfully."}).addCase(Xr.rejected,(s,r)=>{s.loanLoading=!1,s.loanError=r.payload}),t.addCase(as.pending,s=>{s.amountLoding=!0,s.serverError=null}).addCase(as.fulfilled,(s,r)=>{s.amountLoding=!1,s.senderAmount=r.payload.data[0],s.amountError=null}).addCase(as.rejected,(s,r)=>{s.amountLoding=!1,s.amountError=r.error.message})}}),{resetloanState:hu,resetData:xu}=nn.actions,gl=nn.reducer,Ae="/gift",Tt=q("gift/create",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${Ae}/create?id=${l}&role=${c}`,t);return i.status===201?n:s(N(n))}catch(a){return s(N(a))}}),ns=q("gift/getAll",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${Ae}/all?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Zr=q("gift/getById",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${Ae}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Jr=q("gift/update",async({usersId:t,updatedFields:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await me(`${Ae}/${t}?id=${c}&role=${i}`,s);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),Qr=q("gift/creditTransfer",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${Ae}/credit-transfer?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),Wr=q("gift/creditAdjust",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await J(`${Ae}/credit-adjust?id=${l}&role=${c}`,t);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),et=q("gift/toggleStatus",async({userId:t,action:s},{rejectWithValue:r,getState:a})=>{try{const{authUser:l}=a().auth,c=l._id,i=l.role,{response:n,json:d}=await je(`${Ae}/toggle-status/${t}/${s}?id=${c}&role=${i}`);return n.status===200?d:r(N(d))}catch(l){return r(N(l))}}),st=q("gift/delete",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await ce(`${Ae}/${t}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),ls=q("gift/loadcredit",async(t,{rejectWithValue:s,getState:r})=>{try{const{authUser:a}=r().auth,l=a._id,c=a.role,{response:i,json:n}=await Y(`${Ae}/loadcredit/${l}?id=${l}&role=${c}`);return i.status===200?n:s(N(n))}catch(a){return s(N(a))}}),ln=re({name:"gift",initialState:{gifts:[],gift:null,giftLoading:!1,amountError:null,amountLoding:null,senderAmount:0,receiverAmount:0,giftError:null,giftMessage:null},reducers:{resetgiftState:t=>{t.giftError=null,t.giftMessage=null},resetData:()=>({gifts:[]})},extraReducers:t=>{t.addCase(ns.pending,s=>{s.giftLoading=!0}).addCase(ns.fulfilled,(s,r)=>{s.gifts=r.payload.data,s.giftLoading=!1,s.giftMessage="gifts fetched successfully.",s.giftError=null}).addCase(ns.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(Tt.pending,s=>{s.giftLoading=!0}).addCase(Tt.fulfilled,(s,r)=>{s.giftLoading=!1,s.giftMessage="gift created successfully."}).addCase(Tt.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(Zr.pending,s=>{s.giftLoading=!0}).addCase(Zr.fulfilled,(s,r)=>{s.gift=r.payload.data,s.giftLoading=!1}).addCase(Zr.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(Jr.pending,s=>{s.giftLoading=!0}).addCase(Jr.fulfilled,(s,r)=>{s.gifts=r.payload.data,s.giftLoading=!1,s.giftMessage="gift updated successfully."}).addCase(Jr.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(Qr.pending,s=>{s.giftLoading=!0}).addCase(Qr.fulfilled,(s,r)=>{const{gifts:a,receiverWallet:l}=r.payload.data;s.gifts=a,s.gift=l,s.giftLoading=!1,s.giftMessage="Credit transferred successfully."}).addCase(Qr.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(st.pending,s=>{s.giftLoading=!0}).addCase(st.fulfilled,(s,r)=>{s.gifts=r.payload.data,s.giftLoading=!1,s.giftMessage="gift deleted successfully."}).addCase(st.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(Wr.pending,s=>{s.giftLoading=!0}).addCase(Wr.fulfilled,(s,r)=>{const{gifts:a,receiver:l}=r.payload.data;s.gifts=a,s.gift=l,s.giftLoading=!1,s.giftMessage="Credit adjustment successful."}).addCase(Wr.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(et.pending,s=>{s.giftLoading=!0}).addCase(et.fulfilled,(s,r)=>{s.gifts=r.payload.data,s.giftLoading=!1,s.giftMessage="gift status updated successfully."}).addCase(et.rejected,(s,r)=>{s.giftLoading=!1,s.giftError=r.payload}),t.addCase(ls.pending,s=>{s.amountLoding=!0,s.serverError=null}).addCase(ls.fulfilled,(s,r)=>{s.amountLoding=!1,s.senderAmount=r.payload.data[0],s.amountError=null}).addCase(ls.rejected,(s,r)=>{s.amountLoding=!1,s.amountError=r.error.message})}}),{resetgiftState:pu,resetData:fu}=ln.actions,jl=ln.reducer,kt=q("complaints/create",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("complaint",t);return r.status===201?a:s(N(a))}catch(r){return s(N(r))}}),rt=q("complaints/getAll",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("complaint");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),tt=q("complaints/updateStatus",async({id:t,status:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await je(`complaint/${t}/status`,{status:s});return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Ut=t=>{t.isComplaintLoading=!0,t.complaintError=null},Pt=(t,s)=>{t.isComplaintLoading=!1,t.complaintError=s.payload||"An error occurred"},bl={isComplaintLoading:!1,complaints:[],allComplaints:[],complaintMassages:null,complaintError:null,isComplaintStatusLoading:!1},cn=re({name:"complaint",initialState:bl,reducers:{clearErrors:t=>{t.complaintError=null},resetState:t=>{t.isComplaintLoading=!1,t.complaints={data:[],pagination:{totalComplaints:0,currentPage:1,totalPages:1,limit:10}},t.allComplaints=[],t.complaintMassages=null,t.complaintError=null},updatePagination:(t,s)=>{const{currentPage:r,totalPages:a,totalComplaints:l,limit:c}=s.payload;t.complaints.pagination={currentPage:r,totalPages:a,totalComplaints:l,limit:c}}},extraReducers:t=>{t.addCase(rt.pending,Ut),t.addCase(rt.fulfilled,(s,r)=>{s.isComplaintLoading=!1,s.complaints=r.payload}),t.addCase(rt.rejected,Pt),t.addCase(tt.pending,Ut),t.addCase(tt.fulfilled,(s,r)=>{const{message:a,allComplaints:l}=r.payload;s.isComplaintLoading=!1,s.allComplaints=l,s.complaintMassages=a,s.complaints=l}),t.addCase(tt.rejected,Pt),t.addCase(kt.pending,Ut),t.addCase(kt.fulfilled,(s,r)=>{s.isComplaintLoading=!1,s.complaintMassages=r.payload.message}),t.addCase(kt.rejected,Pt)}}),{clearErrors:gu,resetState:ju,updatePagination:bu}=cn.actions,Nl=cn.reducer,at=q("onlineplayer/getAllonlineplayers",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y("onlinePlayer");return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),yl=re({name:"onlineplayer",initialState:{onlineplayers:[],onlineplayer:null,onlineplayerLoading:!1,onlineplayerError:null,onlineplayerMessage:null},reducers:{},extraReducers:t=>{t.addCase(at.pending,s=>{s.onlineplayerLoading=!0,s.onlineplayerError=null,s.onlineplayerMessage=null}).addCase(at.fulfilled,(s,r)=>{s.onlineplayers=r.payload,s.onlineplayerLoading=!1,s.onlineplayerMessage="Online players fetched successfully.",s.onlineplayerError=null}).addCase(at.rejected,(s,r)=>{s.onlineplayerLoading=!1,s.onlineplayerError=r.payload})}}),vl=yl.reducer,dn=re({name:"times",initialState:{times:[],gamesError:null,gamesMessage:null,currentGame:null,gameDeleted:!1,loading:!1},reducers:{clearGamesError:t=>{t.gamesError=null},clearGamesMessage:t=>{t.gamesMessage=null},setCurrentGame:(t,s)=>{t.currentGame=s.payload},setGameDeleted:t=>{t.gameDeleted=!0},setLoading:(t,s)=>{t.loading=s.payload},resetData:()=>({times:[]})},extraReducers:t=>{t.addCase(Je.fulfilled,(s,r)=>{s.times=r.payload.data,s.loading=!1}).addCase(Je.pending,s=>{s.loading=!0}).addCase(Je.rejected,(s,r)=>{s.loading=!1,s.gamesError=r.error.message})}}),{clearGamesError:Nu,clearGamesMessage:yu,setCurrentGame:vu,setGameDeleted:Cu,setLoading:wu,resetData:Su}=dn.actions,Cl=dn.reducer,de=q("credit/loadcredit",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await Y(`credit/loadcredit?id=${t}`);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),Sa={isLoading:!0,credit:[],serverError:null},on=re({name:"credit",initialState:Sa,reducers:{resetState:t=>Sa},extraReducers:t=>{t.addCase(de.fulfilled,(s,r)=>{s.isLoading=!1,s.credit=r.payload.data,s.serverError=null}).addCase(de.pending,s=>{s.isLoading=!0,s.serverError=null}).addCase(de.rejected,(s,r)=>{s.isLoading=!1,s.serverError=r.error.message})}}),{setLoading:Au,setCreditData:Lu,resetState:Eu}=on.actions,wl=on.reducer,un=q("fetchTurnOverReport",async({role:t,id:s,startDate:r,endDate:a},{getState:l,rejectWithValue:c})=>{try{const i=l(),{token:n,authUser:d}=i.auth,o=d==null?void 0:d.role,p=d==null?void 0:d._id,{response:m,json:x}=await Y(`reports/turnoverreport?role=${t||o}&id=${s||p}&startDate=${r}&endDate=${a}`,n);return m.status===200?x:c(N(x))}catch(i){return c(N(i))}}),mn=q("findallusers",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth,i=c==null?void 0:c.role,n=c==null?void 0:c._id,{response:d,json:o}=await Y(`reports/findallusers?role=${i}&id=${n}`,l);return d.status===200?o:r(N(o))}catch(a){return r(N(a))}}),Gt=q("transactionreport",async({status:t,userId:s,date:r,type:a},{getState:l,rejectWithValue:c})=>{try{const i=l(),{token:n,authUser:d}=i.auth,o=d==null?void 0:d.role,p=d==null?void 0:d._id,{response:m,json:x}=await Y(`reports/transactionreport?status=${t}&id=${s}&date=${r}&currentid=${p}&type=${a}&role=${o}`,n);return m.status===200?x:c(N(x))}catch(i){return c(N(i))}}),hn=q("commissionpayout",async(t,{getState:s,rejectWithValue:r})=>{try{const a=s(),{token:l,authUser:c}=a.auth,i=c==null?void 0:c.role,n=c==null?void 0:c._id,{response:d,json:o}=await Y(`reports/commissionpayout?role=${i}&id=${n}`,l);return d.status===200?o:r(N(o))}catch(a){return r(N(a))}}),xn=q("fetchadmincommision",async({role:t,id:s,startDate:r,endDate:a},{getState:l,rejectWithValue:c})=>{try{const i=l(),{token:n,authUser:d}=i.auth,o=d==null?void 0:d.role,p=d==null?void 0:d._id,{response:m,json:x}=await Y(`reports/admincommissionpayout?role=${t||o}&id=${s||p}&startDate=${r}&endDate=${a}`,n);return m.status===200?x:c(N(x))}catch(i){return c(N(i))}}),pn=re({name:"reports",initialState:{turnoverdata:[],roles:"",allusers:[],transactionData:[],commissionData:[],admincommissiondata:[]},reducers:{resetAuthState:()=>(ke(),{turnoverdata:[],allusers:[],transactionData:[],commissionData:[],admincommissiondata:[]})},extraReducers:t=>{t.addCase(un.fulfilled,(s,r)=>{s.roles=r.payload.role,s.turnoverdata=r.payload.data}),t.addCase(mn.fulfilled,(s,r)=>{s.allusers=r.payload.data}),t.addCase(Gt.fulfilled,(s,r)=>{s.transactionData=r.payload.data}),t.addCase(hn.fulfilled,(s,r)=>{s.commissionData=r.payload.data}),t.addCase(xn.fulfilled,(s,r)=>{s.admincommissiondata=r.payload.data})}}),{resetAuthState:Du}=pn.actions,Sl=pn.reducer,Rt=q("live/loadGameData",async({adminId:t,gameId:s},{rejectWithValue:r})=>{try{const{response:a,json:l}=await Y(`live/loadgame?adminId=${t}&gameId=${s}`);return a.status===200?l:r(N(l))}catch(a){return r(N(a))}}),Aa=q("live/addBalance",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("live/addbalance",t);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),La=q("live/addResult",async(t,{rejectWithValue:s})=>{try{const{response:r,json:a}=await J("live/addresult",t);return r.status===200?a:s(N(a))}catch(r){return s(N(r))}}),Ea={isLoading:!0,gameData:[],serverError:null},fn=re({name:"live",initialState:Ea,reducers:{resetState:t=>Ea},extraReducers:t=>{t.addCase(Rt.fulfilled,(s,r)=>{s.isLoading=!1,s.gameData=r.payload.data,s.serverError=null}).addCase(Rt.pending,s=>{s.isLoading=!0,s.serverError=null}).addCase(Rt.rejected,(s,r)=>{s.isLoading=!1,s.serverError=r.error.message})}}),{setLoading:$u,resetState:qu}=fn.actions,Al=fn.reducer,Ll=Mn({app:Zn,theme:Xn,auth:Wn,supers:al,games:sl,reports:Sl,onlinePlayer:vl,superadmins:rl,admins:tl,superdistributor:nl,distributor:ll,retailer:il,user:cl,logs:pl,otc:fl,loan:gl,gift:jl,complaint:Nl,percentage:dl,times:Cl,credit:wl,live:Al}),El=(t,s)=>(s.type==="RESET_STORE"&&(t=void 0),Ll(t,s)),Dl={key:"auth",storage:En,whitelist:["auth","users"]},$l=Ln(Dl,El),gn=$n({reducer:$l,middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST","persist/PURGE"]}})}),zt=An(gn);function ql(){return e.jsx("footer",{className:" bg-black/30 backdrop-blur-sm text-gray-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oa,{className:"w-8 h-8 text-purple-400"}),e.jsx("span",{className:"ml-2 text-xl font-bold text-white",children:"GameZone"})]}),e.jsx("p",{className:"text-sm",children:"Your ultimate destination for online gaming entertainment. Play responsibly."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"hover:text-purple-400",children:e.jsx(In,{className:"w-5 h-5"})}),e.jsx("a",{href:"#",className:"hover:text-purple-400",children:e.jsx(Tn,{className:"w-5 h-5"})}),e.jsx("a",{href:"#",className:"hover:text-purple-400",children:e.jsx(kn,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#games",className:"hover:text-purple-400",children:"Games"})}),e.jsx("li",{children:e.jsx("a",{href:"#winners",className:"hover:text-purple-400",children:"Winners"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-purple-400",children:"How to Play"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-purple-400",children:"Results"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-purple-400",children:"FAQ"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-purple-400",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-purple-400",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-purple-400",children:"Responsible Gaming"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Contact Us"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Un,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:"mailto:support@gamezone.com",className:"hover:text-purple-400",children:"support@gamezone.com"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Pn,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:"tel:+1234567890",className:"hover:text-purple-400",children:"+1 (234) 567-890"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," GameZone. All rights reserved."]})})]})})}function Ml(){const t=ae(),s=()=>{t("/auth/login")};return e.jsx("nav",{className:"bg-black/30 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oa,{className:"w-8 h-8 text-purple-400"}),e.jsx("span",{className:"ml-2 text-xl font-bold text-white",children:"GameZone"})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("a",{href:"#games",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Games"}),e.jsx("a",{href:"#winners",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Winners"}),e.jsx("a",{href:"#results",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Results"})]})}),e.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-purple-500 rounded-md text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Login"]})]})})})}function Il({game:t}){return e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg overflow-hidden hover:transform hover:scale-105 transition-all duration-300",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:t.name}),e.jsx("p",{className:"mt-2 text-gray-300 text-sm",children:t.description}),e.jsx("button",{className:"mt-4 w-full inline-flex items-center justify-center px-4 py-2 border border-purple-500 rounded-md text-sm font-medium text-white bg-purple-600 hover:bg-purple-700",children:"Play Now"})]})]})}function Tl(){return e.jsx("div",{className:"relative py-16 md:py-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl tracking-tight font-extrabold text-white sm:text-5xl md:text-6xl",children:["Welcome to ",e.jsx("span",{className:"text-purple-400",children:"GameZone"})]}),e.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-300 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Experience the thrill of gaming with our wide selection of exciting games. Join thousands of players and win big prizes!"}),e.jsx("div",{className:"mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8",children:e.jsx("div",{className:"rounded-md shadow",children:e.jsx("a",{href:"#games",className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 md:py-4 md:text-lg md:px-10",children:"Play Now"})})})]})})})}const kl=[{id:1,username:"player123",game:"Lucky 12 Coupon",prize:"$1,000",date:"2 hours ago"},{id:2,username:"winner456",game:"Triple Chance",prize:"$500",date:"3 hours ago"},{id:3,username:"gamer789",game:"Roulette",prize:"$2,000",date:"5 hours ago"}];function Ul(){return e.jsx("div",{className:"bg-black/30 backdrop-blur-sm py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center justify-center",children:[e.jsx(On,{className:"w-8 h-8 mr-2 text-yellow-400"}),"Recent Winners"]}),e.jsx("div",{className:"mt-8 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:kl.map(t=>e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-6",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:t.username}),e.jsxs("div",{className:"text-sm text-gray-300",children:["Won ",t.prize," in ",t.game]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:t.date})]},t.id))})]})})})}const Pl=[{id:1,name:"Lucky 12 Coupon",description:"Try your luck with our popular Lucky 12 game featuring exciting number combinations.",image:"https://images.unsplash.com/photo-1605870445919-838d190e8e1b?w=800&auto=format&fit=crop&q=60"},{id:2,name:"Lucky 16",description:"Choose from 16 numbers for a chance to win big prizes.",image:"https://images.unsplash.com/photo-1518133910546-b6c2fb7d79e3?w=800&auto=format&fit=crop&q=60"},{id:3,name:"Triple Chance",description:"Triple your chances of winning with this exciting game format.",image:"https://images.unsplash.com/photo-1596838132731-3301c3fd4317?w=800&auto=format&fit=crop&q=60"},{id:4,name:"Roulette",description:"Classic casino roulette with multiple betting options.",image:"https://images.unsplash.com/photo-1606167668584-78701c57f13d?w=800&auto=format&fit=crop&q=60"},{id:5,name:"DusKaDum",description:"Experience the thrill of this unique game with amazing rewards.",image:"https://images.unsplash.com/photo-1533416784636-1b0aba1e6f6f?w=800&auto=format&fit=crop&q=60"},{id:6,name:"Lucky 10 Coupon",description:"Pick from 10 numbers and win instant prizes.",image:"https://images.unsplash.com/photo-1518893063132-36e46dbe2428?w=800&auto=format&fit=crop&q=60"}];function jn(){return e.jsxs(e.Fragment,{children:[e.jsx(Tl,{}),e.jsxs("div",{id:"games",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Our Games"}),e.jsx("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:Pl.map(t=>e.jsx(Il,{game:t},t.id))})]}),e.jsx(Ul,{})]})}function Rl(){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-black",children:[e.jsx(Ml,{}),e.jsx("main",{children:e.jsx(jn,{})}),e.jsx(ql,{})]})}const Ol=()=>e.jsx("main",{children:e.jsx(qe,{})});function cs(){return e.jsxs("footer",{className:"footer d-flex flex-column flex-md-row align-items-center justify-content-between",children:[e.jsxs("p",{className:"text-muted text-center text-md-left",children:["Copyright © 2025 ",e.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"Welcome Game King"}),". All rights reserved."]}),e.jsxs("p",{className:"text-muted text-center text-md-left mb-0 d-none d-md-block",children:["Handcrafted With ",e.jsx("span",{className:"mb-1 text-primary ml-1 icon-small","data-feather":"heart"})]})]})}function ds({menuItems:t}){const[s,r]=u.useState(null);u.useEffect(()=>{Ga.replace();const c=new Fa(".btn-clipboard");c.on("success",m=>{const x=m.trigger;x.setAttribute("data-bs-original-title","Copied");const g=new Ba(x);g.show(),setTimeout(()=>{g.hide(),x.setAttribute("data-bs-original-title","Copy to clipboard")},1e3),m.clearSelection()});const i=document.querySelector(".sidebar-body");i&&new Bt(i);const n=document.body,d=document.querySelector(".sidebar-toggler"),o=()=>{window.matchMedia("(min-width: 900px)").matches?n.classList.toggle("sidebar-folded"):n.classList.toggle("sidebar-open")};d.addEventListener("click",o);const p=m=>{const x=document.querySelector(".sidebar");x&&!x.contains(m.target)&&n.classList.contains("sidebar-open")&&n.classList.remove("sidebar-open")};return document.addEventListener("mousedown",p),()=>{d.removeEventListener("click",o),document.removeEventListener("mousedown",p),c.destroy()}},[]);const a=()=>{const c=document.body;c.classList.contains("sidebar-open")&&c.classList.remove("sidebar-open")},l=c=>{r(s===c?null:c)};return e.jsxs("nav",{className:"sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx(Le,{className:"sidebar-brand",children:e.jsx("span",{children:"Game King"})}),e.jsxs("div",{className:"sidebar-toggler not-active",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]}),e.jsx("div",{className:"sidebar-body sidebar-scrollbar",children:e.jsx("ul",{className:"nav",children:t.map(({category:c,links:i},n)=>e.jsxs("div",{children:[c&&e.jsx("li",{className:"nav-item nav-category",children:c}),i.map((d,o)=>e.jsxs("li",{className:"nav-item",children:[d.submenu?e.jsxs(Le,{to:d.to,className:"nav-link",onClick:p=>{p.preventDefault(),l(`${n}-${o}`)},children:[e.jsx("i",{className:"link-icon","data-feather":d.icon}),e.jsx("span",{className:"link-title",children:d.label}),e.jsx("i",{className:"link-arrow","data-feather":"chevron-down"})]}):d.to?e.jsxs(Le,{to:d.to,className:({isActive:p})=>`nav-link ${p?"active":""}`,style:({isActive:p})=>p?{color:"blue"}:{},onClick:a,children:[e.jsx("i",{className:"link-icon","data-feather":d.icon}),e.jsx("span",{className:"link-title",children:d.label})]}):e.jsxs("a",{href:d.href,className:"nav-link",children:[e.jsx("i",{className:"link-icon","data-feather":d.icon}),e.jsx("span",{className:"link-title",children:d.label})]}),d.submenu&&e.jsx("div",{className:`submenu ${s===`${n}-${o}`?"show":""}`,style:{display:s===`${n}-${o}`?"block":"none"},children:e.jsx("ul",{className:"nav sub-menu",children:d.submenu.map((p,m)=>e.jsx("li",{className:"nav-item",children:e.jsx(Le,{to:p.href,className:"nav-link",onClick:a,children:p.label})},`submenu-${n}-${o}-${m}`))})})]},`link-${n}-${o}`))]},`section-${n}`))})})]})}const Da="/assets/favicon-DgsTwnt2.ico",_l=()=>{const t=T(),s=ae();return async()=>{try{s("/auth/login"),await t(fs()).unwrap(),sessionStorage.removeItem("authToken"),sessionStorage.removeItem("tokenExpiryTime"),sessionStorage.removeItem("role"),zt.purge(),await zt.flush()}catch(a){console.error("Error during logout:",a)}}};function os({user:t,profileLink:s}){const[r,a]=u.useState(null),[l,c]=u.useState(!1),i=_l(),[n,d]=u.useState(!1);u.useEffect(()=>{Ga.replace()},[]);const o=()=>{c(!l)};u.useEffect(()=>{const x=new Fa(".btn-clipboard");return x.on("success",g=>{const j=g.trigger;j.setAttribute("data-bs-original-title","Copied");const y=new Ba(j);y.show(),setTimeout(()=>{y.hide(),j.setAttribute("data-bs-original-title","Copy to clipboard")},1e3),g.clearSelection()}),()=>{x.destroy()}},[]);const p=x=>{x.preventDefault(),d(g=>{const j=document.body;m(),j.classList.add("sidebar-dark","loaded","sidebar-open")})};u.useEffect(()=>{const x=document.querySelector(".sidebar-body");return x&&new Bt(x),()=>{const g=document.querySelector(".sidebar-body");g&&g.PS&&g.PS.destroy()}},[]);const m=()=>{const x=document.querySelector(".sidebar-body");return x&&new Bt(x),()=>{const g=document.querySelector(".sidebar-body");g&&g.PS&&g.PS.destroy()}};return e.jsxs("nav",{className:"navbar dark absolute",style:{position:"absolute"},children:[e.jsx(Le,{to:"#",className:"sidebar-toggler",onClick:x=>p(x),children:e.jsx("i",{"data-feather":"menu"})}),e.jsx("div",{className:"navbar-content",children:e.jsx("ul",{className:"navbar-nav",children:e.jsxs("li",{className:"nav-item dropdown nav-profile",children:[e.jsx(Le,{to:"#",className:"nav-link dropdown-toggle",onClick:x=>{x.preventDefault(),o()},id:"profileDropdown",role:"button","aria-expanded":l?"true":"false",children:e.jsx("img",{src:Da,alt:"profile"})}),l&&e.jsxs("div",{className:`dropdown-menu ${l?"show":""}`,"aria-labelledby":"profileDropdown",children:[e.jsxs("div",{className:"dropdown-header d-flex flex-column align-items-center",children:[e.jsx("div",{className:"figure mb-3",children:e.jsx("img",{src:Da,alt:""})}),e.jsxs("div",{className:"info text-center",children:[e.jsx("p",{className:"name font-weight-bold mb-0",children:t.username}),e.jsx("p",{className:"email text-muted mb-3",children:t.walletBalance})]})]}),e.jsx("div",{className:"dropdown-body",children:e.jsxs("ul",{className:"profile-nav p-0 pt-3",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Le,{to:s,className:"nav-link",children:[e.jsx("i",{"data-feather":"edit"}),e.jsx("span",{children:"Edit Profile"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Le,{to:"#",className:"nav-link",onClick:x=>{x.preventDefault(),i(t._id)},children:[e.jsx("i",{"data-feather":"log-out"}),e.jsx("span",{children:"Log Out"})]})})]})})]})]})})})]})}function us(){return e.jsx("span",{className:"loader relative w-52 h-36 bg-gray-500 rounded-md perspective-[1000px]",children:e.jsx("span",{className:"loader-inner"})})}const ct=()=>{const t=T(),{adminGameList:s,historyUsers:r,gamesList:a,percentageLoading:l,percentageMessage:c,percentageError:i}=D(m=>m.percentage),{authUser:n}=D(m=>m.auth);n==null||n.role;const d=n._id,o=async m=>{await t(kr(m)).unwrap()};return u.useEffect(()=>{o(d)},[n]),{id:d,percentagelist:s,historyUsers:r,percentageLoading:l,percentageMessage:c,percentageError:i,fetchGamepercentage:o}};function Bl(){const{isLoadingSession:t,authUser:s}=D(c=>c.auth),{percentagelist:r}=ct(),a=()=>r&&r.map((c,i)=>({href:`/${s.role}/game/${c.gameId}/${c.id}/${c.username}`,label:c.gameName+`
`+c.username})),l=[{category:"Main",links:[{to:"/superadmin/dashboard",icon:"box",label:"Dashboard"}]},{category:"Management",links:[{to:"/superadmin/timemaster",icon:"users",label:"Time Master"},{to:"/superadmin/gamemaster",icon:"users",label:"Games Master"},{to:"/superadmin/admin",icon:"users",label:"Admin"},{to:"/superadmin/superareamanager",icon:"users",label:"Super Area manager"},{to:"/superadmin/areamanager",icon:"users",label:"Area Manager"},{to:"/superadmin/master",icon:"users",label:"Master"},{to:"/superadmin/player",icon:"users",label:"Player"},{to:"/superadmin/gift",icon:"users",label:"Gift"},{to:"/superadmin/loan",icon:"users",label:"Loan"},{to:"/superadmin/otc",icon:"users",label:"OTC"},{to:"/superadmin/onlineplayers",icon:"log-in",label:"Online Players"}]},{category:"Game",links:[{to:"/superadmin/gamehistory",icon:"inbox",label:"Game History"},...s.role==="superadmin"||s.role==="admin"?[{to:"/superadmin/winpercentage",icon:"inbox",label:"Win Percentage"}]:[]]},{category:"Reports",links:[{to:"/superadmin/turnoverreport",icon:"inbox",label:"TurnOver Report"},{to:"/superadmin/transactionreport",icon:"briefcase",label:"Transaction Report"},{to:"/superadmin/commissionpayoutReport",icon:"briefcase",label:"Commission Payout Report"},{to:"/superadmin/admincommissionreport",icon:"briefcase",label:"Admin Commission Report"}]},{category:"Live Reports",links:[{to:"#",icon:"download",label:"Live Result",submenu:a()}]},{category:"Logs Activity",links:[{to:"/superadmin/logactivities",icon:"inbox",label:"Logs"}]},{category:"Contact us",links:[{to:"/superadmin/contactus",icon:"inbox",label:"Contact Us"}]}];return e.jsxs("div",{className:"main-wrapper h-screen",id:"app",children:[e.jsx(ds,{menuItems:l}),e.jsxs("div",{className:"page-wrapper",children:[e.jsx(os,{user:s,profileLink:"/superadmin/profile",company:""}),e.jsx("div",{className:"page-content overflow-auto",children:t?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(us,{})}):e.jsx(qe,{})}),e.jsx(cs,{})]})]})}function Fl(){const{isLoadingSession:t,authUser:s}=D(c=>c.auth),{percentagelist:r}=ct(),l=[{category:"Main",links:[{to:"/admin/dashboard",icon:"box",label:"Dashboard"}]},{category:"Management",links:[{to:"/admin/superareamanager",icon:"users",label:"Super Area Manager"},{to:"/admin/areamanager",icon:"users",label:"Area Manager"},{to:"/admin/master",icon:"users",label:"Master"},{to:"/admin/player",icon:"users",label:"Player"},{to:"/admin/gift",icon:"users",label:"Gift"},{to:"/admin/loan",icon:"users",label:"Loan"},{to:"/admin/otc",icon:"users",label:"OTC"},{to:"/admin/onlineplayers",icon:"log-in",label:"Online Players"}]},{category:"Game",links:[{to:"/admin/gamehistory",icon:"inbox",label:"Game History"},{to:"/admin/winpercentage",icon:"inbox",label:"Win Percentage"}]},{category:"Reports",links:[{to:"/admin/turnoverreport",icon:"inbox",label:"TurnOver Report"},{to:"/admin/transactionreport",icon:"briefcase",label:"Transaction Report"},{to:"/admin/commissionpayoutReport",icon:"briefcase",label:"Commission Payout Report"},{to:"/admin/admincommissionreport",icon:"briefcase",label:"Admin Commission Report"}]},{category:"Live Reports",links:[{to:"#",icon:"download",label:"Live Result",submenu:r&&r.map((c,i)=>({href:`/${s.role}/game/${c.gameId}/${c.adminId}/${c.username}`,label:c.gameName+`
`+c.username}))}]},{category:"Logs Activity",links:[{to:"/admin/logactivities",icon:"inbox",label:"Logs"}]},{category:"Contact us",links:[{to:"/admin/contactus",icon:"inbox",label:"Contact Us"}]}];return e.jsxs("div",{className:"main-wrapper h-screen",id:"app",children:[e.jsx(ds,{menuItems:l}),e.jsxs("div",{className:"page-wrapper",children:[e.jsx(os,{user:s,profileLink:"/admin/profile"}),e.jsx("div",{className:"page-content overflow-auto",children:t?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(us,{})}):e.jsx(qe,{})}),e.jsx(cs,{})]})]})}function Gl(){const{isLoadingSession:t,authUser:s}=D(a=>a.auth),r=[{category:"Main",links:[{to:"/superareamanager/dashboard",icon:"box",label:"Dashboard"}]},{category:"Management",links:[{to:"/superareamanager/areamanager",icon:"users",label:"Area Manager"},{to:"/superareamanager/master",icon:"users",label:"Master"},{to:"/superareamanager/player",icon:"users",label:"Player"},{to:"/superareamanager/onlineplayers",icon:"log-in",label:"Online Players"}]},{category:"Game",links:[{to:"/superareamanager/gamehistory",icon:"inbox",label:"Game History"}]},{category:"Reports",links:[{to:"/superareamanager/turnoverreport",icon:"inbox",label:"TurnOver Report"},{to:"/superareamanager/transactionreport",icon:"briefcase",label:"Transaction Report"},{to:"/superareamanager/commissionpayoutReport",icon:"briefcase",label:"Commission Payout Report"},{to:"/superareamanager/admincommissionreport",icon:"briefcase",label:"Admin Commission Report"}]},{category:"Live Reports",links:[{to:"#",icon:"download",label:"Live Result",submenu:[{href:"/superareamanager/liveResult/LiveResult12one",label:"Lucky 12 one"},{href:"/superareamanager/liveResult/LiveResult12two",label:"Lucky 12 two"},{href:"/superareamanager/liveResult/LiveResult12three",label:"Lucky 12 coupon"},{href:"/superareamanager/liveResult/LiveResult16",label:"Lucky 16"},{href:"/superareamanager/liveResult/LiveResultTripleChanse",label:"Triple Chance"},{href:"/superareamanager/liveResult/LiveResultRoulette",label:"GK Roulette-36"}]}]},{category:"Logs Activity",links:[{to:"/superareamanager/logactivities",icon:"inbox",label:"Logs"}]}];return e.jsxs("div",{className:"main-wrapper h-screen",id:"app",children:[e.jsx(ds,{menuItems:r}),e.jsxs("div",{className:"page-wrapper",children:[e.jsx(os,{user:s,profileLink:"/superareamanager/profile"}),e.jsx("div",{className:"page-content overflow-auto",children:t?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(us,{})}):e.jsx(qe,{})}),e.jsx(cs,{})]})]})}function zl(){const{isLoadingSession:t,authUser:s}=D(a=>a.auth),r=[{category:"Main",links:[{to:"/areamanager/dashboard",icon:"box",label:"Dashboard"}]},{category:"Management",links:[{to:"/areamanager/master",icon:"users",label:"Master"},{to:"/areamanager/player",icon:"users",label:"Player"},{to:"/areamanager/onlineplayers",icon:"log-in",label:"Online Players"}]},{category:"Game",links:[{to:"/areamanager/gamehistory",icon:"inbox",label:"Game History"}]},{category:"Reports",links:[{to:"/areamanager/turnoverreport",icon:"inbox",label:"TurnOver Report"},{to:"/areamanager/transactionreport",icon:"briefcase",label:"Transaction Report"},{to:"/areamanager/commissionpayoutReport",icon:"briefcase",label:"Commission Payout Report"},{to:"/areamanager/admincommissionreport",icon:"briefcase",label:"Admin Commission Report"}]},{category:"Live Reports",links:[{to:"#",icon:"download",label:"Live Result",submenu:[{href:"/areamanager/liveResult/LiveResult12one",label:"Lucky 12 one"},{href:"/areamanager/liveResult/LiveResult12two",label:"Lucky 12 two"},{href:"/areamanager/liveResult/LiveResult12three",label:"Lucky 12 coupon"},{href:"/areamanager/liveResult/LiveResult16",label:"Lucky 16"},{href:"/areamanager/liveResult/LiveResultTripleChanse",label:"Triple Chance"},{href:"/areamanager/liveResult/LiveResultRoulette",label:"GK Roulette-36"}]}]},{category:"Logs Activity",links:[{to:"/areamanager/logactivities",icon:"inbox",label:"Logs"}]}];return e.jsxs("div",{className:"main-wrapper h-screen",id:"app",children:[e.jsx(ds,{menuItems:r}),e.jsxs("div",{className:"page-wrapper",children:[e.jsx(os,{user:s,profileLink:"/areamanager/profile"}),e.jsx("div",{className:"page-content overflow-auto",children:t?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(us,{})}):e.jsx(qe,{})}),e.jsx(cs,{})]})]})}function Hl(){const{isLoadingSession:t,authUser:s}=D(a=>a.auth),r=[{category:"Main",links:[{to:"/master/dashboard",icon:"box",label:"Dashboard"}]},{category:"Management",links:[{to:"/master/player",icon:"users",label:"Player"},{to:"/master/onlineplayers",icon:"log-in",label:"Online Players"}]},{category:"Game",links:[{to:"/master/gamehistory",icon:"inbox",label:"Game History"}]},{category:"Reports",links:[{to:"/master/turnoverreport",icon:"inbox",label:"TurnOver Report"},{to:"/master/transactionreport",icon:"briefcase",label:"Transaction Report"},{to:"/master/commissionpayoutReport",icon:"briefcase",label:"Commission Payout Report"},{to:"/master/admincommissionreport",icon:"briefcase",label:"Admin Commission Report"}]},{category:"Live Reports",links:[{to:"#",icon:"download",label:"Live Result",submenu:[{href:"/master/liveResult/LiveResult12one",label:"Lucky 12 one"},{href:"/master/liveResult/LiveResult12two",label:"Lucky 12 two"},{href:"/master/liveResult/LiveResult12three",label:"Lucky 12 coupon"},{href:"/master/liveResult/LiveResult16",label:"Lucky 16"},{href:"/master/liveResult/LiveResultTripleChanse",label:"Triple Chance"},{href:"/master/liveResult/LiveResultRoulette",label:"GK Roulette-36"}]}]},{category:"Logs Activity",links:[{to:"/master/logactivities",icon:"inbox",label:"Logs"}]}];return e.jsxs("div",{className:"main-wrapper h-screen",id:"app",children:[e.jsx(ds,{menuItems:r}),e.jsxs("div",{className:"page-wrapper",children:[e.jsx(os,{user:s,profileLink:"/master/profile"}),e.jsx("div",{className:"page-content overflow-auto",children:t?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(us,{})}):e.jsx(qe,{})}),e.jsx(cs,{})]})]})}function Yl(){return e.jsx(Fn,{position:"top-center",autoClose:1500,hideProgressBar:!0,draggable:!0,pauseOnHover:!1,className:"mt-12",closeOnClick:!0,pauseOnFocusLoss:!1,toastClassName:()=>"relative flex p-4 mb-4 rounded-lg shadow-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",bodyClassName:()=>"flex items-center"})}function se({title:t,value:s,icon:r,link:a}){return e.jsx("div",{className:"col-lg-3 col-md-3 col-sm-3 grid-margin stretch-card",children:e.jsx("div",{className:"card card-outline-primary",children:e.jsx("a",{href:a,children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("h6",{className:"card-title mb-1",children:t}),e.jsx("h3",{className:"mb-1 font-semibold text-2xl",children:s})]}),e.jsx("div",{className:"col-md-2",children:e.jsx("h1",{className:"text-right",children:r})})]})})})})})}function Kl(){var l;const t=T();u.useEffect(()=>{t(Ee())},[t]);const{usercount:s,isLoading:r}=D(c=>c.supers),{authUser:a}=D(c=>c.auth);return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center flex-wrap grid-margin",children:e.jsx("div",{children:e.jsx("h4",{className:"mb-3 mb-md-0",children:"Welcome to Dashboard"})})}),e.jsxs("div",{className:"row",children:[e.jsx(se,{title:"Players",value:r?"Loading...":((l=s==null?void 0:s.count)==null?void 0:l.length)??0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"player"}),a.role!==void 0&&a.role==="superadmin"?e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Admins",value:r?"Loading...":(s==null?void 0:s.countAdmins)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"admin"}),e.jsx(se,{title:"Super Area manager",value:r?"Loading...":(s==null?void 0:s.countSuperDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"superareamanager"}),e.jsx(se,{title:"Area Manager",value:r?"Loading...":(s==null?void 0:s.countDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"areamanager"}),e.jsx(se,{title:"Master",value:r?"Loading...":(s==null?void 0:s.countRetailers)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"master"})]}):null]})]})}function Xl(){var a;const t=T();u.useEffect(()=>{t(Ee())},[t]);const{usercount:s,isLoading:r}=D(l=>l.supers);return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center flex-wrap grid-margin",children:e.jsx("div",{children:e.jsx("h4",{className:"mb-3 mb-md-0",children:"Welcome to Dashboard"})})}),e.jsxs("div",{className:"row",children:[e.jsx(se,{title:"Player",value:r?"Loading...":((a=s==null?void 0:s.count)==null?void 0:a.length)??0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"player"}),e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Super Area manager",value:r?"Loading...":(s==null?void 0:s.countSuperDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"superareamanager"}),e.jsx(se,{title:"Area Manager",value:r?"Loading...":(s==null?void 0:s.countDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"areamanager"}),e.jsx(se,{title:"Master",value:r?"Loading...":(s==null?void 0:s.countRetailers)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"master"})]})]})]})}function Vl(){var l;const t=T();u.useEffect(()=>{t(Ee())},[t]);const{usercount:s,isLoading:r}=D(c=>c.supers),{authUser:a}=D(c=>c.auth);return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center flex-wrap grid-margin",children:e.jsx("div",{children:e.jsx("h4",{className:"mb-3 mb-md-0",children:"Welcome to Dashboard"})})}),e.jsxs("div",{className:"row",children:[e.jsx(se,{title:"Players",value:r?"Loading...":((l=s==null?void 0:s.count)==null?void 0:l.length)??0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"player"}),a.role!==void 0&&a.role==="superadmin"?e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Admins",value:r?"Loading...":(s==null?void 0:s.countAdmins)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"admin"}),e.jsx(se,{title:"Super Area manager",value:r?"Loading...":(s==null?void 0:s.countSuperDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"superareamanager"}),e.jsx(se,{title:"Area Manager",value:r?"Loading...":(s==null?void 0:s.countDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"areamanager"}),e.jsx(se,{title:"Master",value:r?"Loading...":(s==null?void 0:s.countRetailers)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"master"})]}):null]})]})}function Zl(){var l;const t=T();u.useEffect(()=>{t(Ee())},[t]);const{usercount:s,isLoading:r}=D(c=>c.supers),{authUser:a}=D(c=>c.auth);return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center flex-wrap grid-margin",children:e.jsx("div",{children:e.jsx("h4",{className:"mb-3 mb-md-0",children:"Welcome to Dashboard"})})}),e.jsxs("div",{className:"row",children:[e.jsx(se,{title:"Players",value:r?"Loading...":((l=s==null?void 0:s.count)==null?void 0:l.length)??0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"player"}),a.role!==void 0&&a.role==="superadmin"?e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Admins",value:r?"Loading...":(s==null?void 0:s.countAdmins)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"admin"}),e.jsx(se,{title:"Super Area manager",value:r?"Loading...":(s==null?void 0:s.countSuperDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"superareamanager"}),e.jsx(se,{title:"Area Manager",value:r?"Loading...":(s==null?void 0:s.countDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"areamanager"}),e.jsx(se,{title:"Master",value:r?"Loading...":(s==null?void 0:s.countRetailers)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"master"})]}):null]})]})}function Jl(){var l;const t=T();u.useEffect(()=>{t(Ee())},[t]);const{usercount:s,isLoading:r}=D(c=>c.supers),{authUser:a}=D(c=>c.auth);return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center flex-wrap grid-margin",children:e.jsx("div",{children:e.jsx("h4",{className:"mb-3 mb-md-0",children:"Welcome to Dashboard"})})}),e.jsxs("div",{className:"row",children:[e.jsx(se,{title:"Players",value:r?"Loading...":((l=s==null?void 0:s.count)==null?void 0:l.length)??0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"player"}),a.role!==void 0&&a.role==="superadmin"?e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Admins",value:r?"Loading...":(s==null?void 0:s.countAdmins)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"admin"}),e.jsx(se,{title:"Super Area manager",value:r?"Loading...":(s==null?void 0:s.countSuperDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"superareamanager"}),e.jsx(se,{title:"Area Manager",value:r?"Loading...":(s==null?void 0:s.countDistributors)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"areamanager"}),e.jsx(se,{title:"Master",value:r?"Loading...":(s==null?void 0:s.countRetailers)||0,icon:e.jsx(ee,{className:"h-12 w-12"}),link:"master"})]}):null]})]})}const Ht=()=>{const t=T(),{games:s,gamesLoading:r,gamesError:a,gamesMessage:l}=D(d=>d.games);u.useEffect(()=>{let d;return(a||l)&&(d=setTimeout(()=>{a&&t(Qe()),l&&t(lt())},5e3)),()=>{d&&clearTimeout(d)}},[a,l,t]);const c=u.useCallback(async()=>{try{return await t(gs()).unwrap(),!0}catch(d){return console.error("Error fetching games:",(d==null?void 0:d.message)||d),t(Qe()),!1}},[t]),i=u.useCallback(()=>{t(Qe())},[t]),n=u.useCallback(()=>{t(lt())},[t]);return{games:s,gamesLoading:r,gamesError:a,gamesMessage:l,fetchAllGames:c,clearError:i,clearMessage:n}};function bn(){const t=T(),{superadmins:s,superadminLoading:r,superadminMessage:a,superadminError:l}=D(i=>i.superadmins),c=async()=>{await t(We()).unwrap()};return u.useEffect(()=>{t(We())},[]),{superadmins:s,superadminLoading:r,superadminMessage:a,superadminError:l,fetchAllSuperAdmins:c}}const Ql=()=>{const t=T(),s=ae(),{superadmins:r}=bn(),{games:a,fetchAllGames:l}=Ht(),{adminError:c}=D(_=>_.admins),[i,n]=u.useState(null),[d,o]=u.useState(!1),[p,m]=u.useState(null),{register:x,handleSubmit:g,setValue:j,reset:y,control:v,formState:{errors:C}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=_=>{f(_),w(""),I(""),j("country",_),j("state",""),j("city","")},P=_=>{w(_),I(""),j("state",_),j("city","")},z=_=>{I(_),j("city",_)};u.useEffect(()=>{l()},[]);const H=async _=>{var S,E;o(!0),n(null),m(null);try{const L=Array.isArray(_.games)?_.games:_.games?[_.games]:[];await t(vs({..._,games:L})).unwrap(),n("User created successfully!"),setTimeout(()=>s(-1),1e3),y()}catch(L){m(((E=(S=L==null?void 0:L.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to create admin.")}finally{o(!1)}};return u.useEffect(()=>{if(i||p){const _=setTimeout(()=>{n(null),m(null)},2e3);return()=>clearTimeout(_)}},[i,p]),{register:x,superadmins:r,handleSubmit:g,onSubmit:H,control:v,setValue:j,reset:y,games:a,showCreateMessage:i,isCreateLoading:d,showCreateError:p,errors:C,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function Wl(){const{register:t,control:s,superadmins:r,handleSubmit:a,onSubmit:l,games:c,showCreateMessage:i,isCreateLoading:n,showCreateError:d,errors:o}=Ql(),p=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Admin"}),e.jsx("form",{className:"forms-sample",onSubmit:a(l),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("firstName",{required:"First Name is required"}),autoComplete:"off"}),o.firstName&&e.jsx("p",{className:"text-danger",children:o.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("lastName",{required:"Last Name is required"}),autoComplete:"off"}),o.lastName&&e.jsx("p",{className:"text-danger",children:o.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...t("email",{required:"Email is required"}),autoComplete:"off"}),o.email&&e.jsx("p",{className:"text-danger",children:o.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...t("commissionAmount",{required:!0})}),o.commissionAmount&&e.jsx("p",{className:"text-danger",children:o.commissionAmount.message})]})}),e.jsx("input",{type:"hidden",...t("role"),value:"admin"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...t("password",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...t("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(r==null?void 0:r.length)>0?r.map(m=>e.jsx("option",{value:m._id,children:m.username},m._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),o.refId&&e.jsx("p",{className:"text-danger",children:o.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select Games:"}),e.jsx("div",{className:"d-flex flex-wrap",children:e.jsx(Gn,{name:"games",control:s,render:({field:m})=>e.jsx(e.Fragment,{children:c.map(x=>{var g;return e.jsxs("label",{className:"mr-3",children:[e.jsx("input",{type:"checkbox",value:x._id,checked:(g=m.value)==null?void 0:g.includes(x._id),onChange:j=>{const y=j.target.checked?[...m.value||[],x._id]:m.value.filter(v=>v!==x._id);m.onChange(y)}}),x.gameName]},x._id)})})})})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:n,children:n?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>p(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[i&&e.jsx("p",{className:"text-success",children:i}),d&&e.jsx("p",{className:"text-danger",children:d})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Yt=t=>{const s=T(),{admin:r,adminLoading:a,adminMessage:l,adminError:c}=D(n=>n.admins),i=async n=>{await s(Cs(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{admin:r,adminLoading:a,adminMessage:l,adminError:c,fetchAdminById:i}},ei=t=>{const s=T(),{admin:r}=Yt(t),{superadmins:a}=bn(),{games:l,fetchAllGames:c}=Ht(),{adminError:i}=D(L=>L.admins),[n,d]=u.useState(null),[o,p]=u.useState(!1),[m,x]=u.useState(null),{register:g,watch:j,handleSubmit:y,reset:v,formState:{errors:C},setValue:h,getValues:f}=Z(),[b,w]=u.useState(""),[A,I]=u.useState(""),[M,O]=u.useState(""),G=u.useMemo(()=>ne.getAllCountries(),[]),R=u.useMemo(()=>b?le.getStatesOfCountry(b):[],[b]),P=u.useMemo(()=>b&&A?ie.getCitiesOfState(b,A):[],[b,A]),z=L=>{w(L),I(""),O(""),h("country",L),h("state",""),h("city","")},H=L=>{I(L),O(""),h("state",L),h("city","")},_=L=>{O(L),h("city",L)};u.useEffect(()=>{c()},[]),u.useEffect(()=>{var L,$;if(r){const U=K=>K?new Date(K).toISOString().split("T")[0]:"";v({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:U(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((L=r.refId)==null?void 0:L._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",commission:r.commission??0,note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false",games:(($=r.games)==null?void 0:$.map(K=>K._id))||[]}),w(r.country||""),I(r.state||""),O(r.city||"")}},[r,v]);const S=()=>{const L=f(),$={};return Object.keys(L).forEach(U=>{var Ne;let K=L[U];if(U==="dateOfBirth"){const ve=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";(K?new Date(K).toISOString().split("T")[0]:"")!==ve&&($[U]=K);return}if(U==="userStatus"){const ve=K==="true";ve!==r.userStatus&&($[U]=ve);return}if(U==="password")K!==void 0&&K!==""&&($[U]=K);else if(U==="games"){const ve=((Ne=r==null?void 0:r.games)==null?void 0:Ne.map(_e=>_e._id))||[];JSON.stringify(K)!==JSON.stringify(ve)&&($[U]=K)}else K!==void 0&&K!==r[U]&&($[U]=K)}),$},E=async()=>{const L=S();if(Object.keys(L).length!==0){p(!0);try{await s(ws({adminId:t,updatedFields:L})).unwrap(),d("Admin updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch($){const U=i||$.message||"Server error";x(U)}finally{p(!1)}}};return u.useEffect(()=>{if(n||m){const L=setTimeout(()=>{d(null),x(null)},2e3);return()=>clearTimeout(L)}},[n,m]),{register:g,handleSubmit:y,onSubmit:E,isUpdateLoading:o,watch:j,setValue:h,games:l,superadmins:a,showUpdateMessage:n,showUpdateError:m,errors:C,selectedCountry:b,selectedState:A,selectedCity:M,handleCountryChange:z,handleStateChange:H,handleCityChange:_,countries:G,states:R,cities:P}};function si(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,games:i,superadmins:n,showUpdateMessage:d,showUpdateError:o,errors:p,selectedCountry:m,selectedState:x,selectedCity:g,handleCountryChange:j,handleStateChange:y,handleCityChange:v,countries:C,states:h,cities:f}=ei(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Admin"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),p.firstName&&e.jsx("p",{className:"text-danger",children:p.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),p.lastName&&e.jsx("p",{className:"text-danger",children:p.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),p.email&&e.jsx("p",{className:"text-danger",children:p.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),p.phone&&e.jsx("p",{className:"text-danger",children:p.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),p.dateOfBirth&&e.jsx("p",{className:"text-danger",children:p.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),p.commission&&e.jsx("p",{className:"text-danger",children:p.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:b=>j(b.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select Country--"}),C.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),p.country&&e.jsx("p",{className:"text-danger",children:p.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:b=>y(b.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select State--"}),h.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),p.state&&e.jsx("p",{className:"text-danger",children:p.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:b=>v(b.target.value),value:g,children:[e.jsx("option",{value:"",children:"--Select City--"}),f.map(b=>e.jsx("option",{value:b.name,children:b.name},b.name))]}),p.city&&e.jsx("p",{className:"text-danger",children:p.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"admin"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),p.address&&e.jsx("p",{className:"text-danger",children:p.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),p.pinCode&&e.jsx("p",{className:"text-danger",children:p.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),p.pin&&e.jsx("p",{className:"text-danger",children:p.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),p.pin&&e.jsx("p",{className:"text-danger",children:p.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(n==null?void 0:n.length)>0?n.map(b=>e.jsx("option",{value:b._id,children:b.username},b._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),p.refId&&e.jsx("p",{className:"text-danger",children:p.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-700 mb-3",children:"Select Games:"}),e.jsx("div",{className:"d-flex flex-wrap",children:i==null?void 0:i.map(b=>e.jsxs("label",{className:"mr-3",children:[e.jsx("input",{type:"checkbox",...s("games"),value:b._id})," ",b.gameName]},b._id))})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[d&&e.jsx("p",{className:"text-success",children:d}),o&&e.jsx("p",{className:"text-danger",children:o})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function ri(t){const s=T(),{admin:r}=Yt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{adminError:j}=D(h=>h.admins),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),u.useEffect(()=>{s(de(t)).unwrap()},[t]),{register:a,handleSubmit:l,onSubmit:async h=>{if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit transfer."),m(!1);return}try{const b={userId:n._id,password:h.password,transferAmount:f,toUserId:t,authUser:n};await s(Ss(b)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit transfer successful!"),c()}catch(b){console.error("API Error:",b);const w=j||(b==null?void 0:b.message)||"Unknown error occurred during credit transfer.";g(w)}finally{m(!1)}},admin:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,credit:y}}function ti(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,admin:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d}=ri(t);return console.log(),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Admin Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",((l==null?void 0:l.refId.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function ai(t){const s=T(),{admin:r}=Yt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(v=>v.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{adminError:j}=D(v=>v.admins);return u.useEffect(()=>{if(d||x){const v=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(v)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async v=>{var f,b;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const C=parseFloat(v.transferAmount);if(isNaN(C)||C<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!v.password){g("Password is required for credit adjustment."),m(!1);return}const h={userId:n._id,password:v.password,adjustAmount:C,transactionType:v.transactionType||"credit",toUserId:t,authUser:n};try{await s(As(h)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit adjustment successful!"),c()}catch(w){console.error("Error during credit adjustment:",w);const A=j||((b=(f=w==null?void 0:w.response)==null?void 0:f.data)==null?void 0:b.message)||(w==null?void 0:w.message)||"An error occurred.";g(A)}finally{m(!1)}},isCreditAdjustLoading:p,admin:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i}}function ni(){const{any:t}=X();console.log(t);const{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,showCreditAdjustMessage:c,showCreditAdjustError:i,errors:n,authUser:d,admin:o}=ai(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Admin  Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(o==null?void 0:o.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",((d==null?void 0:d.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),n.transferAmount&&e.jsx("span",{className:"text-danger",children:n.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),n.password&&e.jsx("span",{className:"text-danger",children:n.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),c&&e.jsx("div",{className:"alert alert-success",children:c}),i&&e.jsx("div",{className:"alert alert-danger",children:i})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const be=({show:t,onClose:s,children:r,title:a,onConfirm:l})=>t?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"modal-container bg-white rounded-lg shadow-lg overflow-hidden w-96",children:[e.jsxs("div",{className:"modal-header p-4 bg-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a}),e.jsx("button",{className:"close-btn text-gray-500 hover:text-red-500 text-xl",onClick:s,children:"×"})]}),e.jsx("div",{className:"modal-body p-4",children:r}),e.jsxs("div",{className:"modal-footer p-4 bg-gray-200 flex justify-end",children:[e.jsx("button",{className:"btn btn-secondary mr-2 px-4 py-2 bg-blue-500 rounded-md hover:bg-blue-600",onClick:s,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",onClick:()=>{l&&l(),s()},children:"Confirm"})]})]})}):null,li=({admins:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=u.useMemo(()=>[{name:"No",selector:(i,n)=>n+1,width:"50px"},{name:"UserName",width:"150px",selector:i=>e.jsx(B,{to:`../admin/players/details/${i._id}`,className:"text-decoration-none",children:e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[i.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]})}),sortable:!0},{name:"Refer ID",selector:i=>{var n;return((n=i==null?void 0:i.refId)==null?void 0:n.username)||"N/A"},sortable:!0},{name:"Unique ID",selector:i=>(i==null?void 0:i._id)||"N/A",sortable:!0},{name:"Points",width:"100px",selector:i=>(i==null?void 0:i.walletBalance)??"N/A",sortable:!0},{name:"Games",selector:i=>e.jsx("ul",{className:"p-2",children:i.games&&i.games.length>0?i.games.map((n,d)=>e.jsx("li",{className:"mb-1",children:n.gameName},d)):e.jsx("li",{children:"No games available"})})},{name:"Date & Time",selector:i=>i.createdAt?new Date(i.createdAt).toLocaleString():"N/A",sortable:!0},{name:"Action",width:"290px",selector:i=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${i._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${i._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${i._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})}),i.userStatus?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${i.username}?`,"Deactivate Confirmation",()=>r(i._id,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${i.username}?`,"Activate Confirmation",()=>r(i._id,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx("button",{className:"btn btn-outline-danger",onClick:()=>s(`Are you sure you want to delete ${i.username}?`,"Delete Confirmation",()=>a(i._id)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],[s,r,a]),c=async()=>{const i=t.map(o=>{var p,m;return{UserName:o.username||"N/A","Refer ID":((p=o.refId)==null?void 0:p.username)||"N/A","Unique ID":o._id||"N/A",Points:o.walletBalance??"N/A",Games:((m=o.games)==null?void 0:m.map(x=>x.gameName).join(", "))||"N/A","Date & Time":o.createdAt?new Date(o.createdAt).toLocaleString():"N/A"}}),d=new zn.Workbook().addWorksheet("Admins");d.columns=[{header:"UserName",key:"UserName",width:30},{header:"Refer ID",key:"Refer ID",width:30},{header:"Unique ID",key:"Unique ID",width:30},{header:"Points",key:"Points",width:15},{header:"Games",key:"Games",width:40},{header:"Date & Time",key:"Date & Time",width:25}],i.forEach(o=>d.addRow(o)),d.xlsx.writeBuffer().then(o=>{const p=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),m=document.createElement("a");m.href=URL.createObjectURL(p),m.download="AdminsList.xlsx",m.click()})};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:c,children:[e.jsx("i",{className:"fas fa-file-excel"})," Export to Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})};function ii(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{adminError:d}=D(m=>m.admins),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(Ls({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateAdmin:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorAdmin:l,successAdminMessage:i}}const ci=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{adminError:d}=D(m=>m.admins),o=u.useCallback(async m=>{a(!0);try{await s(Es(m)).unwrap(),a(!1),n("Admin deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete admin.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteAdmin:l,successDeleteAdminMessage:i,adminError:d}};function $e(){const t=T(),{admins:s,adminLoading:r,adminMessage:a,adminError:l}=D(i=>i.admins),c=async()=>{await t(es()).unwrap()};return u.useEffect(()=>{t(es())},[]),{admins:s,adminLoading:r,adminMessage:a,adminError:l,fetchAllAdmins:c}}const di=t=>{const s=T(),{admin:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i}=D(d=>d.admins),n=async d=>{await s(Ds(d)).unwrap()};return u.useEffect(()=>{t&&n(t)},[t]),{admin:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i,fetchAdminChildren:n}};function oi(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.admins),o=u.useCallback(async(m,x,g)=>{a(!0),c(null),n(null);try{const j=await s(Ts({userId:m,adminId:x,action:g})).unwrap();return n(`User ${m} has been successfully ${g}d.`),j}catch(j){const y=d||j.message||"Failed to update user status.";c(y)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateSuperDistributors:o,handleActivateDeactivate:async(m,x,g)=>{const j=g?"deactivate":"activate";try{await o(m,x,j)}catch(y){console.error(`Failed to ${j} user:`,y)}finally{t()}},stateloading:r,errorSuperistributors:l,successSuperDistributorsMessage:i}}const ui=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.admins),o=u.useCallback(async(m,x)=>{a(!0);try{await s(ks({userId:m,adminId:x})).unwrap(),a(!1),n("admin deleted successfully.")}catch(g){a(!1);const j=d||g.message||"Failed to delete admin.";c(j)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async(m,x)=>{try{await o(m,x)}catch(g){console.error(`Failed to ${m} user:`,g)}finally{t()}},deleteloading:r,errorDeleteadmin:l,successDeleteadminMessage:i,childrenError:d}},dt=({superdistributers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a,userLInk:l,adminId:c,editlink:i,transferlink:n,adjustlink:d})=>{var j;const o=y=>[{name:"No",selector:(v,C)=>C+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:v=>e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[e.jsx(B,{to:`${l}${v._id}`,className:"text-decoration-none",children:v.username}),e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]}),sortable:!0},{name:"Refer ID",selector:v=>v.refId.username,sortable:!0},{name:"Unique ID",selector:v=>v.username,sortable:!0},{name:"Points",selector:v=>v.walletBalance},...y==="player"?[{name:"Is Online",selector:v=>v.isLoggedIn?e.jsx("span",{className:"badge text-white bg-success",children:"Online"}):e.jsx("span",{className:"badge text-white bg-danger",children:"Offline"}),sortable:!0}]:[],{name:"Date & Time",width:"200px",selector:v=>new Date(v.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"290px",selector:v=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`${i}/${v._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`${n}/${v._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`${d}/${v._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})}),v.userStatus?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${v.username}?`,"Deactivate Confirmation",()=>r(v._id,c,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${v.username}?`,"Activate Confirmation",()=>r(v._id,c,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx(B,{to:"#",className:"btn btn-outline-danger delete-confirm",onClick:()=>s(`Are you sure you want to delete ${v.username}?`,"Delete Confirmation",()=>a(v._id,c)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],p=((j=t[0])==null?void 0:j.role)||null,m=o(p),x={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})},g=()=>{const y=t.map(h=>{const f={UserName:h.username,"Refer ID":h.refId,"Unique Id":h.username,Points:(h.wallet||[]).map(b=>b.individualCredit).join(", "),"Date & Time":new Date(h.createdAt).toLocaleString()};return h.role==="player"&&(f["Is Online"]=h.isLoggedIn?"Online":"Offline"),f}),v=te.json_to_sheet(y),C=te.book_new();te.book_append_sheet(C,v,"Super Area Manager"),Me(C,"SuperDistributorsList.xlsx")};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:g,children:[e.jsx("i",{className:"fas fa-file-excel"})," Export to Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:m,data:t,...x,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})},mi=t=>{const s=T(),r=ae(),{admins:a}=$e(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{register:p,handleSubmit:m,setValue:x,reset:g,formState:{errors:j}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[y,v]=u.useState(""),[C,h]=u.useState(""),[f,b]=u.useState(""),w=u.useMemo(()=>ne.getAllCountries(),[]),A=u.useMemo(()=>y?le.getStatesOfCountry(y):[],[y]),I=u.useMemo(()=>y&&C?ie.getCitiesOfState(y,C):[],[y,C]),M=P=>{v(P),h(""),b(""),x("country",P),x("state",""),x("city","")},O=P=>{h(P),b(""),x("state",P),x("city","")},G=P=>{b(P),x("city",P)},R=async P=>{var H,_;n(!0);const z=t==null?void 0:t._id;try{await s($s({childAdminData:P,parentAdminId:z})).unwrap(),c("User created successfully!"),setTimeout(()=>r(-1),1e3),g()}catch(S){const E=((_=(H=S==null?void 0:S.response)==null?void 0:H.data)==null?void 0:_.message)||(S==null?void 0:S.message)||"Failed to create superdistributors.";o(E)}finally{n(!1)}};return u.useEffect(()=>{if(l||d){const P=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(P)}},[l,d]),{register:p,admins:a,handleSubmit:m,onSubmit:R,setValue:x,reset:g,showCreateMessage:l,isCreateLoading:i,showCreateError:d,errors:j,selectedCountry:y,selectedState:C,selectedCity:f,handleCountryChange:M,handleStateChange:O,handleCityChange:G,countries:w,states:A,cities:I}};function hi({adminParent:t}){const{register:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=mi(t),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Super Area Manager"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),n.commission&&e.jsx("p",{className:"text-danger",children:n.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"superareamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:!0}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),e.jsx("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.username},t==null?void 0:t._id),e.jsx("option",{value:"",disabled:!0,children:"No superSuperDistributorss available"})]})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"superdistributor"}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:"true",defaultChecked:!0})," Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:"false"})," Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-1",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const ot=t=>{const s=T(),{superdistributor:r,superdistributorsLoading:a,superdistributorsMessage:l,superdistributorsError:c}=D(n=>n.superdistributor),i=async n=>{await s(Rs(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{superdistributor:r,superdistributorsLoading:a,superdistributorsMessage:l,superdistributorsError:c,fetchSuperDistributorsById:i}},xi=({any:t,id:s})=>{const r=T(),{superdistributor:a}=ot(s),{admins:l}=$e(),[c,i]=u.useState(null),[n,d]=u.useState(!1),[o,p]=u.useState(null),{SuperDistributorsError:m}=D(E=>E.superdistributor),{register:x,watch:g,handleSubmit:j,reset:y,formState:{errors:v},setValue:C,getValues:h}=Z(),[f,b]=u.useState(""),[w,A]=u.useState(""),[I,M]=u.useState(""),O=u.useMemo(()=>ne.getAllCountries(),[]),G=u.useMemo(()=>f?le.getStatesOfCountry(f):[],[f]),R=u.useMemo(()=>f&&w?ie.getCitiesOfState(f,w):[],[f,w]),P=E=>{b(E),A(""),M(""),C("country",E),C("state",""),C("city","")},z=E=>{A(E),M(""),C("state",E),C("city","")},H=E=>{M(E),C("city",E)};u.useEffect(()=>{var E;if(a){const L=$=>$?new Date($).toISOString().split("T")[0]:"";y({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",dateOfBirth:L(a.dateOfBirth),country:a.country||"",state:a.state||"",city:a.city||"",refId:((E=a.refId)==null?void 0:E._id)||"",pinCode:a.pinCode||"",address:a.address||"",pin:a.pin||"",password:a.password||"",occupation:a.occupation||"",commission:a.commission??0,note:a.note??"add notes",userStatus:a.userStatus===!0?"true":"false"}),b(a.country||""),A(a.state||""),M(a.city||"")}},[a,y]);const _=()=>{const E=h(),L={};return Object.keys(E).forEach($=>{let U=E[$];if($==="dateOfBirth"){const K=a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"";(U?new Date(U).toISOString().split("T")[0]:"")!==K&&(L[$]=U);return}if($==="userStatus"){const K=U==="true";K!==a.userStatus&&(L[$]=K);return}if($==="password"){U&&U!==a[$]&&(L[$]=U);return}U!==void 0&&U!==a[$]&&(L[$]=U)}),L},S=async()=>{const E=_();if(Object.keys(E).length===0)return;d(!0);const L=s,$=t;try{await r(qs({parentAdminId:$,superdistributorsId:L,updatedFields:E})).unwrap(),i("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(U){const K=m||U.message||"server error";p(K)}finally{d(!1)}};return u.useEffect(()=>{if(c||o){const E=setTimeout(()=>{i(null),p(null)},2e3);return()=>clearTimeout(E)}},[c,o]),{register:x,handleSubmit:j,onSubmit:S,isUpdateLoading:n,watch:g,setValue:C,admins:l,showUpdateMessage:c,showUpdateError:o,errors:v,selectedCountry:f,selectedState:w,selectedCity:I,handleCountryChange:P,handleStateChange:z,handleCityChange:H,countries:O,states:G,cities:R}};function pi(){const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isUpdateLoading:c,watch:i,admins:n,showUpdateMessage:d,showUpdateError:o,errors:p,selectedCountry:m,selectedState:x,selectedCity:g,handleCountryChange:j,handleStateChange:y,handleCityChange:v,countries:C,states:h,cities:f}=xi({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Super Area Manager"}),e.jsx("form",{onSubmit:a(l),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("firstName",{required:"First Name is required"}),autoComplete:"off"}),p.firstName&&e.jsx("p",{className:"text-danger",children:p.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("lastName",{required:"Last Name is required"}),autoComplete:"off"}),p.lastName&&e.jsx("p",{className:"text-danger",children:p.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...r("email",{required:"Email is required"}),autoComplete:"off"}),p.email&&e.jsx("p",{className:"text-danger",children:p.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...r("phone",{required:"Phone number is required"})}),p.phone&&e.jsx("p",{className:"text-danger",children:p.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...r("dateOfBirth",{required:"Date of Birth is required"})}),p.dateOfBirth&&e.jsx("p",{className:"text-danger",children:p.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...r("commission",{required:!0})}),p.commission&&e.jsx("p",{className:"text-danger",children:p.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...r("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...r("country",{required:"Country is required"}),onChange:b=>j(b.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select Country--"}),C.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),p.country&&e.jsx("p",{className:"text-danger",children:p.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...r("state",{required:"State is required"}),onChange:b=>y(b.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select State--"}),h.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),p.state&&e.jsx("p",{className:"text-danger",children:p.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...r("city",{required:"City is required"}),onChange:b=>v(b.target.value),value:g,children:[e.jsx("option",{value:"",children:"--Select City--"}),f.map(b=>e.jsx("option",{value:b.name,children:b.name},b.name))]}),p.city&&e.jsx("p",{className:"text-danger",children:p.city.message})]})}),e.jsx("input",{type:"hidden",...r("role"),value:"superareamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...r("address",{required:"Address is required"})}),p.address&&e.jsx("p",{className:"text-danger",children:p.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...r("pinCode",{required:"PIN Code is required"})}),p.pinCode&&e.jsx("p",{className:"text-danger",children:p.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...r("password",{required:"PIN is required"})}),p.pin&&e.jsx("p",{className:"text-danger",children:p.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...r("pin",{required:"PIN is required"})}),p.pin&&e.jsx("p",{className:"text-danger",children:p.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...r("refId",{required:"Reference is required"}),defaultValue:i("refId")??"",disabled:c,children:[e.jsx("option",{value:"",children:"--Select Reference--"}),n==null?void 0:n.map((b,w)=>e.jsx("option",{value:b._id,children:b.username},w))]})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus",{required:"Status is required"}),value:"true",checked:i("userStatus")==="true",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus"),value:"false",checked:i("userStatus")==="false",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[d&&e.jsx("p",{className:"text-success",children:d}),o&&e.jsx("p",{className:"text-danger",children:o})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Nn=({any:t,id:s})=>{const r=T(),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i}=D(d=>d.admins),n=async({any:d,id:o})=>{await r(Us({any:d,id:o})).unwrap()};return u.useEffect(()=>{t&&s&&n({any:t,id:s})},[t,s]),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i,fetchAdminById:n}};function fi({any:t,id:s}){const r=T(),{childrenInfo:a}=Nn({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.admins),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var A;x(!0);const f=t,b=s;if(!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const w=parseFloat(h.transferAmount);if(isNaN(w)||w<=0){j("Invalid transfer amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit transfer."),x(!1);return}try{const I={userId:(A=v[0])==null?void 0:A._id,password:h.password,transferAmount:w,toUserId:s,authUser:d};await r(Ms({parentAdminId:f,superdistributorsId:b,transferData:I})).unwrap(),p("Credit transfer successful!"),i()}catch(I){console.error("API Error:",I);const M=y||(I==null?void 0:I.message)||"Unknown error occurred during credit transfer.";j(M)}finally{x(!1)}},childrenInfo:a,authUser:d,showCreditMessage:o,isCreditLoading:m,showCreditError:g,errors:n,credit:v}}function gi(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,childrenInfo:c,showCreditMessage:i,isCreditLoading:n,showCreditError:d,errors:o,credit:p}=fi({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Super Area Manager Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...r("transferAmount",{required:"Amount is required"})}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...r("password",{required:"Password is required"})}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),i&&e.jsx("div",{className:"alert alert-success",children:i}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function ji({any:t,id:s}){const r=T(),{childrenInfo:a}=Nn({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.admins),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var w,A,I;if(x(!0),!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){j("Invalid adjustment amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit adjustment."),x(!1);return}const b={userId:(w=v[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:s,authUser:d};try{await r(Is({any:t,id:s,requestData:b})).unwrap(),await r(ue(d._id)).unwrap(),p("Credit adjustment successful!"),i()}catch(M){console.error("Error during credit adjustment:",M);const O=y||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";j(O)}finally{x(!1)}},isCreditAdjustLoading:m,childrenInfo:a,authUser:d,showCreditAdjustMessage:o,showCreditAdjustError:g,errors:n,credit:v}}function bi(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isCreditAdjustLoading:c,childrenInfo:i,showCreditAdjustMessage:n,showCreditAdjustError:d,errors:o,credit:p}=ji({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Super Area Manager Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(i==null?void 0:i.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((i==null?void 0:i.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...r("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...r("password",{required:"Password is required"}),autoComplete:"off"}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),n&&e.jsx("div",{className:"alert alert-success",children:n}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function yn(){const{action:t,any:s}=X(),{authUser:r}=D(f=>f.auth),a=r==null?void 0:r.role,{admin:l,children:c,childrenLoading:i}=di(s),[n,d]=u.useState(!1),[o,p]=u.useState(null),[m,x]=u.useState(""),[g,j]=u.useState(null),y=(f,b,w)=>{p(f),x(b),j(()=>w),d(!0)},v=()=>{d(!1),j(null)},{handleActivateDeactivate:C}=oi(v),{handleDelete:h}=ui(v);return t==="edit"?e.jsx(pi,{}):t==="credittransfer"?e.jsx(gi,{}):t==="creditadjust"?e.jsx(bi,{}):t==="create"?e.jsx(hi,{adminParent:l}):e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-xl-12 stretch-card",children:e.jsxs("div",{className:"row flex-grow",children:[e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-primary text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsxs("h6",{className:"card-title text-white mb-2",children:[l==null?void 0:l.role," Details"]})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"align-items-baseline",children:e.jsx("table",{className:"bg-transparent   w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Username:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Name:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]})]})})})})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-success text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title mb-1 text-white",children:"Credit"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Credit:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.walletBalance})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Commission Point:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.commission})})]})]})})]})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-danger",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"Last Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-orange-400",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"This Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})})]})}),e.jsx("div",{className:"row flex-grow",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2 text-uppercase",children:[e.jsx("b",{children:"Super Area manager"}),e.jsx(B,{to:`/${a}/admin/players/details/${s}/create`,className:"btn btn-primary btn-md",children:" Add Super Area manager"})]}),e.jsx("div",{className:"card-body",children:e.jsx(dt,{adminId:s,userLInk:"../superareamanager/players/details/",editlink:`/${a}/admin/players/${s}/edit`,transferlink:`/${a}/admin/players/details/${s}/credittransfer`,adjustlink:`/${a}/admin/players/details/${s}/creditadjust`,superdistributers:Array.isArray(c)?c:[],openModal:y,handleActivateDeactivate:C,handleDelete:h})})]})}),e.jsx(be,{show:n,onClose:v,title:m,onConfirm:g,children:o}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ni(){const{action:t}=X(),{admins:s,adminLoading:r}=$e(),[a,l]=u.useState(!1),[c,i]=u.useState(null),[n,d]=u.useState(""),[o,p]=u.useState(null),m=(C,h,f)=>{i(C),d(h),p(()=>f),l(!0)},x=()=>{l(!1),p(null)},{stateloading:g,handleActivateDeactivate:j}=ii(x),{handleDelete:y,deleteloading:v}=ci(x);if(t==="edit")return e.jsx(si,{});if(t==="credittransfer")return e.jsx(ti,{});if(t==="creditadjust")return e.jsx(ni,{});if(t==="create")return e.jsx(Wl,{});if(t==="details")return e.jsx(yn,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Admin"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Admin"})]}),e.jsx("div",{className:"card-body",children:e.jsx(li,{admins:Array.isArray(s)?s:[],openModal:m,handleActivateDeactivate:j,handleDelete:y,adminLoading:r})})]})}),e.jsx(be,{show:a,onClose:x,title:n,onConfirm:o,children:c}),r||g||v&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const yi=()=>{const t=T(),s=ae(),{admins:r}=$e(),[a,l]=u.useState(null),[c,i]=u.useState(!1),[n,d]=u.useState(null),{register:o,handleSubmit:p,setValue:m,reset:x,formState:{errors:g}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[j,y]=u.useState(""),[v,C]=u.useState(""),[h,f]=u.useState(""),b=u.useMemo(()=>ne.getAllCountries(),[]),w=u.useMemo(()=>j?le.getStatesOfCountry(j):[],[j]),A=u.useMemo(()=>j&&v?ie.getCitiesOfState(j,v):[],[j,v]),I=R=>{y(R),C(""),f(""),m("country",R),m("state",""),m("city","")},M=R=>{C(R),f(""),m("state",R),m("city","")},O=R=>{f(R),m("city",R)},G=async R=>{var P,z;i(!0);try{await t(Ps({...R})).unwrap(),l("User created successfully!"),setTimeout(()=>s(-1),1e3),x()}catch(H){const _=((z=(P=H==null?void 0:H.response)==null?void 0:P.data)==null?void 0:z.message)||(H==null?void 0:H.message)||"Failed to create super area manager.";d(_)}finally{i(!1)}};return u.useEffect(()=>{if(a||n){const R=setTimeout(()=>{l(null),d(null)},2e3);return()=>clearTimeout(R)}},[a,n]),{register:o,admins:r,handleSubmit:p,onSubmit:G,setValue:m,reset:x,showCreateMessage:a,isCreateLoading:c,showCreateError:n,errors:g,selectedCountry:j,selectedState:v,selectedCity:h,handleCountryChange:I,handleStateChange:M,handleCityChange:O,countries:b,states:w,cities:A}};function vi(){const{register:t,admins:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=yi(),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Super Area Manager"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...t("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...t("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...t("commissionAmount",{required:!0})}),n.commissionAmount&&e.jsx("p",{className:"text-danger",children:n.commissionAmount.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...t("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...t("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...t("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...t("role"),value:"superareamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...t("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...t("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...t("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...t("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...t("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(s==null?void 0:s.length)>0?s.map(h=>e.jsx("option",{value:h._id,children:h.username},h._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Ci=t=>{const s=T(),{superdistributor:r}=ot(t),{admins:a}=$e(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{SuperDistributorsError:p}=D(S=>S.superdistributor),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",commission:r.commission??0,note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s(Os({superdistributorsId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,admins:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function wi(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,admins:i,errors:n,showUpdateMessage:d,showUpdateError:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=Ci(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Super Area Manager"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),n.dateOfBirth&&e.jsx("p",{className:"text-danger",children:n.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),n.commission&&e.jsx("p",{className:"text-danger",children:n.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"superareamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[d&&e.jsx("p",{className:"text-success",children:d}),o&&e.jsx("p",{className:"text-danger",children:o})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Si(t){const s=T(),{superdistributor:r}=ot(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{superdistributorsError:j}=D(h=>h.superdistributor),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{s(de(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var b;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit transfer."),m(!1);return}try{const w={userId:(b=y[0])==null?void 0:b._id,password:h.password,transferAmount:f,toUserId:t,authUser:n};await s(_s(w)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit transfer successful!"),c()}catch(w){console.error("API Error:",w);const A=j||(w==null?void 0:w.message)||"Unknown error occurred during credit transfer.";g(A)}finally{m(!1)}},superdistributor:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,credit:y}}function Ai(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,superdistributor:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,credit:o}=Si(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Super Area Manager Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Li(t){const s=T(),{superdistributor:r}=ot(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{superdistributorsError:j}=D(h=>h.superdistributor),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),u.useEffect(()=>{s(de(t)).unwrap()},[t]),{register:a,handleSubmit:l,onSubmit:async h=>{var w,A,I;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit adjustment."),m(!1);return}const b={userId:(w=y[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:t,authUser:n};try{await s(Bs(b)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit adjustment successful!"),c()}catch(M){console.error("Error during credit adjustment:",M);const O=j||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";g(O)}finally{m(!1)}},isCreditAdjustLoading:p,superdistributor:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,credit:y}}function Ei(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,showCreditAdjustMessage:c,showCreditAdjustError:i,errors:n,superdistributor:d,credit:o}=Li(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Super Area Manager Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(d==null?void 0:d.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((d==null?void 0:d.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),n.transferAmount&&e.jsx("span",{className:"text-danger",children:n.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),n.password&&e.jsx("span",{className:"text-danger",children:n.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),c&&e.jsx("div",{className:"alert alert-success",children:c}),i&&e.jsx("div",{className:"alert alert-danger",children:i})]})})]})}),l&&e.jsx("div",{className:" fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Di=({superdistributers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(n,d)=>d+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:n=>e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[e.jsx(B,{to:`../superareamanager/players/details/${n==null?void 0:n._id}`,className:"text-decoration-none",children:n==null?void 0:n.username}),e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]}),sortable:!0},{name:"Refer ID",width:"140px",selector:n=>{var d;return(d=n.refId)==null?void 0:d.username},sortable:!0},{name:"Unique ID",selector:n=>n==null?void 0:n.username,width:"140px",sortable:!0},{name:"Points",selector:n=>n==null?void 0:n.walletBalance},{name:"Date & Time",width:"200px",selector:n=>new Date(n==null?void 0:n.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"290px",selector:n=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${n==null?void 0:n._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${n==null?void 0:n._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${n==null?void 0:n._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})}),n.userStatus?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${n==null?void 0:n.username}?`,"Deactivate Confirmation",()=>r(n==null?void 0:n._id,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${n==null?void 0:n.username}?`,"Activate Confirmation",()=>r(n==null?void 0:n._id,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx(B,{to:"#",className:"btn btn-outline-danger delete-confirm",onClick:()=>s(`Are you sure you want to delete ${n==null?void 0:n.username}?`,"Delete Confirmation",()=>a(n==null?void 0:n._id)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})},i=()=>{const n=t.map(p=>({UserName:p==null?void 0:p.username,"Refer ID":p==null?void 0:p.refId,"Unique Id":p==null?void 0:p.username,Points:p==null?void 0:p.wallet.map(m=>m.individualCredit).join(", "),"Date & Time":new Date(p==null?void 0:p.createdAt).toLocaleString()})),d=te.json_to_sheet(n),o=te.book_new();te.book_append_sheet(o,d,"Super Area Manager"),Me(o,"superareamanagerList.xlsx")};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:i,children:[e.jsx("i",{className:"fas fa-file-excel"})," Export to Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})},$i=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{superdistributorsError:d}=D(m=>m.superdistributor),o=u.useCallback(async m=>{a(!0);try{await s(Gs(m)).unwrap(),a(!1),n("superareamanager deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete SuperDistributors.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteSuperDistributors:l,successDeleteSuperDistributorsMessage:i,superdistributorsError:d}};function qi(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{superdistributorsError:d}=D(m=>m.superdistributor),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(Fs({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateSuperDistributors:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorSuperistributors:l,successSuperDistributorsMessage:i}}function ms(){const t=T(),{superdistributors:s,superdistributorsLoading:r,superdistributorsMessage:a,superdistributorsError:l}=D(i=>i.superdistributor),c=async()=>{await t(Ue()).unwrap()};return u.useEffect(()=>{t(Ue())},[]),{superdistributors:s,superdistributorsLoading:r,superdistributorsMessage:a,superdistributorsError:l,fetchAllSuperDistributors:c}}const $a=()=>{const{action:t}=X(),s=T();u.useEffect(()=>{s(Ue())},[t,s]);const{superdistributors:r,superdistributorsLoading:a}=ms(),[l,c]=u.useState(!1),[i,n]=u.useState(null),[d,o]=u.useState(""),[p,m]=u.useState(null),x=(v,C,h)=>{n(v),o(C),m(()=>h),c(!0)},g=()=>{c(!1),m(null)},{handleDelete:j}=$i(g),{handleActivateDeactivate:y}=qi(g);if(t==="edit")return e.jsx(wi,{});if(t==="credittransfer")return e.jsx(Ai,{});if(t==="creditadjust")return e.jsx(Ei,{});if(t==="create")return e.jsx(vi,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Super Area Manager"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Super Area Manager"})]}),e.jsx("div",{className:"card-body",children:e.jsx(Di,{editlink:"edit",transferlink:"credittransfer",adjustlink:"creditadjust",superdistributers:Array.isArray(r)?r:[],openModal:x,handleActivateDeactivate:y,handleDelete:j})})]})}),e.jsx(be,{show:l,onClose:g,title:d,onConfirm:p,children:i}),a&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})},Mi=()=>{const t=T(),s=ae(),{superdistributors:r}=ms(),[a,l]=u.useState(null),[c,i]=u.useState(!1),[n,d]=u.useState(null),{register:o,handleSubmit:p,setValue:m,reset:x,formState:{errors:g}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[j,y]=u.useState(""),[v,C]=u.useState(""),[h,f]=u.useState(""),b=u.useMemo(()=>ne.getAllCountries(),[]),w=u.useMemo(()=>j?le.getStatesOfCountry(j):[],[j]),A=u.useMemo(()=>j&&v?ie.getCitiesOfState(j,v):[],[j,v]),I=R=>{y(R),C(""),f(""),m("country",R),m("state",""),m("city","")},M=R=>{C(R),f(""),m("state",R),m("city","")},O=R=>{f(R),m("city",R)},G=async R=>{var P,z;i(!0);try{await t(Qs({...R})).unwrap(),l("User created successfully!"),setTimeout(()=>s(-1),1e3),x()}catch(H){const _=((z=(P=H==null?void 0:H.response)==null?void 0:P.data)==null?void 0:z.message)||(H==null?void 0:H.message)||"Failed to create area manager.";d(_)}finally{i(!1)}};return u.useEffect(()=>{if(a||n){const R=setTimeout(()=>{l(null),d(null)},2e3);return()=>clearTimeout(R)}},[a,n]),{register:o,superdistributors:r,handleSubmit:p,onSubmit:G,setValue:m,reset:x,showCreateMessage:a,isCreateLoading:c,showCreateError:n,errors:g,selectedCountry:j,selectedState:v,selectedCity:h,handleCountryChange:I,handleStateChange:M,handleCityChange:O,countries:b,states:w,cities:A}};function Ii(){const{register:t,superdistributors:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=Mi(),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Area Managers"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...t("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...t("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...t("commissionAmount",{required:!0})}),n.commissionAmount&&e.jsx("p",{className:"text-danger",children:n.commissionAmount.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...t("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...t("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...t("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...t("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...t("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...t("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...t("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...t("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...t("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(s==null?void 0:s.length)>0?s.map(h=>e.jsx("option",{value:h._id,children:h.username},h._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const ut=t=>{const s=T(),{distributor:r,distributorsLoading:a,distributorsMessage:l,distributorsError:c}=D(n=>n.distributor),i=async n=>{await s(Ws(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{distributor:r,distributorsLoading:a,distributorsMessage:l,distributorsError:c,fetchDistributorsById:i}},Ti=t=>{const s=T(),{distributor:r}=ut(t),{superdistributors:a}=ms(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{distributorsError:p}=D(S=>S.distributor),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",commission:r.commission??0,note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s(er({distributorsId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,superdistributors:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function ki(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,superdistributors:i,errors:n,showUpdateMessage:d,showUpdateError:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=Ti(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Area Manager"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),n.dateOfBirth&&e.jsx("p",{className:"text-danger",children:n.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),n.commission&&e.jsx("p",{className:"text-danger",children:n.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[d&&e.jsx("p",{className:"text-success",children:d}),o&&e.jsx("p",{className:"text-danger",children:o})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ui(t){const s=T(),{distributor:r}=ut(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{DistributorsError:j}=D(h=>h.superdistributor),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{s(de(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var b;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit transfer."),m(!1);return}try{const w={userId:(b=y[0])==null?void 0:b._id,password:h.password,transferAmount:f,toUserId:t,authUser:n};await s(sr(w)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit transfer successful!"),c()}catch(w){console.error("API Error:",w);const A=j||(w==null?void 0:w.message)||"Unknown error occurred during credit transfer.";g(A)}finally{m(!1)}},distributor:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,credit:y}}function Pi(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,distributor:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,credit:o}=Ui(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Area Manager Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ri(t){const s=T(),{distributor:r}=ut(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{distributorsError:j}=D(h=>h.distributor),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{s(de(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var w,A,I;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit adjustment."),m(!1);return}const b={userId:(w=y[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:t,authUser:n};try{await s(rr(b)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit adjustment successful!"),c()}catch(M){console.error("Error during credit adjustment:",M);const O=j||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";g(O)}finally{m(!1)}},isCreditAdjustLoading:p,distributor:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,credit:y}}function Oi(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,showCreditAdjustMessage:c,showCreditAdjustError:i,errors:n,distributor:d,credit:o}=Ri(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Area Manager Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(d==null?void 0:d.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((d==null?void 0:d.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),n.transferAmount&&e.jsx("span",{className:"text-danger",children:n.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),n.password&&e.jsx("span",{className:"text-danger",children:n.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),c&&e.jsx("div",{className:"alert alert-success",children:c}),i&&e.jsx("div",{className:"alert alert-danger",children:i})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const _i=({distributers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(i,n)=>n+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:i=>e.jsx(B,{to:`../areamanager/players/details/${i._id}`,className:"text-decoration-none",children:e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[i.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]})}),sortable:!0},{name:"Refer ID",selector:i=>{var n;return(n=i.refId)==null?void 0:n.username},width:"140px",sortable:!0},{name:"Unique Id",selector:i=>i.username,width:"140px",sortable:!0},{name:"Points",selector:i=>i.walletBalance},{name:"Date & Time",width:"200px",selector:i=>new Date(i.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"290px",selector:i=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${i._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${i._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${i._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})}),i.userStatus?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${i.username}?`,"Deactivate Confirmation",()=>r(i._id,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${i.username}?`,"Activate Confirmation",()=>r(i._id,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx(B,{to:"#",className:"btn btn-outline-danger delete-confirm",onClick:()=>s(`Are you sure you want to delete ${i.username}?`,"Delete Confirmation",()=>a(i._id)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Bi(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{distributorsError:d}=D(m=>m.distributor),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(tr({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateDistributors:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorSuperistributors:l,successDistributorsMessage:i}}const Fi=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{distributorsError:d}=D(m=>m.distributor),o=u.useCallback(async m=>{a(!0);try{await s(ar(m)).unwrap(),a(!1),n("superareamanager deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete SuperDistributors.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteDistributors:l,successDeleteDistributorsMessage:i,distributorsError:d}};function mt(){const t=T(),{distributors:s,distributorsLoading:r,distributorsMessage:a,distributorsError:l}=D(i=>i.distributor),c=async()=>{await t(Pe()).unwrap()};return u.useEffect(()=>{t(Pe())},[]),{distributors:s,distributorsLoading:r,distributorsMessage:a,distributorsError:l,fetchAllDistributors:c}}function Ot(){const{action:t}=X(),s=T();u.useEffect(()=>{s(Pe())},[t,s]);const{distributors:r,distributorsLoading:a}=mt(),[l,c]=u.useState(!1),[i,n]=u.useState(null),[d,o]=u.useState(""),[p,m]=u.useState(null),x=(h,f,b)=>{n(h),o(f),m(()=>b),c(!0)},g=()=>{c(!1),m(null)},{handleActivateDeactivate:j,stateloading:y}=Bi(g),{handleDelete:v,deleteloading:C}=Fi(g);if(t==="edit")return e.jsx(ki,{});if(t==="credittransfer")return e.jsx(Pi,{});if(t==="creditadjust")return e.jsx(Oi,{});if(t==="create")return e.jsx(Ii,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Area Manager"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Area Manager"})]}),e.jsx("div",{className:"card-body",children:e.jsx(_i,{distributers:Array.isArray(r)?r:[],openModal:x,handleActivateDeactivate:j,handleDelete:v})})]})}),e.jsx(be,{show:l,onClose:g,title:d,onConfirm:p,children:i}),a||C||y&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Gi=()=>{const t=T(),s=ae(),{retailerError:r}=D(P=>P.retailer),{distributors:a}=mt(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{register:p,handleSubmit:m,setValue:x,reset:g,formState:{errors:j}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[y,v]=u.useState(""),[C,h]=u.useState(""),[f,b]=u.useState(""),w=u.useMemo(()=>ne.getAllCountries(),[]),A=u.useMemo(()=>y?le.getStatesOfCountry(y):[],[y]),I=u.useMemo(()=>y&&C?ie.getCitiesOfState(y,C):[],[y,C]),M=P=>{v(P),h(""),b(""),x("country",P),x("state",""),x("city","")},O=P=>{h(P),b(""),x("state",P),x("city","")},G=P=>{b(P),x("city",P)},R=async P=>{var z,H;n(!0);try{await t(hr({...P})).unwrap(),c("User created successfully!"),setTimeout(()=>s(-1),1e3),g()}catch(_){const S=r||((H=(z=_==null?void 0:_.response)==null?void 0:z.data)==null?void 0:H.message)||(_==null?void 0:_.message)||"Failed to create master.";o(S)}finally{n(!1)}};return u.useEffect(()=>{if(l||d){const P=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(P)}},[l,d]),{register:p,distributors:a,handleSubmit:m,onSubmit:R,setValue:x,reset:g,showCreateMessage:l,isCreateLoading:i,showCreateError:d,errors:j,selectedCountry:y,selectedState:C,selectedCity:f,handleCountryChange:M,handleStateChange:O,handleCityChange:G,countries:w,states:A,cities:I}};function zi(){const{register:t,distributors:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=Gi(),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Master"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...t("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...t("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...t("commissionAmount",{required:!0})}),n.commissionAmount&&e.jsx("p",{className:"text-danger",children:n.commissionAmount.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...t("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...t("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...t("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...t("role"),value:"master"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...t("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...t("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...t("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...t("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...t("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(s==null?void 0:s.length)>0?s.map(h=>e.jsx("option",{value:h._id,children:h.username},h._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Kt=t=>{const s=T(),{retailer:r,retailerLoading:a,retailerMessage:l,retailerError:c}=D(n=>n.retailer),i=async n=>{await s(xr(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{retailer:r,retailerLoading:a,retailerMessage:l,retailerError:c,fetchretailerssById:i}},Hi=t=>{const s=T(),{retailer:r}=Kt(t),{distributors:a}=mt(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{retailerError:p}=D(S=>S.retailer),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",commission:r.commission??0,note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s(pr({retailersId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,distributors:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function Yi(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,distributors:i,showUpdateMessage:n,showUpdateError:d,errors:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=Hi(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Master"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),o.firstName&&e.jsx("p",{className:"text-danger",children:o.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),o.lastName&&e.jsx("p",{className:"text-danger",children:o.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),o.email&&e.jsx("p",{className:"text-danger",children:o.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),o.phone&&e.jsx("p",{className:"text-danger",children:o.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),o.dateOfBirth&&e.jsx("p",{className:"text-danger",children:o.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),o.commission&&e.jsx("p",{className:"text-danger",children:o.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.country&&e.jsx("p",{className:"text-danger",children:o.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.state&&e.jsx("p",{className:"text-danger",children:o.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),o.city&&e.jsx("p",{className:"text-danger",children:o.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),o.address&&e.jsx("p",{className:"text-danger",children:o.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),o.pinCode&&e.jsx("p",{className:"text-danger",children:o.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),o.refId&&e.jsx("p",{className:"text-danger",children:o.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[n&&e.jsx("p",{className:"text-success",children:n}),d&&e.jsx("p",{className:"text-danger",children:d})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ki(t){const s=T(),{retailer:r}=Kt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{retailerError:j}=D(h=>h.retailer),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{s(de(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var b;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit transfer."),m(!1);return}try{const w={userId:(b=y[0])==null?void 0:b._id,password:h.password,transferAmount:f,toUserId:t,authUser:n};await s(fr(w)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit transfer successful!"),c()}catch(w){console.error("API Error:",w);const A=j||(w==null?void 0:w.message)||"Unknown error occurred during credit transfer.";g(A)}finally{m(!1)}},retailer:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,credit:y}}function Xi(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,retailer:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,credit:o}=Ki(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Master Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Vi(t){const s=T(),{retailer:r}=Kt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{retailerError:j}=D(h=>h.retailer),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{s(de(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var w,A,I;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit adjustment."),m(!1);return}const b={userId:(w=y[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:t,authUser:n};try{await s(gr(b)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit adjustment successful!"),c()}catch(M){console.error("Error during credit adjustment:",M);const O=j||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";g(O)}finally{m(!1)}},isCreditAdjustLoading:p,retailer:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,credit:y}}function Zi(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,showCreditAdjustMessage:c,showCreditAdjustError:i,errors:n,retailer:d,credit:o}=Vi(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Master Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(d==null?void 0:d.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((d==null?void 0:d.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),n.transferAmount&&e.jsx("span",{className:"text-danger",children:n.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),n.password&&e.jsx("span",{className:"text-danger",children:n.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),c&&e.jsx("div",{className:"alert alert-success",children:c}),i&&e.jsx("div",{className:"alert alert-danger",children:i})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Ji=({retailers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(i,n)=>n+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:i=>e.jsx(B,{to:`../master/players/details/${i._id}`,className:"text-decoration-none",children:e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[i.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]})}),sortable:!0},{name:"Refer ID",selector:i=>{var n;return(n=i.refId)==null?void 0:n.username},width:"140px",sortable:!0},{name:"Unique Id",selector:i=>i.username,width:"140px",sortable:!0},{name:"Points",selector:i=>i.walletBalance},{name:"Date & Time",width:"200px",selector:i=>new Date(i.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"300px",selector:i=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${i._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${i._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${i._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})}),i.userStatus?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${i.username}?`,"Deactivate Confirmation",()=>r(i._id,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${i.username}?`,"Activate Confirmation",()=>r(i._id,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx(B,{to:"#",className:"btn btn-outline-danger delete-confirm",onClick:()=>s(`Are you sure you want to delete ${i.username}?`,"Delete Confirmation",()=>a(i._id)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Qi(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{retailerError:d}=D(m=>m.retailer),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(jr({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateretailers:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorSuperistributors:l,successretailersMessage:i}}const Wi=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{retailerError:d}=D(m=>m.retailer),o=u.useCallback(async m=>{a(!0);try{await s(br(m)).unwrap(),a(!1),n("master deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete master.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteRetailers:l,successDeleteRetailersMessage:i,retailerError:d}};function ht(){const t=T(),{retailers:s,retailerLoading:r,retailerMessage:a,retailerError:l}=D(i=>i.retailer),c=async()=>{await t(Re()).unwrap()};return u.useEffect(()=>{t(Re())},[]),{retailers:s,retailerLoading:r,retailerMessage:a,retailerError:l,fetchAllRetailers:c}}function hs(){const{action:t}=X(),s=T();u.useEffect(()=>{s(Re())},[t,s]);const{retailers:r,retailerLoading:a}=ht(),[l,c]=u.useState(!1),[i,n]=u.useState(null),[d,o]=u.useState(""),[p,m]=u.useState(null),x=(v,C,h)=>{n(v),o(C),m(()=>h),c(!0)},g=()=>{c(!1),m(null)},{handleActivateDeactivate:j}=Qi(g),{handleDelete:y}=Wi(g);if(t==="edit")return e.jsx(Yi,{});if(t==="credittransfer")return e.jsx(Xi,{});if(t==="creditadjust")return e.jsx(Zi,{});if(t==="create")return e.jsx(zi,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Master"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Master"})]}),e.jsx("div",{className:"card-body",children:e.jsx(Ji,{retailers:Array.isArray(r)?r:[],openModal:x,handleActivateDeactivate:j,handleDelete:y})})]})}),e.jsx(be,{show:l,onClose:g,title:d,onConfirm:p,children:i}),a&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const ec=()=>{const t=T(),s=ae(),{retailers:r}=ht(),{userError:a}=D(P=>P.user),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{register:p,handleSubmit:m,setValue:x,reset:g,formState:{errors:j}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",note:"add notes",userStatus:!0}}),[y,v]=u.useState(""),[C,h]=u.useState(""),[f,b]=u.useState(""),w=u.useMemo(()=>ne.getAllCountries(),[]),A=u.useMemo(()=>y?le.getStatesOfCountry(y):[],[y]),I=u.useMemo(()=>y&&C?ie.getCitiesOfState(y,C):[],[y,C]),M=P=>{v(P),h(""),b(""),x("country",P),x("state",""),x("city","")},O=P=>{h(P),b(""),x("state",P),x("city","")},G=P=>{b(P),x("city",P)},R=async P=>{var z,H;n(!0);try{await t(Er({...P})).unwrap(),c("User created successfully!"),setTimeout(()=>s(-1),1e3),g()}catch(_){const S=a||((H=(z=_==null?void 0:_.response)==null?void 0:z.data)==null?void 0:H.message)||(_==null?void 0:_.message)||"Failed to create superretailers.";o(S)}finally{n(!1)}};return u.useEffect(()=>{if(l||d){const P=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(P)}},[l,d]),{register:p,retailers:r,handleSubmit:m,onSubmit:R,setValue:x,reset:g,showCreateMessage:l,isCreateLoading:i,showCreateError:d,errors:j,selectedCountry:y,selectedState:C,selectedCity:f,handleCountryChange:M,handleStateChange:O,handleCityChange:G,countries:w,states:A,cities:I}};function sc(){const{register:t,retailers:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=ec(),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Player"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...t("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...t("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...t("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...t("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...t("role"),value:"player"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...t("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...t("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...t("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...t("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(s==null?void 0:s.length)>0?s.map(h=>e.jsx("option",{value:h._id,children:h.username},h._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...t("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Xt=t=>{const s=T(),{user:r,userLoading:a,userMessage:l,userError:c}=D(n=>n.user),i=async n=>{await s(Dr(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{user:r,userLoading:a,userMessage:l,userError:c,fetchUsersById:i}},rc=t=>{const s=T(),{user:r}=Xt(t),{retailers:a}=ht(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{userError:p}=D(S=>S.user),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s($r({usersId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,retailers:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function tc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,retailers:i,showUpdateMessage:n,showUpdateError:d,errors:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=rc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Player"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),o.firstName&&e.jsx("p",{className:"text-danger",children:o.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),o.lastName&&e.jsx("p",{className:"text-danger",children:o.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),o.email&&e.jsx("p",{className:"text-danger",children:o.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),o.phone&&e.jsx("p",{className:"text-danger",children:o.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),o.dateOfBirth&&e.jsx("p",{className:"text-danger",children:o.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.country&&e.jsx("p",{className:"text-danger",children:o.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.state&&e.jsx("p",{className:"text-danger",children:o.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),o.city&&e.jsx("p",{className:"text-danger",children:o.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),o.address&&e.jsx("p",{className:"text-danger",children:o.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),o.pinCode&&e.jsx("p",{className:"text-danger",children:o.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),o.refId&&e.jsx("p",{className:"text-danger",children:o.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[n&&e.jsx("p",{className:"text-success",children:n}),d&&e.jsx("p",{className:"text-danger",children:d})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function ac(t){const s=T(),{user:r}=Xt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{userError:j}=D(h=>h.user),{credit:y,isLoading:v}=D(h=>h.credit);return u.useEffect(()=>{s(de(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var b;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit transfer."),m(!1);return}try{const w={userId:(b=y[0])==null?void 0:b._id,password:h.password,transferAmount:f,toUserId:t,authUser:n};await s(qr(w)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit transfer successful!"),c()}catch(w){console.error("API Error:",w);const A=j||(w==null?void 0:w.message)||"Unknown error occurred during credit transfer.";g(A)}finally{m(!1)}},user:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,credit:y}}function nc(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,user:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,credit:o}=ac(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Player Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function lc(t){const s=T(),{user:r}=Xt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(h=>h.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{credit:j,isLoading:y}=D(h=>h.credit);u.useEffect(()=>{s(de(t)).unwrap()},[t]);const{userError:v}=D(h=>h.user);return u.useEffect(()=>{if(d||x){const h=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(h)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async h=>{var w,A,I;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!h.password){g("Password is required for credit adjustment."),m(!1);return}const b={userId:(w=j[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:t,authUser:n};try{await s(Mr(b)).unwrap(),await s(ue(n._id)).unwrap(),o("Credit adjustment successful!"),c()}catch(M){console.error("Error during credit adjustment:",M);const O=v||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";g(O)}finally{m(!1)}},isCreditAdjustLoading:p,user:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,credit:j}}function ic(){var p;const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,user:c,showCreditAdjustMessage:i,showCreditAdjustError:n,errors:d,credit:o}=lc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Player Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((p=o[0])==null?void 0:p.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),i&&e.jsx("div",{className:"alert alert-success",children:i}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const cc=({users:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(n,d)=>d+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:n=>e.jsx(B,{to:`../player/players/details/${n._id}`,className:"text-decoration-none",children:e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[n.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]})}),sortable:!0},{name:"Refer ID",width:"140px",selector:n=>{var d;return(d=n.refId)==null?void 0:d.username},sortable:!0},{name:"Unique Id",width:"140px",selector:n=>n.username,sortable:!0},{name:"Points",width:"100px",selector:n=>n.walletBalance},{name:"Is Online",selector:n=>n.isLoggedIn?e.jsx("span",{className:"badge text-white bg-success",children:"Online"}):e.jsx("span",{className:"badge text-white bg-danger",children:"Offline"}),sortable:!0},{name:"Last Login",width:"200px",selector:n=>new Date(n.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"300px",selector:n=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${n._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${n._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${n._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})}),n.userStatus?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${n.username}?`,"Deactivate Confirmation",()=>r(n._id,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${n.username}?`,"Activate Confirmation",()=>r(n._id,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx(B,{to:"#",className:"btn btn-outline-danger delete-confirm",onClick:()=>s(`Are you sure you want to delete ${n.username}?`,"Delete Confirmation",()=>a(n._id)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})},i=()=>{const n=t.map(p=>({UserName:p.username,"Refer ID":p.refId,"Unique Id":p.username,Points:p.wallet.map(m=>m.individualCredit).join(", "),"Is Online":p.isLoggedIn?"Online":"Offline","Last Login":new Date(p.createdAt).toLocaleString()})),d=te.json_to_sheet(n),o=te.book_new();te.book_append_sheet(o,d,"player"),Me(o,"playersList.xlsx")};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:i,children:[e.jsx("i",{className:"fas fa-file-excel"})," Export to Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})};function dc(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{userError:d}=D(m=>m.user),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(Ir({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateUsers:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorUsers:l,successUsersMessage:i}}const oc=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{userError:d}=D(m=>m.user),o=u.useCallback(async m=>{a(!0);try{await s(Tr(m)).unwrap(),a(!1),n("player deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete player.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteusers:l,successDeleteusersMessage:i,userError:d}};function uc(){const t=T(),{users:s,userLoading:r,userMessage:a,userError:l}=D(i=>i.user),c=async()=>{await t(Oe())};return u.useEffect(()=>{t(Oe())},[t]),{users:s,userLoading:r,userMessage:a,userError:l,fetchAllUsers:c}}function Be(){const{action:t}=X(),{users:s,userLoading:r}=uc(),a=T();u.useEffect(()=>{a(Oe())},[t,a]);const[l,c]=u.useState(!1),[i,n]=u.useState(null),[d,o]=u.useState(""),[p,m]=u.useState(null),x=(v,C,h)=>{n(v),o(C),m(()=>h),c(!0)},g=()=>{c(!1),m(null)},{handleActivateDeactivate:j}=dc(g),{handleDelete:y}=oc(g);if(t==="edit")return e.jsx(tc,{});if(t==="credittransfer")return e.jsx(nc,{});if(t==="creditadjust")return e.jsx(ic,{});if(t==="create")return e.jsx(sc,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Player"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Player"})]}),e.jsx("div",{className:"card-body",children:e.jsx(cc,{users:Array.isArray(s)?s:[],openModal:x,handleActivateDeactivate:j,handleDelete:y})})]})}),e.jsx(be,{show:l,onClose:g,title:d,onConfirm:p,children:i}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Vt=t=>{const s=T(),{gift:r,giftLoading:a,giftMessage:l,giftError:c}=D(n=>n.gift),i=async n=>{await s(Zr(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{gift:r,giftLoading:a,giftMessage:l,giftError:c,fetchUsersById:i}},mc=t=>{const s=T(),{gift:r}=Vt(t),{admins:a}=$e(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{giftError:p}=D(S=>S.gift),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s(Jr({usersId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,admins:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function hc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,admins:i,showUpdateMessage:n,showUpdateError:d,errors:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=mc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Gift"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),o.firstName&&e.jsx("p",{className:"text-danger",children:o.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),o.lastName&&e.jsx("p",{className:"text-danger",children:o.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),o.email&&e.jsx("p",{className:"text-danger",children:o.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),o.phone&&e.jsx("p",{className:"text-danger",children:o.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),o.dateOfBirth&&e.jsx("p",{className:"text-danger",children:o.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.country&&e.jsx("p",{className:"text-danger",children:o.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.state&&e.jsx("p",{className:"text-danger",children:o.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),o.city&&e.jsx("p",{className:"text-danger",children:o.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),o.address&&e.jsx("p",{className:"text-danger",children:o.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),o.pinCode&&e.jsx("p",{className:"text-danger",children:o.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),o.refId&&e.jsx("p",{className:"text-danger",children:o.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[n&&e.jsx("p",{className:"text-success",children:n}),d&&e.jsx("p",{className:"text-danger",children:d})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function xc(t){const s=T(),{gift:r}=Vt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(C=>C.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{giftError:j,senderAmount:y}=D(C=>C.gift);return u.useEffect(()=>{s(ls(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const C=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(C)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async C=>{if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const h=parseFloat(C.transferAmount);if(isNaN(h)||h<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!C.password){g("Password is required for credit transfer."),m(!1);return}try{const f={userId:y==null?void 0:y._id,password:C.password,transferAmount:h,toUserId:t,authUser:n};await s(Qr(f)).unwrap(),o("Credit transfer successful!"),c()}catch(f){console.error("API Error:",f);const b=j||(f==null?void 0:f.message)||"Unknown error occurred during credit transfer.";g(b)}finally{m(!1)}},gift:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,senderAmount:y}}function pc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,gift:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,senderAmount:o}=xc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Gift Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function fc(t){const s=T(),{gift:r}=Vt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(C=>C.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{giftError:j,senderAmount:y}=D(C=>C.gift);return u.useEffect(()=>{s(ls(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const C=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(C)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async C=>{var b,w;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const h=parseFloat(C.transferAmount);if(isNaN(h)||h<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!C.password){g("Password is required for credit adjustment."),m(!1);return}const f={userId:y==null?void 0:y._id,password:C.password,adjustAmount:h,transactionType:C.transactionType||"credit",toUserId:t,authUser:n};try{await s(Wr(f)).unwrap(),o("Credit adjustment successful!"),c()}catch(A){console.error("Error during credit adjustment:",A);const I=j||((w=(b=A==null?void 0:A.response)==null?void 0:b.data)==null?void 0:w.message)||(A==null?void 0:A.message)||"An error occurred.";g(I)}finally{m(!1)}},isCreditAdjustLoading:p,gift:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,senderAmount:y}}function gc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,gift:c,showCreditAdjustMessage:i,showCreditAdjustError:n,errors:d,senderAmount:o}=fc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Gift Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["gift: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),i&&e.jsx("div",{className:"alert alert-success",children:i}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const jc=({distributers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(i,n)=>n+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:i=>e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[i.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]}),sortable:!0},{name:"Refer ID",selector:i=>{var n;return(n=i.refId)==null?void 0:n.username},width:"140px",sortable:!0},{name:"Unique Id",selector:i=>i.username,width:"140px",sortable:!0},{name:"Points",selector:i=>i.walletBalance},{name:"Date & Time",width:"200px",selector:i=>new Date(i.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"290px",selector:i=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${i._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${i._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${i._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function bc(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{giftError:d}=D(m=>m.gift),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(et({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateUsers:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorUsers:l,successUsersMessage:i}}const Nc=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{giftError:d}=D(m=>m.gift),o=u.useCallback(async m=>{a(!0);try{await s(st(m)).unwrap(),a(!1),n("player deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete player.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteusers:l,successDeleteusersMessage:i,giftError:d}};function yc(){const t=T(),{gifts:s,giftLoading:r,giftMessage:a,giftError:l}=D(i=>i.gift),c=async()=>{await t(ns())};return u.useEffect(()=>{t(ns())},[t]),{gifts:s,giftLoading:r,giftMessage:a,giftError:l,fetchAllUsers:c}}function qa(){const{action:t}=X();T();const{gifts:s,giftLoading:r}=yc(),[a,l]=u.useState(!1),[c,i]=u.useState(null),[n,d]=u.useState(""),[o,p]=u.useState(null),m=(C,h,f)=>{i(C),d(h),p(()=>f),l(!0)},x=()=>{l(!1),p(null)},{handleActivateDeactivate:g,stateloading:j}=bc(x),{handleDelete:y,deleteloading:v}=Nc(x);if(t==="edit")return e.jsx(hc,{});if(t==="credittransfer")return e.jsx(pc,{});if(t==="creditadjust")return e.jsx(gc,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-flex justify-content-between mb-2",children:e.jsx("b",{children:"Gift"})}),e.jsx("div",{className:"card-body",children:e.jsx(jc,{distributers:Array.isArray(s)?s:[],openModal:m,handleActivateDeactivate:g,handleDelete:y})})]})}),e.jsx(be,{show:a,onClose:x,title:n,onConfirm:o,children:c}),r||v||j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Zt=t=>{const s=T(),{loan:r,loanLoading:a,loanMessage:l,loanError:c}=D(n=>n.loan),i=async n=>{await s(zr(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{loan:r,loanLoading:a,loanMessage:l,loanError:c,fetchUsersById:i}},vc=t=>{const s=T(),{loan:r}=Zt(t),{admins:a}=$e(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{loanError:p}=D(S=>S.loan),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s(Hr({usersId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,admins:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function Cc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,admins:i,showUpdateMessage:n,showUpdateError:d,errors:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=vc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Gift"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),o.firstName&&e.jsx("p",{className:"text-danger",children:o.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),o.lastName&&e.jsx("p",{className:"text-danger",children:o.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),o.email&&e.jsx("p",{className:"text-danger",children:o.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),o.phone&&e.jsx("p",{className:"text-danger",children:o.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),o.dateOfBirth&&e.jsx("p",{className:"text-danger",children:o.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.country&&e.jsx("p",{className:"text-danger",children:o.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.state&&e.jsx("p",{className:"text-danger",children:o.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),o.city&&e.jsx("p",{className:"text-danger",children:o.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),o.address&&e.jsx("p",{className:"text-danger",children:o.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),o.pinCode&&e.jsx("p",{className:"text-danger",children:o.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),o.refId&&e.jsx("p",{className:"text-danger",children:o.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[n&&e.jsx("p",{className:"text-success",children:n}),d&&e.jsx("p",{className:"text-danger",children:d})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function wc(t){const s=T(),{loan:r}=Zt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(C=>C.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{loanError:j,senderAmount:y}=D(C=>C.gift);return u.useEffect(()=>{s(as(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const C=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(C)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async C=>{if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const h=parseFloat(C.transferAmount);if(isNaN(h)||h<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!C.password){g("Password is required for credit transfer."),m(!1);return}try{const f={userId:y==null?void 0:y._id,password:C.password,transferAmount:h,toUserId:t,authUser:n};await s(Yr(f)).unwrap(),o("Credit transfer successful!"),c()}catch(f){console.error("API Error:",f);const b=j||(f==null?void 0:f.message)||"Unknown error occurred during credit transfer.";g(b)}finally{m(!1)}},loan:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,senderAmount:y}}function Sc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,loan:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,senderAmount:o}=wc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Loan Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ac(t){const s=T(),{loan:r}=Zt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(C=>C.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{giftError:j,senderAmount:y}=D(C=>C.gift);return u.useEffect(()=>{s(as(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const C=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(C)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async C=>{var b,w;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const h=parseFloat(C.transferAmount);if(isNaN(h)||h<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!C.password){g("Password is required for credit adjustment."),m(!1);return}const f={userId:y==null?void 0:y._id,password:C.password,adjustAmount:h,transactionType:C.transactionType||"credit",toUserId:t,authUser:n};try{await s(Kr(f)).unwrap(),o("Credit adjustment successful!"),c()}catch(A){console.error("Error during credit adjustment:",A);const I=j||((w=(b=A==null?void 0:A.response)==null?void 0:b.data)==null?void 0:w.message)||(A==null?void 0:A.message)||"An error occurred.";g(I)}finally{m(!1)}},isCreditAdjustLoading:p,loan:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,senderAmount:y}}function Lc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,loan:c,showCreditAdjustMessage:i,showCreditAdjustError:n,errors:d,senderAmount:o}=Ac(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Loan Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["gift: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),i&&e.jsx("div",{className:"alert alert-success",children:i}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Ec=({distributers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(i,n)=>n+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:i=>e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[i.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]}),sortable:!0},{name:"Refer ID",selector:i=>{var n;return(n=i.refId)==null?void 0:n.username},width:"140px",sortable:!0},{name:"Unique Id",selector:i=>i.username,width:"140px",sortable:!0},{name:"Points",selector:i=>i.walletBalance},{name:"Date & Time",width:"200px",selector:i=>new Date(i.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"290px",selector:i=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${i._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${i._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${i._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Dc(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{loanError:d}=D(m=>m.loan),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(Xr({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateUsers:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorUsers:l,successUsersMessage:i}}const $c=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{loanError:d}=D(m=>m.loan),o=u.useCallback(async m=>{a(!0);try{await s(Vr(m)).unwrap(),a(!1),n("player deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete player.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteusers:l,successDeleteusersMessage:i,loanError:d}};function qc(){const t=T(),{loans:s,loanLoading:r,loanMessage:a,loanError:l}=D(i=>i.loan),c=async()=>{await t(ts())};return u.useEffect(()=>{t(ts())},[t]),{loans:s,loanLoading:r,loanMessage:a,loanError:l,fetchAllUsers:c}}function Ma(){const{action:t}=X(),{loans:s,loanLoading:r}=qc(),[a,l]=u.useState(!1),[c,i]=u.useState(null),[n,d]=u.useState(""),[o,p]=u.useState(null),m=(C,h,f)=>{i(C),d(h),p(()=>f),l(!0)},x=()=>{l(!1),p(null)},{handleActivateDeactivate:g,stateloading:j}=Dc(x),{handleDelete:y,deleteloading:v}=$c(x);if(t==="edit")return e.jsx(Cc,{});if(t==="credittransfer")return e.jsx(Sc,{});if(t==="creditadjust")return e.jsx(Lc,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-flex justify-content-between mb-2",children:e.jsx("b",{children:"Loan"})}),e.jsx("div",{className:"card-body",children:e.jsx(Ec,{distributers:Array.isArray(s)?s:[],openModal:m,handleActivateDeactivate:g,handleDelete:y})})]})}),e.jsx(be,{show:a,onClose:x,title:n,onConfirm:o,children:c}),r||v||j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Jt=t=>{const s=T(),{otc:r,otcLoading:a,otcMessage:l,otcError:c}=D(n=>n.otc),i=async n=>{await s(Rr(n)).unwrap()};return u.useEffect(()=>{t&&i(t)},[t]),{otc:r,otcLoading:a,otcMessage:l,otcError:c,fetchUsersById:i}},Mc=t=>{const s=T(),{otc:r}=Jt(t),{admins:a}=$e(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{otcError:p}=D(S=>S.otc),{register:m,watch:x,handleSubmit:g,reset:j,formState:{errors:y},setValue:v,getValues:C}=Z(),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=u.useMemo(()=>ne.getAllCountries(),[]),O=u.useMemo(()=>h?le.getStatesOfCountry(h):[],[h]),G=u.useMemo(()=>h&&b?ie.getCitiesOfState(h,b):[],[h,b]),R=S=>{f(S),w(""),I(""),v("country",S),v("state",""),v("city","")},P=S=>{w(S),I(""),v("state",S),v("city","")},z=S=>{I(S),v("city",S)};u.useEffect(()=>{var S;if(r){const E=L=>L?new Date(L).toISOString().split("T")[0]:"";j({firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",dateOfBirth:E(r.dateOfBirth),country:r.country||"",state:r.state||"",city:r.city||"",refId:((S=r.refId)==null?void 0:S._id)||"",pinCode:r.pinCode||"",address:r.address||"",pin:r.pin||"",password:r.password||"",occupation:r.occupation||"",note:r.note??"add notes",userStatus:r.userStatus===!0?"true":"false"}),f(r.country||""),w(r.state||""),I(r.city||"")}},[r,j]);const H=()=>{const S=C(),E={};return Object.keys(S).forEach(L=>{let $=S[L];if(L==="dateOfBirth"){const U=r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"";($?new Date($).toISOString().split("T")[0]:"")!==U&&(E[L]=$);return}if(L==="userStatus"){const U=$==="true";U!==r.userStatus&&(E[L]=U);return}if(L==="password"){$&&$!==r[L]&&(E[L]=$);return}$!==void 0&&$!==r[L]&&(E[L]=$)}),E},_=async()=>{const S=H();if(Object.keys(S).length!==0){n(!0);try{await s(Or({usersId:t,updatedFields:S})).unwrap(),c("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(E){const L=p||E.message||"server error";o(L)}finally{n(!1)}}};return u.useEffect(()=>{if(l||d){const S=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(S)}},[l,d]),{register:m,handleSubmit:g,onSubmit:_,isUpdateLoading:i,watch:x,setValue:v,admins:a,showUpdateMessage:l,showUpdateError:d,errors:y,selectedCountry:h,selectedState:b,selectedCity:A,handleCountryChange:R,handleStateChange:P,handleCityChange:z,countries:M,states:O,cities:G}};function Ic(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isUpdateLoading:l,watch:c,admins:i,showUpdateMessage:n,showUpdateError:d,errors:o,selectedCountry:p,selectedState:m,selectedCity:x,handleCountryChange:g,handleStateChange:j,handleCityChange:y,countries:v,states:C,cities:h}=Mc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit OTC"}),e.jsx("form",{onSubmit:r(a),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),o.firstName&&e.jsx("p",{className:"text-danger",children:o.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),o.lastName&&e.jsx("p",{className:"text-danger",children:o.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),o.email&&e.jsx("p",{className:"text-danger",children:o.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),o.phone&&e.jsx("p",{className:"text-danger",children:o.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...s("dateOfBirth",{required:"Date of Birth is required"})}),o.dateOfBirth&&e.jsx("p",{className:"text-danger",children:o.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...s("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:f=>g(f.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select Country--"}),v.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.country&&e.jsx("p",{className:"text-danger",children:o.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:f=>j(f.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select State--"}),C.map(f=>e.jsx("option",{value:f.isoCode,children:f.name},f.isoCode))]}),o.state&&e.jsx("p",{className:"text-danger",children:o.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:f=>y(f.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select City--"}),h.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]}),o.city&&e.jsx("p",{className:"text-danger",children:o.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),o.address&&e.jsx("p",{className:"text-danger",children:o.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),o.pinCode&&e.jsx("p",{className:"text-danger",children:o.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),o.pin&&e.jsx("p",{className:"text-danger",children:o.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(i==null?void 0:i.length)>0?i.map(f=>e.jsx("option",{value:f._id,children:f.username},f._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),o.refId&&e.jsx("p",{className:"text-danger",children:o.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus",{required:"Status is required"}),value:"true",checked:c("userStatus")==="true",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...s("userStatus"),value:"false",checked:c("userStatus")==="false",disabled:l}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:l,children:l?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[n&&e.jsx("p",{className:"text-success",children:n}),d&&e.jsx("p",{className:"text-danger",children:d})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Tc(t){const s=T(),{otc:r}=Jt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(C=>C.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{otcError:j,senderAmount:y}=D(C=>C.otc);return u.useEffect(()=>{s(rs(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const C=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(C)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async C=>{if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const h=parseFloat(C.transferAmount);if(isNaN(h)||h<=0){g("Invalid transfer amount. Please enter a valid number."),m(!1);return}if(!C.password){g("Password is required for credit transfer."),m(!1);return}try{const f={userId:y==null?void 0:y._id,password:C.password,transferAmount:h,toUserId:t,authUser:n};await s(_r(f)).unwrap(),o("Credit transfer successful!"),c()}catch(f){console.error("API Error:",f);const b=j||(f==null?void 0:f.message)||"Unknown error occurred during credit transfer.";g(b)}finally{m(!1)}},otc:r,authUser:n,showCreditMessage:d,isCreditLoading:p,showCreditError:x,errors:i,senderAmount:y}}function kc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,otc:l,showCreditMessage:c,isCreditLoading:i,showCreditError:n,errors:d,senderAmount:o}=Tc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"OTC Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(l==null?void 0:l.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((l==null?void 0:l.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...s("transferAmount",{required:"Amount is required"})}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...s("password",{required:"Password is required"})}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),c&&e.jsx("div",{className:"alert alert-success",children:c}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Uc(t){const s=T(),{otc:r}=Jt(t),{register:a,handleSubmit:l,reset:c,formState:{errors:i}}=Z(),{authUser:n}=D(C=>C.auth),[d,o]=u.useState(null),[p,m]=u.useState(!1),[x,g]=u.useState(null),{otcError:j,senderAmount:y}=D(C=>C.otc);return u.useEffect(()=>{s(rs(t)).unwrap()},[t]),u.useEffect(()=>{if(d||x){const C=setTimeout(()=>{o(null),g(null)},3e3);return()=>clearTimeout(C)}},[d,x]),{register:a,handleSubmit:l,onSubmit:async C=>{var b,w;if(m(!0),!(n!=null&&n._id)){g("User authentication is missing. Please log in again."),m(!1);return}const h=parseFloat(C.transferAmount);if(isNaN(h)||h<=0){g("Invalid adjustment amount. Please enter a valid number."),m(!1);return}if(!C.password){g("Password is required for credit adjustment."),m(!1);return}const f={userId:y==null?void 0:y._id,password:C.password,adjustAmount:h,transactionType:C.transactionType||"credit",toUserId:t,authUser:n};try{await s(Br(f)).unwrap(),o("Credit adjustment successful!"),c()}catch(A){console.error("Error during credit adjustment:",A);const I=j||((w=(b=A==null?void 0:A.response)==null?void 0:b.data)==null?void 0:w.message)||(A==null?void 0:A.message)||"An error occurred.";g(I)}finally{m(!1)}},isCreditAdjustLoading:p,otc:r,authUser:n,showCreditAdjustMessage:d,showCreditAdjustError:x,errors:i,senderAmount:y}}function Pc(){const{any:t}=X(),{register:s,handleSubmit:r,onSubmit:a,isCreditAdjustLoading:l,otc:c,showCreditAdjustMessage:i,showCreditAdjustError:n,errors:d,senderAmount:o}=Uc(t);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"OTC Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r(a),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["gift: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",((o==null?void 0:o.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...s("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),d.transferAmount&&e.jsx("span",{className:"text-danger",children:d.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...s("password",{required:"Password is required"}),autoComplete:"off"}),d.password&&e.jsx("span",{className:"text-danger",children:d.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),i&&e.jsx("div",{className:"alert alert-success",children:i}),n&&e.jsx("div",{className:"alert alert-danger",children:n})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Rc=({distributers:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(i,n)=>n+1,sortable:!1,width:"60px"},{name:"UserName",width:"150px",selector:i=>e.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:[i.username,e.jsx("span",{children:" "}),e.jsx("i",{className:"fa fa-eye text-lg text-blue-600"})]}),sortable:!0},{name:"Refer ID",selector:i=>{var n;return(n=i.refId)==null?void 0:n.username},width:"140px",sortable:!0},{name:"Unique Id",selector:i=>i.username,width:"140px",sortable:!0},{name:"Points",selector:i=>i.walletBalance},{name:"Date & Time",width:"200px",selector:i=>new Date(i.createdAt).toLocaleString(),sortable:!0},{name:"Action",width:"290px",selector:i=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${i._id}`,className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx(B,{to:`credittransfer/${i._id}`,className:"btn btn-outline-success",children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx(B,{to:`creditadjust/${i._id}`,className:"btn btn-outline-warning",children:e.jsx("i",{className:"fas fa-arrow-down"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Oc(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{otcError:d}=D(m=>m.otc),o=u.useCallback(async(m,x)=>{a(!0),c(null),n(null);try{const g=await s(Fr({userId:m,action:x})).unwrap();return n(`User ${m} has been successfully ${x}d.`),g}catch(g){const j=d||g.message||"Failed to update user status.";c(j)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateUsers:o,handleActivateDeactivate:async(m,x)=>{const g=x?"deactivate":"activate";try{await o(m,g)}catch(j){console.error(`Failed to ${g} user:`,j)}finally{t()}},stateloading:r,errorUsers:l,successUsersMessage:i}}const _c=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{otcError:d}=D(m=>m.otc),o=u.useCallback(async m=>{a(!0);try{await s(Gr(m)).unwrap(),a(!1),n("player deleted successfully.")}catch(x){a(!1);const g=d||x.message||"Failed to delete player.";c(g)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async m=>{try{await o(m)}catch(x){console.error(`Failed to ${m} user:`,x)}finally{t()}},deleteloading:r,errorDeleteusers:l,successDeleteusersMessage:i,otcError:d}};function Bc(){const t=T(),{otcs:s,otcLoading:r,otcMessage:a,otcError:l}=D(i=>i.otc),c=async()=>{await t(ss())};return u.useEffect(()=>{t(ss())},[t]),{otcs:s,otcLoading:r,otcMessage:a,otcError:l,fetchAllUsers:c}}function Ia(){const{action:t}=X(),{otcs:s,otcLoading:r}=Bc(),[a,l]=u.useState(!1),[c,i]=u.useState(null),[n,d]=u.useState(""),[o,p]=u.useState(null),m=(C,h,f)=>{i(C),d(h),p(()=>f),l(!0)},x=()=>{l(!1),p(null)},{handleActivateDeactivate:g,stateloading:j}=Oc(x),{handleDelete:y,deleteloading:v}=_c(x);if(t==="edit")return e.jsx(Ic,{});if(t==="credittransfer")return e.jsx(kc,{});if(t==="creditadjust")return e.jsx(Pc,{});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-flex justify-content-between mb-2",children:e.jsx("b",{children:"Otc"})}),e.jsx("div",{className:"card-body",children:e.jsx(Rc,{distributers:Array.isArray(s)?s:[],openModal:m,handleActivateDeactivate:g,handleDelete:y})})]})}),e.jsx(be,{show:a,onClose:x,title:n,onConfirm:o,children:c}),r||v||j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Fc="https://api.singhjyotiadmin.life",Te=Hn(Fc,{withCredentials:!0});function Ta(){var L,$,U,K,Ne,ve,_e,ea,sa,ra,ta,aa,na,la,ia,ca,da,oa,ua,ma,ha,xa,pa,fa,ga,ja,ba,Na,ya,va;const t=T(),{action:s,any:r,id:a}=X(),[l,c]=u.useState(""),[i,n]=u.useState([]),[d,o]=u.useState(""),[p,m]=u.useState(!1),[x,g]=u.useState(""),[j,y]=u.useState(""),[v,C]=u.useState(""),[h,f]=u.useState(""),[b,w]=u.useState(""),[A,I]=u.useState(""),M=s,O=r;u.useEffect(()=>{const k=()=>{Te.emit("timerData",{adminId:M,gameId:O}),Te.emit("gameData",{adminId:M,gameId:O})};Te.connected?k():Te.once("connect",k);const V=W=>{c(W)};return Te.on("timer",V),()=>{Te.off("timer",V)}},[M,O]);const G=u.useCallback(()=>{Ie.get(`/live/livedata?adminId=${M}&gameId=${O}`).then(k=>{n(k.data),m(!1)}).catch(k=>{console.error("Axios error:",k)})},[M,O]);u.useEffect(()=>{const k=setInterval(()=>{G()},1500);return()=>{clearInterval(k)}},[G]);const R=async()=>{try{(await t(Aa({gameId:O,adminId:M,balance:d,type:"remove"})).unwrap()).success===!0?(alert("Balance Reset successfully!"),o("")):alert("Failed to add balance. Please try again.")}catch{alert("Error occurred while adding balance!")}},P=async()=>{if(d===""||d===null||parseInt(d)<=0){alert("Please enter a valid balance greater than 0.");return}try{(await t(Aa({gameId:O,adminId:M,balance:d,type:"add"})).unwrap()).success===!0?(alert("Balance added successfully!"),o("")):alert("Failed to add balance. Please try again.")}catch{alert("Error occurred while adding balance!")}},z=(k,V)=>{y(V)},H=(k,V)=>{C(V)},_=(k,V)=>{f(V)},S=async()=>{if(j===""||j===null){alert("Please enter a valid result.");return}try{(await t(La({gameId:O,adminId:M,result:j,boosterValue:x})).unwrap()).success===!0?(w("Result added successfully!"),y("")):I("Failed to add result. Please try again.")}catch{I("Error occurred while adding result!")}},E=async()=>{if(j===""||j===null||v===""||v===null||h===""||h===null){alert("Please enter a valid result.");return}try{(await t(La({gameId:O,adminId:M,result:j,color:v,type:h,boosterValue:x})).unwrap()).success===!0?(w("Result added successfully!"),y(""),f(""),C("")):I("Failed to add result. Please try again.")}catch{I("Error occurred while adding result!")}};if(u.useEffect(()=>{setTimeout(()=>{w(""),I("")},2e3)},[b,A]),p)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(O==="MNOQqWWi")return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsx("h5",{className:"col-sm-2 card-title",children:"Fun Target"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:()=>G(),children:e.jsx("span",{"aria-hidden":"true",children:"Refresh"})}),e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:R,children:e.jsx("span",{"aria-hidden":"true",children:"Reset Balance"})})]})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("div",{className:"flex flex-wrap gap-2 p-2",children:i&&i.data!==void 0&&i.data.map((k,V)=>e.jsxs("button",{className:"p-2 bg-gray-200 rounded hover:bg-green-200 text-center relative w-24",onClick:W=>z(W,k.drawno),children:[e.jsx("input",{type:"radio",name:"makeresult",className:"h-4 w-4 absolute left-2 top-2",value:k.drawno,onChange:W=>z(W,k.drawno),checked:j===k.drawno}),e.jsx("h1",{className:"text-2xl font-bold text-black mt-4",children:k.drawno}),e.jsx("input",{name:"drawtotal",className:"w-full text-md mt-2 bg-red-100 text-center",value:k.sum||0,readOnly:!0})]},V))}),e.jsx("form",{id:"myFormID",name:"myform",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsx("input",{type:"number",className:"form-control",id:"balance",name:"balance",value:d,onChange:k=>o(k.target.value),min:"1",placeholder:"Enter your Balance",autoComplete:"off"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("button",{type:"button",className:"w-full btn btn-primary form-control delete-all",onClick:P,children:"Add Balance"})})]})})]}),e.jsxs("div",{className:"col-md-4 mt-2 mb-24",children:[e.jsxs("span",{className:"text-xl mb-2",id:"countdown",children:["Timer: ",l]}),e.jsx("p",{children:e.jsx("select",{name:"boosterId",id:"boosterId",className:"browser-default custom-select",onChange:k=>g(k.target.value),children:Array.from({length:2},(k,V)=>e.jsx("option",{value:V+1,children:V+1},V))})}),e.jsxs("div",{className:"mt-2 mb-0 d-flex",children:[e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-xl",name:"SelectedCard",id:"SelectedCard",value:j,readOnly:!0}),e.jsx("button",{type:"button",className:"btn btn-success",id:"btnSave",name:"btnSave",onClick:S,children:"SAVE"})]}),e.jsxs("div",{className:"p-2 ",children:[A&&e.jsx("p",{className:"p-2 bg-red-400 text-white  font-semibold",children:A}),b&&e.jsx("p",{className:"p-2 bg-green-400 text-white font-semibold",children:b})]}),e.jsx("div",{className:"alert alert-success alert-dismissible fade",role:"alert",id:"alertId"}),e.jsx("div",{className:"alert alert-danger alert-dismissible fade",role:"alert",id:"alertIdR"}),e.jsx("span",{id:"idRes",children:"Daily Collection & Results"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL Game Balance: "}),e.jsx("td",{align:"right",children:e.jsx("span",{id:"tDayCollection",children:(($=(L=i==null?void 0:i.percentageData)==null?void 0:L[0])==null?void 0:$.gameBalance)??0})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL COLLECTION: "}),e.jsx("td",{align:"right",children:((U=i==null?void 0:i.collections)==null?void 0:U.totalPlaypoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL PAYMENT :"}),e.jsx("td",{align:"right",children:((K=i==null?void 0:i.collections)==null?void 0:K.totalWinpoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"BALANCE :"}),e.jsx("td",{align:"right",children:(((Ne=i==null?void 0:i.collections)==null?void 0:Ne.totalPlaypoints)??0)-(((ve=i==null?void 0:i.collections)==null?void 0:ve.totalWinpoints)??0)})]})]})})]})]})})]});if(O==="vwRORrGO")return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsx("h5",{className:"col-sm-2 card-title",children:"Fun Roullet"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:()=>G(),children:e.jsx("span",{"aria-hidden":"true",children:"Refresh"})}),e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:R,children:e.jsx("span",{"aria-hidden":"true",children:"Reset Balance"})})]})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-10 gap-2 p-2 w-full",children:i&&i.data!==void 0&&i.data.map((k,V)=>e.jsxs("div",{className:"p-1 bg-gray-200 rounded hover:bg-green-200 text-center relative  ",onClick:W=>z(W,k.drawno),children:[e.jsx("input",{type:"radio",name:"makeresult",className:"h-4 w-4 absolute left-2 top-2",value:k.drawno,onChange:W=>z(W,k.drawno),checked:j===k.drawno}),e.jsx("h1",{className:`text-lg font-bold mt-4 ${k.color==="red"?"text-red-600":k.color==="black"?"text-gray-800 text-black":"text-green-800"}`,children:k.drawno}),e.jsx("input",{name:"drawtotal",style:{fontSize:"11px"},className:`w-full  mt-2 text-center ${k.color==="red"?"bg-red-600 text-white":k.color==="black"?"bg-gray-800 text-white":"bg-green-800 text-white"}`,value:k.sum||0,readOnly:!0})]},V))}),e.jsx("form",{id:"myFormID",name:"myform",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsx("input",{type:"number",className:"form-control",id:"balance",name:"balance",value:d,onChange:k=>o(k.target.value),min:"1",placeholder:"Enter your Balance",autoComplete:"off"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("button",{type:"button",className:"w-full btn btn-primary form-control delete-all",onClick:P,children:"Add Balance"})})]})})]}),e.jsxs("div",{className:"col-md-4 mt-2 mb-24",children:[e.jsxs("span",{className:"text-xl mb-2",id:"countdown",children:["Timer: ",l]}),e.jsx("p",{children:e.jsx("select",{name:"boosterId",id:"boosterId",className:"browser-default custom-select",onChange:k=>g(k.target.value),children:Array.from({length:2},(k,V)=>e.jsx("option",{value:V+1,children:V+1},V))})}),e.jsxs("div",{className:"mt-2 mb-0 d-flex",children:[e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-xl",name:"SelectedCard",id:"SelectedCard",value:j,readOnly:!0}),e.jsx("button",{type:"button",className:"btn btn-success",id:"btnSave",name:"btnSave",onClick:S,children:"SAVE"})]}),e.jsxs("div",{className:"p-2 ",children:[A&&e.jsx("p",{className:"p-2 bg-red-400 text-white  font-semibold",children:A}),b&&e.jsx("p",{className:"p-2 bg-green-400 text-white font-semibold",children:b})]}),e.jsx("div",{className:"alert alert-success alert-dismissible fade",role:"alert",id:"alertId"}),e.jsx("div",{className:"alert alert-danger alert-dismissible fade",role:"alert",id:"alertIdR"}),e.jsx("span",{id:"idRes",children:"Daily Collection & Results"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL Game Balance: "}),e.jsx("td",{align:"right",children:e.jsx("span",{id:"tDayCollection",children:((ea=(_e=i==null?void 0:i.percentageData)==null?void 0:_e[0])==null?void 0:ea.gameBalance)??0})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL COLLECTION: "}),e.jsx("td",{align:"right",children:((sa=i==null?void 0:i.collections)==null?void 0:sa.totalPlaypoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL PAYMENT :"}),e.jsx("td",{align:"right",children:((ra=i==null?void 0:i.collections)==null?void 0:ra.totalWinpoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"BALANCE :"}),e.jsx("td",{align:"right",children:(((ta=i==null?void 0:i.collections)==null?void 0:ta.totalPlaypoints)??0)-(((aa=i==null?void 0:i.collections)==null?void 0:aa.totalWinpoints)??0)})]})]})})]})]})})]});if(O==="zuuhVbBM")return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsx("h5",{className:"col-sm-2 card-title",children:"Triple Fun"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:()=>G(),children:e.jsx("span",{"aria-hidden":"true",children:"Refresh"})}),e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:R,children:e.jsx("span",{"aria-hidden":"true",children:"Reset Balance"})})]})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("div",{className:"w-full h-[400px] overflow-y-auto ",children:e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-10 gap-1 w-full mb-[20px]",children:i&&i.data!==void 0&&i.data.map((k,V)=>e.jsxs("button",{className:`rounded h-[38px] relative hover:bg-red-400 text-center  ${j===k.label?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.label),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))})}),e.jsx("form",{id:"myFormID",name:"myform",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsx("input",{type:"number",className:"form-control",id:"balance",name:"balance",value:d,onChange:k=>o(k.target.value),min:"1",placeholder:"Enter your Balance",autoComplete:"off"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("button",{type:"button",className:"w-full btn btn-primary form-control delete-all",onClick:P,children:"Add Balance"})})]})})]}),e.jsxs("div",{className:"col-md-4 mt-2 mb-24",children:[e.jsxs("span",{className:"text-xl mb-2",id:"countdown",children:["Timer: ",l]}),e.jsx("p",{children:e.jsx("select",{name:"boosterId",id:"boosterId",className:"browser-default custom-select",onChange:k=>g(k.target.value),children:Array.from({length:2},(k,V)=>e.jsx("option",{value:V+1,children:V+1},V))})}),e.jsxs("div",{className:"mt-2 mb-0 d-flex",children:[e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-xl",name:"SelectedCard",id:"SelectedCard",value:j,readOnly:!0}),e.jsx("button",{type:"button",className:"btn btn-success",id:"btnSave",name:"btnSave",onClick:S,children:"SAVE"})]}),e.jsxs("div",{className:"p-2 ",children:[A&&e.jsx("p",{className:"p-2 bg-red-400 text-white  font-semibold",children:A}),b&&e.jsx("p",{className:"p-2 bg-green-400 text-white font-semibold",children:b})]}),e.jsx("div",{className:"alert alert-success alert-dismissible fade",role:"alert",id:"alertId"}),e.jsx("div",{className:"alert alert-danger alert-dismissible fade",role:"alert",id:"alertIdR"}),e.jsx("span",{id:"idRes",children:"Daily Collection & Results"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL Game Balance: "}),e.jsx("td",{align:"right",children:e.jsx("span",{id:"tDayCollection",children:((la=(na=i==null?void 0:i.percentageData)==null?void 0:na[0])==null?void 0:la.gameBalance)??0})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL COLLECTION: "}),e.jsx("td",{align:"right",children:((ia=i==null?void 0:i.collections)==null?void 0:ia.totalPlaypoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL PAYMENT :"}),e.jsx("td",{align:"right",children:((ca=i==null?void 0:i.collections)==null?void 0:ca.totalWinpoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"BALANCE :"}),e.jsx("td",{align:"right",children:(((da=i==null?void 0:i.collections)==null?void 0:da.totalPlaypoints)??0)-(((oa=i==null?void 0:i.collections)==null?void 0:oa.totalWinpoints)??0)})]})]})})]})]})})]});if(O==="qZicXikM")return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsx("h5",{className:"col-sm-2 card-title",children:"Andhar Bahar"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:()=>G(),children:e.jsx("span",{"aria-hidden":"true",children:"Refresh"})}),e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:R,children:e.jsx("span",{"aria-hidden":"true",children:"Reset Balance"})})]})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"w-full h-[400px] overflow-y-auto ",children:[e.jsx("div",{className:" w-full mb-[20px]",children:i&&i.data!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-1 mb-[10px]",children:i.data.slice(0,6).map((k,V)=>e.jsxs("button",{className:`rounded w-[100px]  text-center relative hover:bg-red-400 ${j===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-12 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-[10px]",children:i.data.slice(6,7).map((k,V)=>e.jsxs("button",{className:`rounded w-[100px] text-center relative hover:bg-red-400 ${j===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-12 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-[10px]",children:i.data.slice(7,13).map((k,V)=>e.jsxs("button",{className:`rounded w-[100px] text-center relative hover:bg-red-400 ${j===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-12 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))}),e.jsx("div",{className:"grid grid-cols-6  gap-1 mb-[10px]",children:i.data.slice(13).map((k,V)=>e.jsxs("button",{className:`rounded w-[100px] text-center relative hover:bg-red-400 ${h===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-12 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))})]})}),e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-10 gap-1 w-full mb-[20px]",children:i&&i.dataColors!==void 0&&i.dataColors.map((k,V)=>e.jsxs("button",{className:`rounded text-center relative hover:bg-red-400 text-center  ${v===k.label?"bg-red-400":"bg-gray-200"}`,onClick:W=>H(W,k.label),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-8 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))}),e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-10 gap-1 w-full mb-[20px]",children:i&&i.dataCardTypes!==void 0&&i.dataCardTypes.map((k,V)=>e.jsxs("button",{className:`rounded text-center relative hover:bg-red-400 text-center  ${h===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>_(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:"w-full bg-transparent text-center text-gray-800",value:k.sum||0,readOnly:!0})]},V))})]}),e.jsx("form",{id:"myFormID",name:"myform",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsx("input",{type:"number",className:"form-control",id:"balance",name:"balance",value:d,onChange:k=>o(k.target.value),min:"1",placeholder:"Enter your Balance",autoComplete:"off"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("button",{type:"button",className:"w-full btn btn-primary form-control delete-all",onClick:P,children:"Add Balance"})})]})})]}),e.jsxs("div",{className:"col-md-4 mt-2 mb-24",children:[e.jsxs("span",{className:"text-xl mb-2",id:"countdown",children:["Timer: ",l]}),e.jsx("p",{children:e.jsx("select",{name:"boosterId",id:"boosterId",className:"browser-default custom-select",onChange:k=>g(k.target.value),children:Array.from({length:2},(k,V)=>e.jsx("option",{value:V+1,children:V+1},V))})}),e.jsxs("div",{className:"mt-2 mb-0 d-flex",children:[e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-md",name:"SelectedCard",id:"SelectedCard",value:j,readOnly:!0}),e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-md",name:"SelectedColor",id:"SelectedColor",value:v,readOnly:!0}),e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-md",name:"SelectedColor",id:"SelectedColor",value:h,readOnly:!0}),e.jsx("button",{type:"button",className:"btn btn-success",id:"btnSave",name:"btnSave",onClick:E,children:"SAVE"})]}),e.jsxs("div",{className:"p-2 ",children:[A&&e.jsx("p",{className:"p-2 bg-red-400 text-white  font-semibold",children:A}),b&&e.jsx("p",{className:"p-2 bg-green-400 text-white font-semibold",children:b})]}),e.jsx("div",{className:"alert alert-success alert-dismissible fade",role:"alert",id:"alertId"}),e.jsx("div",{className:"alert alert-danger alert-dismissible fade",role:"alert",id:"alertIdR"}),e.jsx("span",{id:"idRes",children:"Daily Collection & Results"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL Game Balance: "}),e.jsx("td",{align:"right",children:e.jsx("span",{id:"tDayCollection",children:((ma=(ua=i==null?void 0:i.percentageData)==null?void 0:ua[0])==null?void 0:ma.gameBalance)??0})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL COLLECTION: "}),e.jsx("td",{align:"right",children:((ha=i==null?void 0:i.collections)==null?void 0:ha.totalPlaypoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL PAYMENT :"}),e.jsx("td",{align:"right",children:((xa=i==null?void 0:i.collections)==null?void 0:xa.totalWinpoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"BALANCE :"}),e.jsx("td",{align:"right",children:(((pa=i==null?void 0:i.collections)==null?void 0:pa.totalPlaypoints)??0)-(((fa=i==null?void 0:i.collections)==null?void 0:fa.totalWinpoints)??0)})]})]})})]})]})})]});if(O==="qZicXikT")return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsx("h5",{className:"col-sm-2 card-title",children:"Titli Sorrat"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:()=>G(),children:e.jsx("span",{"aria-hidden":"true",children:"Refresh"})}),e.jsx("button",{type:"button",id:"reset",className:"btn btn-primary",onClick:R,children:e.jsx("span",{"aria-hidden":"true",children:"Reset Balance"})})]})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("div",{className:"w-full h-[400px] overflow-y-auto ",children:e.jsx("div",{className:" w-full mb-[20px]",children:i&&i.data!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-1 mb-[10px]",children:i.data.slice(0,6).map((k,V)=>e.jsxs("button",{className:`rounded w-[100px]  text-center relative hover:bg-red-400 ${j===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-12 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-[10px]",children:i.data.slice(6,12).map((k,V)=>e.jsxs("button",{className:`rounded w-[100px] text-center relative hover:bg-red-400 ${j===k.drawno?"bg-red-400":"bg-gray-200"}`,onClick:W=>z(W,k.drawno),children:[e.jsx("p",{className:"text-sm font-bold mt-[1px] text-gray-800",children:k.label}),e.jsx("img",{src:k.image,className:"mx-auto my-1 h-12 w-8"}),e.jsx("input",{name:"drawtotal",style:{fontSize:"10px"},className:`w-full text-center text-gray-800 ${k.sum>0?"bg-red-400":"bg-transparent"}`,value:k.sum||0,readOnly:!0})]},V))})]})})}),e.jsx("form",{id:"myFormID",name:"myform",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("div",{className:"col-sm-4 mb-2",children:e.jsx("input",{type:"number",className:"form-control",id:"balance",name:"balance",value:d,onChange:k=>o(k.target.value),min:"1",placeholder:"Enter your Balance",autoComplete:"off"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("button",{type:"button",className:"w-full btn btn-primary form-control delete-all",onClick:P,children:"Add Balance"})})]})})]}),e.jsxs("div",{className:"col-md-4 mt-2 mb-24",children:[e.jsxs("span",{className:"text-xl mb-2",id:"countdown",children:["Timer: ",l]}),e.jsx("p",{children:e.jsx("select",{name:"boosterId",id:"boosterId",className:"browser-default custom-select",onChange:k=>g(k.target.value),children:Array.from({length:2},(k,V)=>e.jsx("option",{value:V+1,children:V+1},V))})}),e.jsxs("div",{className:"mt-2 mb-0 d-flex",children:[e.jsx("input",{type:"text",className:"form-control mr-2 bg-green-100 font-bold text-xl",name:"SelectedCard",id:"SelectedCard",value:j,readOnly:!0}),e.jsx("button",{type:"button",className:"btn btn-success",id:"btnSave",name:"btnSave",onClick:S,children:"SAVE"})]}),e.jsxs("div",{className:"p-2 ",children:[A&&e.jsx("p",{className:"p-2 bg-red-400 text-white  font-semibold",children:A}),b&&e.jsx("p",{className:"p-2 bg-green-400 text-white font-semibold",children:b})]}),e.jsx("div",{className:"alert alert-success alert-dismissible fade",role:"alert",id:"alertId"}),e.jsx("div",{className:"alert alert-danger alert-dismissible fade",role:"alert",id:"alertIdR"}),e.jsx("span",{id:"idRes",children:"Daily Collection & Results"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL Game Balance: "}),e.jsx("td",{align:"right",children:e.jsx("span",{id:"tDayCollection",children:((ja=(ga=i==null?void 0:i.percentageData)==null?void 0:ga[0])==null?void 0:ja.gameBalance)??0})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL COLLECTION: "}),e.jsx("td",{align:"right",children:((ba=i==null?void 0:i.collections)==null?void 0:ba.totalPlaypoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"TOTAL PAYMENT :"}),e.jsx("td",{align:"right",children:((Na=i==null?void 0:i.collections)==null?void 0:Na.totalWinpoints)??0})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"BALANCE :"}),e.jsx("td",{align:"right",children:(((ya=i==null?void 0:i.collections)==null?void 0:ya.totalPlaypoints)??0)-(((va=i==null?void 0:i.collections)==null?void 0:va.totalWinpoints)??0)})]})]})})]})]})})]})}const Gc=(t={})=>{const s=T(),{gamesLoading:r,gamesError:a,gamesMessage:l,games:c}=D(y=>y.games),i=u.useMemo(()=>c.find(y=>y._id===t._id)||t,[c,t]),n=u.useMemo(()=>({...i,releaseDate:i.releaseDate?i.releaseDate.split("T")[0]:""}),[i]),{register:d,handleSubmit:o,setValue:p,reset:m,formState:{errors:x}}=Z({defaultValues:n});u.useEffect(()=>{m(n)},[n,m]);const g=(y,v)=>{s(bs({gameId:y,gameData:v})),m(),setTimeout(()=>{window.history.back()},1e3)};return{register:d,handleSubmit:o,setValue:p,errors:x,onSubmit:y=>{i._id&&g(i._id,y)},gamesLoading:r,gamesError:a,gamesMessage:l}};function zc(){const{any:t}=X(),{games:s,gamesLoading:r}=D(p=>p.games),a=s.find(p=>p._id===t)||{},{register:l,handleSubmit:c,onSubmit:i,errors:n,gamesError:d,gamesMessage:o}=Gc(a);return a._id?e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Game"}),e.jsxs("form",{onSubmit:c(i),children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Game ID:"}),e.jsx("input",{type:"text",className:"form-control",value:a.gameId||"",readOnly:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Game Name:"}),e.jsx("input",{type:"text",className:"form-control",...l("gameName",{required:"Game Name is required"})}),n.gameName&&e.jsx("p",{className:"text-danger",children:n.gameName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Number of Digits:"}),e.jsx("input",{type:"number",className:"form-control",...l("nodigit",{required:"Number of Digits is required"})}),n.nodigit&&e.jsx("p",{className:"text-danger",children:n.nodigit.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Logo URL:"}),e.jsx("input",{type:"text",className:"form-control",...l("logo")})]})}),e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description:"}),e.jsx("textarea",{className:"form-control",rows:"3",...l("description",{required:"Description is required"})}),n.description&&e.jsx("p",{className:"text-danger",children:n.description.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Publisher:"}),e.jsx("input",{type:"text",className:"form-control",...l("publisher",{required:"Publisher is required"})}),n.publisher&&e.jsx("p",{className:"text-danger",children:n.publisher.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Release Date:"}),e.jsx("input",{type:"date",className:"form-control",...l("releaseDate",{required:"Release Date is required"})}),n.releaseDate&&e.jsx("p",{className:"text-danger",children:n.releaseDate.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("select",{className:"form-control",...l("status",{required:"Status is required"}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),n.status&&e.jsx("p",{className:"text-danger",children:n.status.message})]})})]}),e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-sm-6",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:r,children:r?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})})]}),d&&e.jsx("p",{className:"text-danger",children:d}),o&&e.jsx("p",{className:"text-success",children:o})]})})}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]}):e.jsx("p",{children:"No game found with the provided ID."})}const Hc=()=>{var h;const{authUser:t}=D(f=>f.auth),{times:s}=D(f=>f.times),r=T(),{gamesLoading:a,gamesError:l,gamesMessage:c}=D(f=>f.games),[i,n]=u.useState([]);u.useEffect(()=>{s.length||r(Je())},[r,s.length]);const{register:d,handleSubmit:o,setValue:p,reset:m,formState:{errors:x},watch:g}=Z({defaultValues:{gameName:"",gameDescription:"",releaseDate:"",publisher:(t==null?void 0:t.username)||"",nodigit:0,gameStatus:"active",label:"no",timeId:((h=s[0])==null?void 0:h._id)||""}});u.useEffect(()=>{let f;return(l||c)&&(f=setTimeout(()=>{l&&r(Qe()),c&&r(lt())},5e3)),()=>{f&&clearTimeout(f)}},[l,c,r]);const j=(f,b)=>{const w=b.target.files[0];w&&n(A=>{const I=[...A];return I[f]=w,I})},y=async f=>{try{const b=new FormData;b.append("gameName",f.gameName),b.append("gameDescription",f.gameDescription),b.append("releaseDate",f.releaseDate),b.append("publisher",f.publisher),b.append("nodigit",f.nodigit),b.append("gameStatus",f.gameStatus),b.append("label",f.label),b.append("timeId",f.timeId),f.label==="yes"&&i.length>0&&i.forEach(w=>{b.append("images",w)}),await r(js(b)).unwrap(),m(),setTimeout(()=>{window.history.back()},1e3)}catch(b){console.error("Error creating game:",(b==null?void 0:b.message)||b)}},v=u.useCallback(()=>{r(Qe())},[r]),C=u.useCallback(()=>{r(lt())},[r]);return{gamesLoading:a,gamesError:l,gamesMessage:c,clearError:v,clearMessage:C,onSubmit:y,register:d,handleSubmit:o,setValue:p,reset:m,errors:x,times:s,watch:g,handleFileChange:j,medias:i,setMedias:n}};function vn(){const{gamesLoading:t,gamesMessage:s,gamesError:r,register:a,handleSubmit:l,errors:c,onSubmit:i,times:n,watch:d,medias:o,handleFileChange:p}=Hc(),m=d("label"),x=d("nodigit");return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Game"}),e.jsx("form",{className:"forms-sample",onSubmit:l(i),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Game Name:"}),e.jsx("input",{type:"text",className:"form-control",...a("gameName",{required:"Game name is required"}),disabled:t}),c.gameName&&e.jsx("p",{className:"text-danger",children:c.gameName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Number of Digits:"}),e.jsx("input",{type:"number",className:"form-control",...a("nodigit",{required:"Number of digits is required",min:{value:1,message:"Must be at least 1"}}),disabled:t}),c.nodigit&&e.jsx("p",{className:"text-danger",children:c.nodigit.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Publisher:"}),e.jsx("input",{type:"text",className:"form-control",...a("publisher",{required:"Publisher is required"}),disabled:t}),c.publisher&&e.jsx("p",{className:"text-danger",children:c.publisher.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Release Date:"}),e.jsx("input",{type:"date",className:"form-control",...a("releaseDate",{required:"Release date is required"}),disabled:t}),c.releaseDate&&e.jsx("p",{className:"text-danger",children:c.releaseDate.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("select",{className:"form-control",...a("status"),disabled:t,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Time:"}),e.jsx("select",{className:"form-control",...a("timeId",{required:"Time is required"}),disabled:t,children:n&&n.map((g,j)=>e.jsx("option",{value:g._id,children:g.timecount},j))})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx("label",{children:"Label:"}),e.jsx("input",{type:"radio",name:"label",value:"yes",...a("label"),disabled:t,checked:d("label")==="yes"}),"YES",e.jsx("input",{type:"radio",name:"label",value:"no",...a("label"),disabled:t,checked:d("label")==="no"}),"NO"]})}),m==="yes"&&e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Files:"}),Array.from({length:x}).map((g,j)=>e.jsxs("div",{className:"mb-2",children:[e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:y=>p(j,y),disabled:t}),o[j]&&o[j].file&&e.jsx("p",{children:o[j].file.name})]},j))]})}),e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description:"}),e.jsx("textarea",{className:"form-control",rows:"3",...a("description",{required:"Description is required"}),disabled:t}),c.description&&e.jsx("p",{className:"text-danger",children:c.description.message})]})}),e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:t,children:t?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})})]})}),e.jsxs("div",{className:"p-1",children:[s&&e.jsx("p",{className:"text-success",children:s}),r&&e.jsx("p",{className:"text-danger",children:r})]})]})})}),t&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Yc=({games:t,openModal:s,handleActivateDeactivate:r,handleDelete:a})=>{const l=[{name:"No",selector:(n,d)=>d+1,sortable:!1,width:"60px"},{name:"Game ID",selector:n=>n.gameId,sortable:!0},{name:"Game Name",selector:n=>n.gameName,width:"190px",sortable:!0},{name:"Digits",width:"100px",selector:n=>n.nodigit,sortable:!0},{name:"Time",width:"100px",selector:n=>n.timeId&&n.timeId.map((d,o)=>e.jsx("span",{children:d.timecount},o)),sortable:!0},{name:"Status",width:"100px",selector:n=>e.jsx("span",{className:`badge ${n.status==="active"?"bg-success":n.status==="inactive"?"bg-danger":n.status==="coming-soon"?"bg-warning":"bg-secondary"}`,children:n.status}),sortable:!0},{name:"Publisher",selector:n=>n.publisher,sortable:!0},{name:"Release Date",selector:n=>new Date(n.releaseDate).toLocaleDateString(),sortable:!0},{name:"Action",width:"200px",selector:n=>e.jsxs("div",{className:"btn-group",children:[e.jsx(B,{to:`edit/${n._id}`,type:"button",className:"btn btn-outline-info",children:e.jsx("i",{className:"fas fa-edit"})}),n.status==="active"?e.jsx(B,{to:"#",className:"btn btn-outline-secondary",onClick:()=>s(`Are you sure you want to deactivate ${n.gameName}?`,"Deactivate Confirmation",()=>r(n._id,!0)),children:e.jsx("i",{className:"fa fa-toggle-off"})}):e.jsx(B,{to:"#",className:"btn btn-outline-primary",onClick:()=>s(`Are you sure you want to activate ${n.gameName}?`,"Activate Confirmation",()=>r(n._id,!1)),children:e.jsx("i",{className:"fas fa-toggle-on"})}),e.jsx(B,{to:"#",className:"btn btn-outline-danger delete-confirm",onClick:()=>s(`Are you sure you want to delete ${n.gameName}?`,"Delete Confirmation",()=>a(n._id)),children:e.jsx("i",{className:"fas fa-trash"})})]})}],c={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})},i=()=>{const n=t.map(p=>({"Game ID":p.gameId,"Game Name":p.gameName,"No. of Digits":p.nodigit,Status:p.status,Publisher:p.publisher,"Release Date":new Date(p.releaseDate).toLocaleDateString()})),d=te.json_to_sheet(n),o=te.book_new();te.book_append_sheet(o,d,"Games"),Me(o,"GamesList.xlsx")};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:i,children:[e.jsx("i",{className:"fas fa-file-excel"})," Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:l,data:t,...c,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})},Kc=()=>{const t=T(),{gamesLoading:s,gamesError:r,gamesMessage:a,gameDeleted:l}=D(n=>n.games);return{gamesLoading:s,gamesError:r,gamesMessage:a,gameDeleted:l,removeGame:async n=>{try{await t(Ns(n)).unwrap(),t(wa())}catch(d){console.error("Failed to delete game:",d)}},resetDeleteState:()=>{t(wa(!1))}}};function Xc(){const t=T(),[s,r]=u.useState(!1),[a,l]=u.useState(null),[c,i]=u.useState(null),{game:n,status:d}=D(p=>p.games);return{activateGame:u.useCallback(async(p,m)=>{console.log(`${m} game ${p}`),r(!0),l(null),i(null);try{const x=await t(ys({gameId:p,action:m})).unwrap();return i(`Game ${p} has been successfully ${m}d.`),x}catch(x){console.error("Error in game activation:",x),l(x.message||"Failed to update game status.")}finally{r(!1)}},[t]),loading:s,error:a,successMessage:c,game:n,status:d}}function Vc(){const{action:t}=X(),{games:s,gamesLoading:r,fetchAllGames:a}=Ht();u.useEffect(()=>{a()},[]);const{removeGame:l}=Kc(),{activateGame:c}=Xc(),[i,n]=u.useState(!1),[d,o]=u.useState(null),[p,m]=u.useState(""),[x,g]=u.useState(null),j=(h,f,b)=>{o(h),m(f),g(()=>b),n(!0)},y=()=>{n(!1),g(null)},v=async h=>{try{await l(h)}catch(f){console.error("Failed to delete game:",f)}finally{y()}},C=async(h,f)=>{const b=f?"deactivate":"activate";try{await c(h,b)}catch(w){console.error(`Failed to ${b} user:`,w)}finally{y()}};if(t==="edit")return e.jsx(zc,{});if(t==="create")return e.jsx(vn,{userType:"Game Master"});if(t==null)return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Game Master"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Game"})]}),e.jsx("div",{className:"card-body",children:e.jsx(Yc,{games:s,openModal:j,handleActivateDeactivate:C,handleDelete:v})})]})}),e.jsx(be,{show:i,onClose:y,title:p,onConfirm:x,children:d}),r&&e.jsx("div",{className:" fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Zc=()=>{const t=T(),{onlineplayers:s,onlineplayerLoading:r,onlineplayerError:a,onlineplayerMessage:l}=D(c=>c.onlinePlayer);return u.useEffect(()=>{t(at())},[t]),{onlineplayers:s,onlineplayerLoading:r,onlineplayerError:a,onlineplayerMessage:l}},Jc=({users:t})=>{const s=[{name:"No",selector:(a,l)=>l+1,sortable:!1,width:"60px"},{name:"User Name",width:"125px",selector:a=>e.jsx("div",{className:"w-100 d-flex flex-row justify-content-between align-items-center",children:e.jsx(B,{to:"#",className:"text-decoration-none",children:a.username})}),sortable:!0},{name:"Points",selector:a=>parseFloat(a.points).toFixed(2),sortable:!0},{name:"Play",selector:a=>parseFloat(a.playPoints).toFixed(2),sortable:!0},{name:"Win",selector:a=>parseFloat(a.winPoints).toFixed(2),sortable:!0},{name:"Claim",selector:a=>parseFloat(a.claimPoints).toFixed(2),sortable:!0},{name:"End",selector:a=>parseFloat(a.endPoints).toFixed(2),sortable:!0},{name:"Is Online",width:"100px",selector:a=>e.jsx("span",{className:a.isOnline?"badge badge-success":"badge badge-danger",children:a.isOnline?"Online":"Offline"}),sortable:!0},{name:"Last Login",selector:a=>a.lastLogin,width:"190px",sortable:!0}],r={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:s,data:t,...r,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Fe(){const{onlineplayers:t,onlineplayerLoading:s}=Zc();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Online Players"}),e.jsx(Jc,{users:t})]})})}),s&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Qc=({data:t})=>{const s=[{name:"No",selector:(a,l)=>l+1,width:"60px",sortable:!1},{name:"TicketID",selector:a=>a.ticketId,width:"120px",sortable:!1},{name:"Username",selector:a=>e.jsxs("div",{className:"d-flex align-items-center",children:[a.username,e.jsx("i",{className:"fa fa-eye ml-2 text-primary"})]}),sortable:!0},{name:"Game ID",selector:a=>a.gameId,sortable:!0},{name:"Time",selector:a=>e.jsxs("div",{children:[a.timeopen,"  ",a.timeclose]}),sortable:!0},{name:"Play Points",selector:a=>a.playpoints,sortable:!0},{name:"Win Points",selector:a=>a.winpoints,sortable:!0},{name:"Result",selector:a=>a.resultNo||"Pending",sortable:!0},{name:"Claim Date",width:"250px",selector:a=>Yn(a.claimdate).format("YYYY-MM-DD HH:mm:ss"),sortable:!0}],r={table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{backgroundColor:"#f8f9fa",fontWeight:"bold",borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},rows:{style:{minHeight:"50px"}},cells:{style:{borderRight:"1px solid #dee2e6"}}};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{title:"Game History",columns:s,data:t,pagination:!0,highlightOnHover:!0,responsive:!0,customStyles:r,sortIcon:e.jsx("i",{className:"fa fa-sort"}),noDataComponent:"No history found for this game."})})})};function ye(){const[t,s]=u.useState(!1),[r,a]=u.useState(null),[l,c]=u.useState(""),[i,n]=u.useState(null),{percentagelist:d,historyUsers:o}=ct(),[p,m]=u.useState(""),[x,g]=u.useState([]);u.useEffect(()=>{j()},[p]);async function j(){var y;try{const v=await Ie.get(`/history/gamehistory?gameId=${p}`);g(((y=v.data)==null?void 0:y.data)||[])}catch(v){console.error("Failed to fetch game history:",v)}}return e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Bet List"}),e.jsxs("div",{className:"form-group d-flex flex-wrap",children:[e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select Game :"})}),e.jsx("div",{className:"d-flex",children:e.jsxs("select",{id:"game_type",className:"js-example-basic-single w-100",onChange:y=>m(y.target.value),children:[e.jsx("option",{value:"",defaultValue:"",children:"--Select Game--"}),d&&d.map((y,v)=>e.jsx("option",{value:y.gameId,children:y.gameName},v))]})})]}),e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select User :"})}),e.jsx("div",{className:"d-flex",children:e.jsxs("select",{id:"user_id",className:"js-example-basic-single w-100",children:[e.jsx("option",{value:"",children:"--Select User--"}),o&&o.map((y,v)=>e.jsx("option",{value:y._id,children:y.username},v))]})})]}),e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select Date Range :"})}),e.jsx("div",{className:"d-flex",children:e.jsxs("select",{name:"searchlimit",id:"searchlimit",className:"js-example-basic-single w-100",children:[e.jsx("option",{value:"",selected:"selected",defaultValue:"",children:"Select Date Range"}),e.jsx("option",{value:"1",children:"Today"}),e.jsx("option",{value:"2",children:"Yesterday"}),e.jsx("option",{value:"3",children:"This Week"}),e.jsx("option",{value:"4",children:"Last Week"}),e.jsx("option",{value:"5",children:"This Month"}),e.jsx("option",{value:"6",children:"Last Month"})]})})]}),e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select Date :"})}),e.jsx("div",{className:"d-flex",children:e.jsx("div",{className:"input-group ",children:e.jsx("input",{type:"date",className:"form-control",name:"to",id:"to"})})})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsx(Qc,{data:x})})]})})})})}const Wc=()=>{const t=T(),{id:s,percentagelist:r,percentageMessage:a,percentageLoading:l}=ct(),{register:c,handleSubmit:i,setValue:n,getValues:d,formState:{isSubmitting:o}}=Z(),[p,m]=u.useState(null),[x,g]=u.useState({}),[j,y]=u.useState(null),[v,C]=u.useState(null);return u.useEffect(()=>{r&&r.length>0&&r.forEach(b=>{n(`winPercentages.${b.id}`,b.winpercentage||"")})},[r,n]),{register:c,handleSubmit:i,isSubmitting:o,winPercentageloading:p,percentagelist:r,percentageLoading:l,changedValues:x,handleInputChange:(b,w)=>{g(A=>({...A,[b]:w}))},getValues:d,percentageSuccess:v,percentageError:j,updateChangedPercentages:async()=>{var b;if(m(!0),Object.keys(x).length===0){m(!1);return}try{const A={updates:Object.entries(x).map(([O,G])=>({id:O,winpercentage:isNaN(Number(G))?0:Number(G)}))},I=await t(Ur({id:s,data:A})),M=((b=I==null?void 0:I.payload)==null?void 0:b.message)||(I==null?void 0:I.message)||a||"Updated successfully";C(M),y(null),g({}),setTimeout(()=>{C(null)},800)}catch(w){y(w.message||"An error occurred"),C(null),setTimeout(()=>{y(null)},800)}finally{m(!1)}}}};function Ge(){const{register:t,handleSubmit:s,isSubmitting:r,winPercemtageloading:a,percentagelist:l,percentageLoading:c,changedValues:i,handleInputChange:n,percentageSuccess:d,percentageError:o,updateChangedPercentages:p}=Wc();return e.jsxs("form",{onSubmit:s(p),children:[" ",e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-xl font-bold",children:"Percentages"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"col-md-12 d-flex mb-4",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No."}),e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Game"}),e.jsx("th",{children:"Percentage"})]})}),e.jsx("tbody",{children:l&&l.length>0?l.map((m,x)=>e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsx("td",{style:{color:"darkcyan"},children:m.username}),e.jsx("td",{style:{color:"slateblue"},children:m.gameName}),e.jsx("td",{children:e.jsx("input",{type:"number",...t(`winPercentages.${m.id}`,{min:1}),className:"form-control",autoComplete:"off",autoFocus:x===0,onChange:g=>n(m.id,g.target.value)})})]},`${m.gameId}-${x}`)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",children:"No games available"})})})]})})}),o&&e.jsx("div",{className:"alert alert-danger",children:o.message||o}),d&&e.jsx("div",{className:"alert alert-success",children:d.message||d}),e.jsx("div",{className:"w-full flex justify-end mt-4 pr-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary px-6 py-2 text-white rounded-lg shadow-md",disabled:r||Object.keys(i).length===0,children:r?"Updating...":"Set Percentage"})})]})]})})}),(a||c)&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const ed=({data:t,startDate:s,endDate:r})=>{const a=[{name:"No",selector:(d,o)=>o+1,sortable:!1,width:"60px"},{name:"ID",selector:d=>e.jsxs("a",{href:`?role=${d.role}&id=${d.id}&startDate=${s}&endDate=${r}`,children:[d.username," ",e.jsx("i",{className:"fa fa-eye",style:{color:"blue"}})]}),width:"150px",sortable:!0},{name:"Play Points",selector:d=>d.playPoints,width:"150px",sortable:!0},{name:"Win Points",selector:d=>d.winPoints,sortable:!0},{name:"End Points",selector:d=>d.endPoints,sortable:!0},{name:"Super Commission",selector:d=>d.supercom,sortable:!0},{name:"Areamanager Commission",selector:d=>d.distcom,sortable:!0},{name:"Master Commission",selector:d=>d.retailcom,sortable:!0},{name:"Net",selector:d=>d.net,sortable:!0}],c=(()=>{let d={playPoints:0,winPoints:0,endPoints:0,supercom:0,distcom:0,retailercom:0,net:0};return t.forEach(o=>{d.playPoints+=o.playPoints||0,d.winPoints+=o.winPoints||0,d.endPoints+=o.endPoints||0,d.supercom+=o.supercom||0,d.distcom+=o.distcom||0,d.retailercom+=o.retailcom||0,d.net+=o.net||0}),d})(),i=()=>{const d=t.map(m=>({UserName:m.username,"Play Points":m.playPoints,"Win Points":m.winPoints,"End Points":m.endPoints,"Super Commission":m.supercom,"Distributor Commission":m.distcom,"Retailer Commission":m.retailcom,Net:m.net})),o=te.json_to_sheet(d),p=te.book_new();te.book_append_sheet(p,o,"Turnover Report"),Me(p,"TurnoverReport.xlsx")},n=()=>e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{children:e.jsx("strong",{children:c.playPoints})}),e.jsx("td",{children:e.jsx("strong",{children:c.winPoints})}),e.jsx("td",{children:e.jsx("strong",{children:c.endPoints})}),e.jsx("td",{children:e.jsx("strong",{children:c.supercom})}),e.jsx("td",{children:e.jsx("strong",{children:c.distcom})}),e.jsx("td",{children:e.jsx("strong",{children:c.retailercom})}),e.jsx("td",{children:e.jsx("strong",{children:c.net})})]});return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"flex flex-row gap-2 mb-2",children:[e.jsxs("button",{className:"btn btn-secondary text-white",onClick:()=>window.history.back(),children:[e.jsx("i",{className:"fa fa-arrow-left"})," Back"]}),e.jsxs("button",{className:"btn btn-primary",onClick:i,children:[e.jsx("i",{className:"fas fa-file-excel"})," Export XLS"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:a,data:t,pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"}),customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}},footer:n()})})]})};it.setAppElement("#root");const sd={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"0%",transform:"translate(-50%, -50%)",zIndex:100}};function ze(){const t=_a(),s=new URLSearchParams(t.search),r=s.get("role"),a=s.get("id"),l=T(),[c,i]=u.useState(!1),[n,d]=u.useState(new Date),[o,p]=u.useState(new Date),[m,x]=u.useState(7),g=()=>{i(!1)},j=()=>{i(!1)},y=f=>{x(f),i(f===8),v(f)};function v(f){let b,w;const A=new Date;switch(f){case 1:b=new Date(A.getFullYear(),A.getMonth()-6,A.getDate()),w=A;break;case 2:b=new Date(A.getFullYear(),A.getMonth(),1),w=new Date(A.getFullYear(),A.getMonth()+1,0);break;case 3:b=new Date(A.getFullYear(),A.getMonth()-1,1),w=new Date(A.getFullYear(),A.getMonth(),0);break;case 4:let I=new Date(A);I.setDate(A.getDate()-7),b=new Date(I.setHours(0,0,0,0)),w=new Date(I.setHours(23,59,59,999));break;case 5:let M=new Date(A);M.setDate(A.getDate()-A.getDay()),b=new Date(M),b.setHours(0,0,0,0);let O=new Date(M);O.setDate(M.getDate()+6),w=new Date(O),w.setHours(23,59,59,999);break;case 6:let G=new Date(A);G.setDate(A.getDate()-1),b=new Date(G.setHours(0,0,0,0)),w=new Date(G.setHours(23,59,59,999));break;case 7:b=new Date(A.setHours(0,0,0,0)),w=new Date(A.setHours(23,59,59,999));break;case 8:return}b&&w&&(d(b),p(w))}u.useEffect(()=>{l(un({role:r,id:a,startDate:n,endDate:o})).unwrap()},[]);const{turnoverdata:C,roles:h}=D(f=>f.reports);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"col-md-8 col-sm-12 col-xs-12 mt-2",children:e.jsxs("div",{className:"btn-group flex-wrap",children:[e.jsx("button",{className:`btn btn-outline-info tablinks ${m===1?"active":""} `,onClick:()=>y(1),children:"Last 6 Months"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===2?"active":""} `,onClick:()=>y(2),children:"Current Month"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===3?"active":""} `,onClick:()=>y(3),children:"Last Month"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===4?"active":""} `,onClick:()=>y(4),children:"Last Week"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===5?"active":""} `,onClick:()=>y(5),children:"Current Week"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===6?"active":""} `,onClick:()=>y(6),children:"Yesterday"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===7?"active":""} `,onClick:()=>y(7),children:"Today"}),e.jsx("button",{type:"button",className:`btn btn-outline-info tablinks ${m===8?"active":""} `,onClick:()=>y(8),children:"Date Range"})]})})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-12 col-xs-12 mt-2",children:e.jsxs("span",{className:"date-display",children:[n.toLocaleDateString()," - ",o.toLocaleDateString()]})})}),e.jsx("div",{className:"row bg-light",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("table",{className:"table table-bordered text-center data-table-top",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"bg-gradient-primary text-white",children:"Total PlayPoints"}),e.jsx("td",{className:"bg-gradient-danger text-white",children:"Total WinPoints"}),e.jsx("td",{className:"bg-gradient-info text-white",children:"End Point"}),e.jsx("td",{className:"bg-gradient-warning text-white",children:"Total Commission"}),e.jsx("td",{className:"bg-gradient-info text-white",children:"Net"})]})}),e.jsx("tbody",{children:C&&C.length>0&&(()=>{let f=0,b=0,w=0,A=0,I=0;return C.forEach(M=>{f+=parseFloat(M.playPoints)||0,b+=parseFloat(M.winPoints)||0,A+=parseFloat(M.supercom)+parseFloat(M.distcom)+parseFloat(M.retailcom)}),w=f-b,I=w-A,e.jsxs("tr",{children:[e.jsx("td",{children:f.toFixed(2)}),e.jsx("td",{children:b.toFixed(2)}),e.jsx("td",{children:w.toFixed(2)}),e.jsx("td",{children:A.toFixed(2)}),e.jsx("td",{children:I.toFixed(2)})]})})()})]})})})]}),e.jsxs("div",{className:"row m-2",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h4",{className:"text-uppercase font-bold",children:[h==="superadmin"?"admin":h==="admin"?"superareamanager":h==="superareamanager"?"areamanager":h==="areamanager"?"master":"","  TurnOver Report"]})}),e.jsx("div",{className:"card-body",children:e.jsx(ed,{data:C,startDate:n,endDate:o})})]})]})}),e.jsxs(it,{isOpen:c,onRequestClose:g,style:sd,contentLabel:"Example Modal",children:[e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Game Summary"}),e.jsx("button",{className:"text-2xl",onClick:g,children:e.jsx("span",{"aria-hidden":"true",children:"X"})})]}),e.jsx("div",{children:e.jsx("table",{className:"table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"From Date"}),e.jsx("td",{children:e.jsx("input",{type:"date",value:n.toISOString().slice(0,10),onChange:f=>d(new Date(f.target.value))})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"To Date:"}),e.jsx("td",{children:e.jsx("input",{type:"date",value:o.toISOString().slice(0,10),onChange:f=>p(new Date(f.target.value))})})]}),e.jsxs("tr",{align:"right",children:[e.jsx("td",{children:e.jsx("button",{className:"text-xl",onClick:g,children:"Close"})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-primary",onClick:j,children:"Get Summary"})})]})]})})})]})]})}const rd=({data:t})=>{const s=[{name:"No",selector:(l,c)=>c+1,sortable:!1,width:"60px"},{name:"Transaction ID",selector:l=>l._id,sortable:!0,width:"100px"},{name:"User",selector:l=>{var c;return(c=l.userId)==null?void 0:c.username},sortable:!0,width:"150px"},{name:"Recipient",selector:l=>{var c;return(c=l.toUserId)==null?void 0:c.username},sortable:!0,width:"150px"},{name:"Credit",selector:l=>l.amount>0?l.amount:0,sortable:!0},{name:"Debit",selector:l=>l.amount<0?l.amount:0,sortable:!0},{name:"Transaction Message",selector:l=>l.transactionMessage,sortable:!0,width:"350px",style:{wordWrap:"break-word",whiteSpace:"normal",overflowWrap:"break-word"}},{name:"Status",selector:l=>e.jsx("span",{className:`badge ${l.status==="completed"?"bg-success":"bg-danger"}`,children:l.status}),sortable:!0},{name:"Created Date",selector:l=>new Date(l.createdAt).toLocaleDateString(),sortable:!0}],r={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})},a=()=>{const l=t.map(n=>{var d,o;return{"Transaction ID":n._id,User:(d=n.userId[0])==null?void 0:d.username,Recipient:(o=n.toUserId[0])==null?void 0:o.username,Credit:n.transactionType==="transfer"?n.amount:0,Debit:n.transactionType==="generated"?n.amount:0,"New Balance":n.newBalance,"Transaction Message":n.transactionMessage,Status:n.status,"Created Date":new Date(n.createdAt).toLocaleDateString()}}),c=te.json_to_sheet(l),i=te.book_new();te.book_append_sheet(i,c,"Transactions"),Me(i,"TransactionsList.xlsx")};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:a,children:[e.jsx("i",{className:"fas fa-file-excel"})," Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:s,data:t,...r,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})};function He(){const t=T();u.useEffect(()=>{t(mn())},[t]);const{allusers:s,transactionData:r}=D(m=>m.reports),[a,l]=u.useState(""),[c,i]=u.useState(""),[n,d]=u.useState(new Date),o=m=>{l(m.target.value)},p=async m=>{m.preventDefault();const x=m.target.value;i(x),t(await Gt({status:a,userId:x,date:n,type:"single"})).unwrap()};return u.useEffect(()=>{t(Gt({status:a,userId:"",date:n,type:"all"})).unwrap()},[n]),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-flex justify-content-between mb-2",children:e.jsx("b",{children:"Transaction Report"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-group flex flex-wrap",children:[e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select Date :"})}),e.jsx("div",{className:"d-flex",children:e.jsx("div",{className:"input-group date datepicker",id:"datePickerExample1",children:e.jsx("input",{type:"date",className:"form-control",name:"to",id:"to",value:n.toISOString().slice(0,10),onChange:m=>d(new Date(m.target.value))})})})]}),e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Filter :"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{id:"status",className:"form-control mr-2",style:{width:"200px"},value:a,onChange:o,children:[e.jsx("option",{value:"",children:"--Select Transaction Type--"}),"  ",e.jsx("option",{value:"1",children:"Transfer"}),e.jsx("option",{value:"2",children:"Generated"})]}),e.jsxs("select",{className:"form-control",style:{width:"200px"},value:c,onChange:m=>p(m),children:[e.jsx("option",{value:"",children:"--Select User--"}),s&&s.map((m,x)=>e.jsx("option",{value:m._id,children:m.username},x))]})]})]})]}),e.jsx(rd,{data:r})]})]})})})}const td=({data:t,role:s})=>{const r=s?t.filter(c=>c.role===s):t,a=[{name:"No",selector:(c,i)=>i+1,sortable:!1,width:"60px"},{name:"Username",selector:c=>c.username,width:"140px",sortable:!0},{name:"Role",selector:c=>c.role,sortable:!0},{name:"Percentage",selector:c=>c.commission,sortable:!0},{name:"Total Commission",selector:c=>parseFloat(c.totalcommission,2)*parseFloat(c.commission,2)/100,sortable:!0}],l={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:a,data:r,...l,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Ye(){const t=T(),[s,r]=u.useState(null);u.useEffect(()=>{t(hn())},[s]);const{commissionData:a}=D(c=>c.reports),{authUser:l}=D(c=>c.auth);return e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-flex justify-content-between mb-2",children:e.jsx("b",{children:"Pending Commission"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select Role :"})}),e.jsx("div",{className:"d-flex",children:e.jsxs("select",{id:"role",className:"js-example-basic-single w-100",style:{width:"200px"},name:"role",onChange:function(i){r(i.target.value)},children:[e.jsx("option",{value:"",children:"--Select Role--"}),l&&(l.role==="superadmin"||l.role==="admin")?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"superdistributor",children:"SuperDistributor"}),e.jsx("option",{value:"distributor",children:"Distributor"}),e.jsx("option",{value:"retailer",children:"Retailer"}),e.jsx("option",{value:"user",children:"User"})]}):l&&l.role==="superdistributor"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"distributor",children:"Distributor"}),e.jsx("option",{value:"retailer",children:"Retailer"}),e.jsx("option",{value:"user",children:"User"})]}):l&&l.role==="distributor"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"retailer",children:"Retailer"}),e.jsx("option",{value:"user",children:"User"})]}):l&&l.role==="retailer"?e.jsx("option",{value:"user",children:"User"}):null]})})]})}),e.jsx(td,{data:a,role:s})]})]})})})}const ad=({data:t,startDate:s,endDate:r})=>{const a=[{name:"No",selector:(i,n)=>n+1,sortable:!1,width:"60px"},{name:"Game ID",selector:i=>i.gameId,sortable:!0},{name:"Game Name",selector:i=>i.gameName,sortable:!0,width:"150px"},{name:"Username",selector:i=>i.username,sortable:!0},{name:"Commission Amount",selector:i=>i.totalpoints*i.winpercentage/100,sortable:!0},{name:"Total Points",selector:i=>i.totalpoints,sortable:!0},{name:"Total Win Points",selector:i=>i.totalwinpoints,sortable:!0}],l={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})},c=()=>{const i=t.map(o=>({"Game Name":o.gameName,Username:o.username,"Game ID":o.gameId,"No. of Digits":o.nofDigit,"Win Percentage":o.winpercentage,"Total Points":o.totalpoints,"Total Win Points":o.totalwinpoints})),n=te.json_to_sheet(i),d=te.book_new();te.book_append_sheet(d,n,"AdminCommissionData"),Me(d,"AdminCommissionData.xlsx")};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("button",{className:"btn btn-primary mb-3",onClick:c,children:[e.jsx("i",{className:"fas fa-file-excel"})," Excel"]}),e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:a,data:t,...l,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})]})};it.setAppElement("#root");const nd={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"0%",transform:"translate(-50%, -50%)",zIndex:100}};function ka(){const t=_a(),s=new URLSearchParams(t.search),r=s.get("role"),a=s.get("id"),l=T(),[c,i]=u.useState(!1),[n,d]=u.useState(new Date),[o,p]=u.useState(new Date),[m,x]=u.useState(7),g=()=>{i(!1)},j=()=>{i(!1)},y=f=>{x(f),i(f===8),v(f)};function v(f){let b,w;const A=new Date;switch(f){case 1:b=new Date(A.getFullYear(),A.getMonth()-6,A.getDate()),w=A;break;case 2:b=new Date(A.getFullYear(),A.getMonth(),1),w=new Date(A.getFullYear(),A.getMonth()+1,0);break;case 3:b=new Date(A.getFullYear(),A.getMonth()-1,1),w=new Date(A.getFullYear(),A.getMonth(),0);break;case 4:let I=new Date(A);I.setDate(A.getDate()-7),b=new Date(I.setHours(0,0,0,0)),w=new Date(I.setHours(23,59,59,999));break;case 5:let M=new Date(A);M.setDate(A.getDate()-A.getDay()),b=new Date(M),b.setHours(0,0,0,0);let O=new Date(M);O.setDate(M.getDate()+6),w=new Date(O),w.setHours(23,59,59,999);break;case 6:let G=new Date(A);G.setDate(A.getDate()-1),b=new Date(G.setHours(0,0,0,0)),w=new Date(G.setHours(23,59,59,999));break;case 7:b=new Date(A.setHours(0,0,0,0)),w=new Date(A.setHours(23,59,59,999));break;case 8:return}b&&w&&(d(b),p(w))}u.useEffect(()=>{l(xn({role:r,id:a,startDate:n,endDate:o})).unwrap()},[]);const{admincommissiondata:C,roles:h}=D(f=>f.reports);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"col-md-8 col-sm-12 col-xs-12 mt-2",children:e.jsxs("div",{className:"btn-group flex-wrap",children:[e.jsx("button",{className:`btn btn-outline-info tablinks ${m===1?"active":""} `,onClick:()=>y(1),children:"Last 6 Months"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===2?"active":""} `,onClick:()=>y(2),children:"Current Month"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===3?"active":""} `,onClick:()=>y(3),children:"Last Month"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===4?"active":""} `,onClick:()=>y(4),children:"Last Week"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===5?"active":""} `,onClick:()=>y(5),children:"Current Week"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===6?"active":""} `,onClick:()=>y(6),children:"Yesterday"}),e.jsx("button",{className:`btn btn-outline-info tablinks ${m===7?"active":""} `,onClick:()=>y(7),children:"Today"}),e.jsx("button",{type:"button",className:`btn btn-outline-info tablinks ${m===8?"active":""} `,onClick:()=>y(8),children:"Date Range"})]})})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-12 col-xs-12 mt-2",children:e.jsxs("span",{className:"date-display",children:[n.toLocaleDateString()," - ",o.toLocaleDateString()]})})}),e.jsx("div",{className:"row bg-light",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("table",{className:"table table-bordered text-center data-table-top",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"bg-gradient-primary text-white",children:"Total Commission Point"}),e.jsx("td",{className:"bg-gradient-danger text-white",children:"Total Bet Point"}),e.jsx("td",{className:"bg-gradient-info text-white",children:"Total Won Point"})]})}),e.jsx("tbody",{children:C&&C.length>0&&(()=>{let f=0,b=0,w=0;return C.forEach(A=>{f+=parseFloat(A.totalpoints)||0,b+=parseFloat(A.totalwinpoints)||0,w+=f*parseFloat(A.winpercentage)/100}),e.jsxs("tr",{children:[e.jsx("td",{children:w.toFixed(2)}),e.jsx("td",{children:f.toFixed(2)}),e.jsx("td",{children:b.toFixed(2)})]})})()})]})})})]}),e.jsxs("div",{className:"row m-2",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-uppercase font-bold",children:"Admin Commission Report"})}),e.jsx("div",{className:"card-body",children:e.jsx(ad,{data:C,startDate:n,endDate:o})})]})]})}),e.jsxs(it,{isOpen:c,onRequestClose:g,style:nd,contentLabel:"Example Modal",children:[e.jsxs("div",{className:"flex flex-row justify-between ",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Game Summary"}),e.jsx("button",{className:"text-2xl",onClick:g,children:e.jsx("span",{"aria-hidden":"true",children:"X"})})]}),e.jsx("div",{children:e.jsx("table",{className:"table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"From Date"}),e.jsx("td",{children:e.jsx("input",{type:"date",value:n.toISOString().slice(0,10),onChange:f=>d(new Date(f.target.value))})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"To Date:"}),e.jsx("td",{children:e.jsx("input",{type:"date",value:o.toISOString().slice(0,10),onChange:f=>p(new Date(f.target.value))})})]}),e.jsxs("tr",{align:"right",children:[e.jsx("td",{children:e.jsx("button",{className:"text-xl",onClick:g,children:"Close"})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-primary",onClick:j,children:"Get Summary"})})]})]})})})]})]})}const ld=()=>{const t=T(),{logs:s,log:r,logloading:a,logerror:l}=D(p=>p.logs),c=()=>t(Pr()),i=p=>t(ol(p)),n=p=>t(ul(p)),d=p=>t(ml(p)),o=()=>t(hl());return u.useEffect(()=>{c()},[t]),{logs:s,log:r,logerror:l,logloading:a,getAllLog:c,getUserLogs:i,getLogById:n,logActivity:d,getActivityLogs:o}},id=({logs:t})=>{const[s,r]=u.useState(""),[a,l]=u.useState(""),c=t.filter(o=>{const p=a?o.createdAt.includes(a):!0,m=o.subject.toLowerCase().includes(s.toLowerCase())||o.username.toLowerCase().includes(s.toLowerCase());return p&&m}),i=[{name:"No",selector:(o,p)=>p+1,sortable:!0,width:"70px"},{name:"Username",selector:o=>o.username||"N/A",sortable:!0,width:"120px"},{name:"Subject",selector:o=>o.subject||"N/A",sortable:!0,width:"320px"},{name:"URL",selector:o=>o.requestUrl||"N/A",sortable:!1},{name:"Method",selector:o=>o.method||"N/A",sortable:!0,width:"100px"},{name:"IP Address",selector:o=>o.ipAddress||"N/A",sortable:!0,width:"130px"},{name:"Created At",selector:o=>o.createdAt?new Date(o.createdAt).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"N/A",sortable:!0}],n=[{label:"No",key:"index"},{label:"Username",key:"username"},{label:"Subject",key:"subject"},{label:"URL",key:"requestUrl"},{label:"Method",key:"method"},{label:"IP Address",key:"ipAddress"},{label:"Created At",key:"createdAt"}],d=c.map((o,p)=>({index:p+1,username:o.username||"N/A",subject:o.subject||"N/A",requestUrl:o.requestUrl||"N/A",method:o.method||"N/A",ipAddress:o.ipAddress==="::1"?"127.0.0.1":o.ipAddress||"N/A",createdAt:o.createdAt?new Date(o.createdAt).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"N/A"}));return e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Log Activities"}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsxs("div",{className:"mr-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Select Date:"})}),e.jsx("input",{type:"date",className:"form-control",value:a,onChange:o=>l(o.target.value)})]}),e.jsxs("div",{className:"ml-2",children:[e.jsx("label",{children:e.jsx("strong",{children:"Search:"})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by username or subject",value:s,onChange:o=>r(o.target.value)})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Kn,{data:d,headers:n,filename:"logs.csv",children:e.jsx("button",{className:"btn btn-primary",children:"Export CSV"})})}),e.jsx(oe,{columns:i,data:c,pagination:!0,highlightOnHover:!0,responsive:!0,striped:!0,noHeader:!0}),e.jsxs("div",{className:"dataTables_info mt-2",children:["Showing ",c.length," of ",t.length," entries"]})]})})};function Ke(){const{logs:t,logloading:s}=ld();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsx(id,{logs:t})}),s&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Xe(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Admin Detail"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"exampleInputUsername2",className:"control-label",children:"Username"}),e.jsx("input",{type:"text",className:"form-control",readOnly:"",id:"exampleInputUsername2",name:"user_name",value:"admin"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"control-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",readOnly:"",id:"exampleInputEmail2",name:"email",value:"admin@gmail.com",placeholder:"Email"})]})})]})]})})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-6 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Change Password"}),e.jsxs("form",{method:"post",action:"ch_profile",encType:"multipart/form-data",children:[e.jsx("input",{type:"hidden",name:"_token",value:"6FW3yn1jblSSOhv8rgILM71bqXKFPvNpGyyvxtod"}),"          ",e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"exampleInputUsername2",className:"control-label",children:"Old Password"}),e.jsx("input",{className:"form-control",type:"text",name:"opass",placeholder:"Enter Your old password",value:""})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"control-label",children:"New Password"}),e.jsx("input",{className:"form-control",type:"text",name:"npass",placeholder:"Enter Your new password",value:""})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"control-label",children:"Confirm Password"}),e.jsx("input",{className:"form-control",type:"text",name:"cpass",placeholder:"Enter Your confirm password",value:""})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"row",gap:"5px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary ",children:"Change Password"}),e.jsx("button",{className:"btn btn-light",children:"Cancel"})]})})})]})]})})})})]})}const cd=t=>{const s=T(),{superdistributor:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i}=D(d=>d.superdistributor),n=async d=>{await s(zs(d)).unwrap()};return u.useEffect(()=>{t&&n(t)},[t]),{superdistributor:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i,fetchSuperDistributorChildren:n}};function dd(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.superdistributor),o=u.useCallback(async(m,x,g)=>{a(!0),c(null),n(null);try{const j=await s(Vs({userId:m,adminId:x,action:g})).unwrap();return n(`User ${m} has been successfully ${g}d.`),j}catch(j){const y=d||j.message||"Failed to update user status.";c(y)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateSuperDistributors:o,handleActivateDeactivate:async(m,x,g)=>{const j=g?"deactivate":"activate";try{await o(m,x,j)}catch(y){console.error(`Failed to ${j} user:`,y)}finally{t()}},stateloading:r,errorSuperistributors:l,successSuperDistributorsMessage:i}}const od=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.superdistributor),o=u.useCallback(async(m,x)=>{a(!0);try{await s(Zs({userId:m,adminId:x})).unwrap(),a(!1),n("SuperDistributors deleted successfully.")}catch(g){a(!1);const j=d||g.message||"Failed to delete SuperDistributors.";c(j)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async(m,x)=>{try{await o(m,x)}catch(g){console.error(`Failed to ${m} user:`,g)}finally{t()}},deleteloading:r,errorDeleteSuperDistributors:l,successDeleteSuperDistributorsMessage:i,childrenError:d}},ud=t=>{const s=T(),r=ae(),{superdistributors:a}=ms(),[l,c]=u.useState(null),[i,n]=u.useState(!1),[d,o]=u.useState(null),{register:p,handleSubmit:m,setValue:x,reset:g,formState:{errors:j}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[y,v]=u.useState(""),[C,h]=u.useState(""),[f,b]=u.useState(""),w=u.useMemo(()=>ne.getAllCountries(),[]),A=u.useMemo(()=>y?le.getStatesOfCountry(y):[],[y]),I=u.useMemo(()=>y&&C?ie.getCitiesOfState(y,C):[],[y,C]),M=P=>{v(P),h(""),b(""),x("country",P),x("state",""),x("city","")},O=P=>{h(P),b(""),x("state",P),x("city","")},G=P=>{b(P),x("city",P)},R=async P=>{var H,_;n(!0);const z=t==null?void 0:t._id;try{await s(Hs({childAdminData:P,parentAdminId:z})).unwrap(),c("User created successfully!"),setTimeout(()=>r(-1),1e3),g()}catch(S){const E=((_=(H=S==null?void 0:S.response)==null?void 0:H.data)==null?void 0:_.message)||(S==null?void 0:S.message)||"Failed to create superdistributors.";o(E)}finally{n(!1)}};return u.useEffect(()=>{if(l||d){const P=setTimeout(()=>{c(null),o(null)},2e3);return()=>clearTimeout(P)}},[l,d]),{register:p,superdistributors:a,handleSubmit:m,onSubmit:R,setValue:x,reset:g,showCreateMessage:l,isCreateLoading:i,showCreateError:d,errors:j,selectedCountry:y,selectedState:C,selectedCity:f,handleCountryChange:M,handleStateChange:O,handleCityChange:G,countries:w,states:A,cities:I}};function md({adminParent:t}){const{register:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=ud(t),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Area Manager"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),n.commission&&e.jsx("p",{className:"text-danger",children:n.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:!0}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),e.jsx("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.username},t==null?void 0:t._id),e.jsx("option",{value:"",disabled:!0,children:"No superSuperDistributorss available"})]})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const hd=({any:t,id:s})=>{const r=T(),{distributor:a}=ut(s),{superdistributors:l}=ms(),[c,i]=u.useState(null),[n,d]=u.useState(!1),[o,p]=u.useState(null),{childrenError:m}=D(E=>E.superdistributor),{register:x,watch:g,handleSubmit:j,reset:y,formState:{errors:v},setValue:C,getValues:h}=Z(),[f,b]=u.useState(""),[w,A]=u.useState(""),[I,M]=u.useState(""),O=u.useMemo(()=>ne.getAllCountries(),[]),G=u.useMemo(()=>f?le.getStatesOfCountry(f):[],[f]),R=u.useMemo(()=>f&&w?ie.getCitiesOfState(f,w):[],[f,w]),P=E=>{b(E),A(""),M(""),C("country",E),C("state",""),C("city","")},z=E=>{A(E),M(""),C("state",E),C("city","")},H=E=>{M(E),C("city",E)};u.useEffect(()=>{var E;if(a){const L=$=>$?new Date($).toISOString().split("T")[0]:"";y({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",dateOfBirth:L(a.dateOfBirth),country:a.country||"",state:a.state||"",city:a.city||"",refId:((E=a.refId)==null?void 0:E._id)||"",pinCode:a.pinCode||"",address:a.address||"",pin:a.pin||"",password:a.password||"",occupation:a.occupation||"",commission:a.commission??0,note:a.note??"add notes",userStatus:a.userStatus===!0?"true":"false"}),b(a.country||""),A(a.state||""),M(a.city||"")}},[a,y]);const _=()=>{const E=h(),L={};return Object.keys(E).forEach($=>{let U=E[$];if($==="dateOfBirth"){const K=a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"";(U?new Date(U).toISOString().split("T")[0]:"")!==K&&(L[$]=U);return}if($==="userStatus"){const K=U==="true";K!==a.userStatus&&(L[$]=K);return}if($==="password"){U&&U!==a[$]&&(L[$]=U);return}U!==void 0&&U!==a[$]&&(L[$]=U)}),L},S=async()=>{const E=_();if(Object.keys(E).length===0)return;d(!0);const L=s,$=t;try{await r(Ys({parentAdminId:$,superdistributorsId:L,updatedFields:E})).unwrap(),i("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(U){const K=m||U.message||"server error";p(K)}finally{d(!1)}};return u.useEffect(()=>{if(c||o){const E=setTimeout(()=>{i(null),p(null)},2e3);return()=>clearTimeout(E)}},[c,o]),{register:x,handleSubmit:j,onSubmit:S,isUpdateLoading:n,watch:g,setValue:C,superdistributors:l,showUpdateMessage:c,showUpdateError:o,errors:v,selectedCountry:f,selectedState:w,selectedCity:I,handleCountryChange:P,handleStateChange:z,handleCityChange:H,countries:O,states:G,cities:R}};function xd(){const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isUpdateLoading:c,watch:i,errors:n,superdistributors:d,showUpdateMessage:o,showUpdateError:p,selectedCountry:m,selectedState:x,selectedCity:g,handleCountryChange:j,handleStateChange:y,handleCityChange:v,countries:C,states:h,cities:f}=hd({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Area Manager"}),e.jsx("form",{onSubmit:a(l),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...r("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...r("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...r("dateOfBirth",{required:"Date of Birth is required"})}),n.dateOfBirth&&e.jsx("p",{className:"text-danger",children:n.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...r("commission",{required:!0})}),n.commission&&e.jsx("p",{className:"text-danger",children:n.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...r("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...r("country",{required:"Country is required"}),onChange:b=>j(b.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select Country--"}),C.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...r("state",{required:"State is required"}),onChange:b=>y(b.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select State--"}),h.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...r("city",{required:"City is required"}),onChange:b=>v(b.target.value),value:g,children:[e.jsx("option",{value:"",children:"--Select City--"}),f.map(b=>e.jsx("option",{value:b.name,children:b.name},b.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...r("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...r("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...r("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...r("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...r("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...r("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(d==null?void 0:d.length)>0?d.map(b=>e.jsx("option",{value:b._id,children:b.username},b._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),n.refId&&e.jsx("p",{className:"text-danger",children:n.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus",{required:"Status is required"}),value:"true",checked:i("userStatus")==="true",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus"),value:"false",checked:i("userStatus")==="false",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[o&&e.jsx("p",{className:"text-success",children:o}),p&&e.jsx("p",{className:"text-danger",children:p})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Cn=({any:t,id:s})=>{const r=T(),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i}=D(d=>d.superdistributor),n=async({any:d,id:o})=>{await r(Js({any:d,id:o})).unwrap()};return u.useEffect(()=>{t&&s&&n({any:t,id:s})},[t,s]),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i,fetchSuperDistributorByIdById:n}};function pd({any:t,id:s}){const r=T(),{childrenInfo:a}=Cn({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.superdistributor),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var A;x(!0);const f=t,b=s;if(!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const w=parseFloat(h.transferAmount);if(isNaN(w)||w<=0){j("Invalid transfer amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit transfer."),x(!1);return}try{const I={userId:(A=v[0])==null?void 0:A._id,password:h.password,transferAmount:w,toUserId:s,authUser:d};await r(Ks({parentAdminId:f,superdistributorsId:b,transferData:I})).unwrap(),await r(ue(d._id)).unwrap(),p("Credit transfer successful!"),i()}catch(I){console.error("API Error:",I);const M=y||(I==null?void 0:I.message)||"Unknown error occurred during credit transfer.";j(M)}finally{x(!1)}},childrenInfo:a,authUser:d,showCreditMessage:o,isCreditLoading:m,showCreditError:g,errors:n,credit:v}}function fd(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,childrenInfo:c,showCreditMessage:i,isCreditLoading:n,showCreditError:d,errors:o,credit:p}=pd({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Area Manager Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...r("transferAmount",{required:"Amount is required"})}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...r("password",{required:"Password is required"})}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),i&&e.jsx("div",{className:"alert alert-success",children:i}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function gd({any:t,id:s}){const r=T(),{childrenInfo:a}=Cn({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.superdistributor),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var w,A,I;if(x(!0),!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){j("Invalid adjustment amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit adjustment."),x(!1);return}const b={userId:(w=v[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:s,authUser:d};try{await r(Xs({any:t,id:s,requestData:b})).unwrap(),await r(ue(d._id)).unwrap(),p("Credit adjustment successful!"),i()}catch(M){console.error("Error during credit adjustment:",M);const O=y||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";j(O)}finally{x(!1)}},isCreditAdjustLoading:m,childrenInfo:a,authUser:d,showCreditAdjustMessage:o,showCreditAdjustError:g,errors:n,credit:v}}function jd(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isCreditAdjustLoading:c,childrenInfo:i,showCreditAdjustMessage:n,showCreditAdjustError:d,errors:o,credit:p}=gd({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Area Manager Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(i==null?void 0:i.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((i==null?void 0:i.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...r("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...r("password",{required:"Password is required"}),autoComplete:"off"}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),n&&e.jsx("div",{className:"alert alert-success",children:n}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ua(){const{action:t,any:s}=X(),{authUser:r}=D(f=>f.auth),a=r==null?void 0:r.role,{superdistributor:l,children:c,childrenLoading:i}=cd(s),[n,d]=u.useState(!1),[o,p]=u.useState(null),[m,x]=u.useState(""),[g,j]=u.useState(null),y=(f,b,w)=>{p(f),x(b),j(()=>w),d(!0)},v=()=>{d(!1),j(null)},{handleActivateDeactivate:C}=dd(v),{handleDelete:h}=od(v);return t==="edit"?e.jsx(xd,{}):t==="credittransfer"?e.jsx(fd,{}):t==="creditadjust"?e.jsx(jd,{}):t==="create"?e.jsx(md,{adminParent:l}):e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-xl-12 stretch-card",children:e.jsxs("div",{className:"row flex-grow",children:[e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-primary text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsxs("h6",{className:"card-title text-white mb-2",children:[l==null?void 0:l.role," Details"]})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"align-items-baseline",children:e.jsx("table",{className:"bg-transparent   w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Username:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Name:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]})]})})})})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-success text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title mb-1 text-white",children:"Credit"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Credit:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.walletBalance})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Commission Point:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.commission})})]})]})})]})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-danger",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"Last Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-orange-400",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"This Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})})]})}),e.jsx("div",{className:"row flex-grow",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2 text-uppercase",children:[e.jsx("b",{children:"Area Manager"}),e.jsx(B,{to:`/${a}/superareamanager/players/details/${s}/create`,className:"btn btn-primary btn-md",children:" Add Area Manager"})]}),e.jsx("div",{className:"card-body",children:e.jsx(dt,{adminId:s,userLInk:"../areamanager/players/details/",editlink:`/${a}/superareamanager/players/${s}/edit`,transferlink:`/${a}/superareamanager/players/details/${s}/credittransfer`,adjustlink:`/${a}/superareamanager/players/details/${s}/creditadjust`,superdistributers:Array.isArray(c)?c:[],openModal:y,handleActivateDeactivate:C,handleDelete:h})})]})}),e.jsx(be,{show:n,onClose:v,title:m,onConfirm:g,children:o}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const bd=t=>{const s=T(),{distributor:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i}=D(d=>d.distributor),n=async d=>{await s(nr(d)).unwrap()};return u.useEffect(()=>{t&&n(t)},[t]),{distributor:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i,fetchDistributorChildren:n}};function Nd(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.distributor),o=u.useCallback(async(m,x,g)=>{a(!0),c(null),n(null);try{const j=await s(or({userId:m,adminId:x,action:g})).unwrap();return n(`User ${m} has been successfully ${g}d.`),j}catch(j){const y=d||j.message||"Failed to update user status.";c(y)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateSuperDistributors:o,handleActivateDeactivate:async(m,x,g)=>{const j=g?"deactivate":"activate";try{await o(m,x,j)}catch(y){console.error(`Failed to ${j} user:`,y)}finally{t()}},stateloading:r,errorSuperistributors:l,successSuperDistributorsMessage:i}}const yd=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.distributor),o=u.useCallback(async(m,x)=>{a(!0);try{await s(ur({userId:m,adminId:x})).unwrap(),a(!1),n("SuperDistributors deleted successfully.")}catch(g){a(!1);const j=d||g.message||"Failed to delete SuperDistributors.";c(j)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async(m,x)=>{try{await o(m,x)}catch(g){console.error(`Failed to ${m} user:`,g)}finally{t()}},deleteloading:r,errorDeleteSuperDistributors:l,successDeleteSuperDistributorsMessage:i,childrenError:d}},vd=t=>{const s=T(),r=ae(),[a,l]=u.useState(null),[c,i]=u.useState(!1),[n,d]=u.useState(null),{register:o,handleSubmit:p,setValue:m,reset:x,formState:{errors:g}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",commission:0,note:"add notes",userStatus:!0}}),[j,y]=u.useState(""),[v,C]=u.useState(""),[h,f]=u.useState(""),b=u.useMemo(()=>ne.getAllCountries(),[]),w=u.useMemo(()=>j?le.getStatesOfCountry(j):[],[j]),A=u.useMemo(()=>j&&v?ie.getCitiesOfState(j,v):[],[j,v]),I=R=>{y(R),C(""),f(""),m("country",R),m("state",""),m("city","")},M=R=>{C(R),f(""),m("state",R),m("city","")},O=R=>{f(R),m("city",R)},G=async R=>{var z,H;i(!0);const P=t==null?void 0:t._id;try{await s(lr({childAdminData:R,parentAdminId:P})).unwrap(),l("User created successfully!"),setTimeout(()=>r(-1),1e3),x()}catch(_){const S=((H=(z=_==null?void 0:_.response)==null?void 0:z.data)==null?void 0:H.message)||(_==null?void 0:_.message)||"Failed to create superdistributors.";d(S)}finally{i(!1)}};return u.useEffect(()=>{if(a||n){const R=setTimeout(()=>{l(null),d(null)},2e3);return()=>clearTimeout(R)}},[a,n]),{register:o,adminParent:t,handleSubmit:p,onSubmit:G,setValue:m,reset:x,showCreateMessage:a,isCreateLoading:c,showCreateError:n,errors:g,selectedCountry:j,selectedState:v,selectedCity:h,handleCountryChange:I,handleStateChange:M,handleCityChange:O,countries:b,states:w,cities:A}};function Cd({adminParent:t}){const{register:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=vd(t),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Master"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...s("email",{required:"Email is required"}),autoComplete:"off"}),n.email&&e.jsx("p",{className:"text-danger",children:n.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...s("phone",{required:"Phone number is required"})}),n.phone&&e.jsx("p",{className:"text-danger",children:n.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...s("commission",{required:!0})}),n.commission&&e.jsx("p",{className:"text-danger",children:n.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"master"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...s("pinCode",{required:"PIN Code is required"})}),n.pinCode&&e.jsx("p",{className:"text-danger",children:n.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:!0}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),e.jsx("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.username},t==null?void 0:t._id),e.jsx("option",{value:"",disabled:!0,children:"No superSuperDistributorss available"})]})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Qt=({any:t,id:s})=>{console.log(t,s);const r=T(),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i}=D(d=>d.distributor),n=async({any:d,id:o})=>{await r(mr({any:d,id:o})).unwrap()};return u.useEffect(()=>{t&&s&&n({any:t,id:s})},[t,s]),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i,fetchSuperDistributorByIdById:n}},wd=({any:t,id:s})=>{const r=T(),{childrenInfo:a}=Qt({any:t,id:s}),{distributors:l}=mt(),[c,i]=u.useState(null),[n,d]=u.useState(!1),[o,p]=u.useState(null),{childrenError:m}=D(E=>E.distributor),{register:x,watch:g,handleSubmit:j,reset:y,formState:{errors:v},setValue:C,getValues:h}=Z(),[f,b]=u.useState(""),[w,A]=u.useState(""),[I,M]=u.useState(""),O=u.useMemo(()=>ne.getAllCountries(),[]),G=u.useMemo(()=>f?le.getStatesOfCountry(f):[],[f]),R=u.useMemo(()=>f&&w?ie.getCitiesOfState(f,w):[],[f,w]),P=E=>{b(E),A(""),M(""),C("country",E),C("state",""),C("city","")},z=E=>{A(E),M(""),C("state",E),C("city","")},H=E=>{M(E),C("city",E)};u.useEffect(()=>{var E;if(a){const L=$=>$?new Date($).toISOString().split("T")[0]:"";y({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",dateOfBirth:L(a.dateOfBirth),country:a.country||"",state:a.state||"",city:a.city||"",refId:((E=a.refId)==null?void 0:E._id)||"",pinCode:a.pinCode||"",address:a.address||"",pin:a.pin||"",password:a.password||"",occupation:a.occupation||"",commission:a.commission??0,note:a.note??"add notes",userStatus:a.userStatus===!0?"true":"false"}),b(a.country||""),A(a.state||""),M(a.city||"")}},[a,y]);const _=()=>{const E=h(),L={};return Object.keys(E).forEach($=>{let U=E[$];if($==="dateOfBirth"){const K=a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"";(U?new Date(U).toISOString().split("T")[0]:"")!==K&&(L[$]=U);return}if($==="userStatus"){const K=U==="true";K!==a.userStatus&&(L[$]=K);return}if($==="password"){U&&U!==a[$]&&(L[$]=U);return}U!==void 0&&U!==a[$]&&(L[$]=U)}),L},S=async()=>{const E=_();if(Object.keys(E).length===0)return;d(!0);const L=s,$=t;try{await r(ir({parentAdminId:$,superdistributorsId:L,updatedFields:E})).unwrap(),i("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(U){const K=m||U.message||"server error";p(K)}finally{d(!1)}};return u.useEffect(()=>{if(c||o){const E=setTimeout(()=>{i(null),p(null)},2e3);return()=>clearTimeout(E)}},[c,o]),{register:x,handleSubmit:j,onSubmit:S,isUpdateLoading:n,watch:g,setValue:C,distributors:l,showUpdateMessage:c,showUpdateError:o,errors:v,selectedCountry:f,selectedState:w,selectedCity:I,handleCountryChange:P,handleStateChange:z,handleCityChange:H,countries:O,states:G,cities:R}};function Sd(){const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isUpdateLoading:c,watch:i,distributors:n,showUpdateMessage:d,showUpdateError:o,errors:p,selectedCountry:m,selectedState:x,selectedCity:g,handleCountryChange:j,handleStateChange:y,handleCityChange:v,countries:C,states:h,cities:f}=wd({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Master"}),e.jsx("form",{onSubmit:a(l),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("firstName",{required:"First Name is required"}),autoComplete:"off"}),p.firstName&&e.jsx("p",{className:"text-danger",children:p.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("lastName",{required:"Last Name is required"}),autoComplete:"off"}),p.lastName&&e.jsx("p",{className:"text-danger",children:p.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",className:"form-control",...r("email",{required:"Email is required"}),autoComplete:"off"}),p.email&&e.jsx("p",{className:"text-danger",children:p.email.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone:"}),e.jsx("input",{type:"number",className:"form-control",...r("phone",{required:"Phone number is required"})}),p.phone&&e.jsx("p",{className:"text-danger",children:p.phone.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date of Birth:"}),e.jsx("input",{type:"date",className:"form-control",...r("dateOfBirth",{required:"Date of Birth is required"})}),p.dateOfBirth&&e.jsx("p",{className:"text-danger",children:p.dateOfBirth.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...r("commission",{required:!0})}),p.commission&&e.jsx("p",{className:"text-danger",children:p.commission.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Occupation:"}),e.jsx("input",{type:"text",className:"form-control",...r("occupation")})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...r("country",{required:"Country is required"}),onChange:b=>j(b.target.value),value:m,children:[e.jsx("option",{value:"",children:"--Select Country--"}),C.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),p.country&&e.jsx("p",{className:"text-danger",children:p.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...r("state",{required:"State is required"}),onChange:b=>y(b.target.value),value:x,children:[e.jsx("option",{value:"",children:"--Select State--"}),h.map(b=>e.jsx("option",{value:b.isoCode,children:b.name},b.isoCode))]}),p.state&&e.jsx("p",{className:"text-danger",children:p.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...r("city",{required:"City is required"}),onChange:b=>v(b.target.value),value:g,children:[e.jsx("option",{value:"",children:"--Select City--"}),f.map(b=>e.jsx("option",{value:b.name,children:b.name},b.name))]}),p.city&&e.jsx("p",{className:"text-danger",children:p.city.message})]})}),e.jsx("input",{type:"hidden",...r("role"),value:"areamanager"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...r("address",{required:"Address is required"})}),p.address&&e.jsx("p",{className:"text-danger",children:p.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN Code:"}),e.jsx("input",{type:"number",className:"form-control",...r("pinCode",{required:"PIN Code is required"})}),p.pinCode&&e.jsx("p",{className:"text-danger",children:p.pinCode.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...r("password",{required:"PIN is required"})}),p.pin&&e.jsx("p",{className:"text-danger",children:p.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...r("pin",{required:"PIN is required"})}),p.pin&&e.jsx("p",{className:"text-danger",children:p.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...r("refId",{required:"Reference is required"}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),(n==null?void 0:n.length)>0?n.map(b=>e.jsx("option",{value:b._id,children:b.username},b._id)):e.jsx("option",{value:"",disabled:!0,children:"No superadmins available"})]}),p.refId&&e.jsx("p",{className:"text-danger",children:p.refId.message})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus",{required:"Status is required"}),value:"true",checked:i("userStatus")==="true",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus"),value:"false",checked:i("userStatus")==="false",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[d&&e.jsx("p",{className:"text-success",children:d}),o&&e.jsx("p",{className:"text-danger",children:o})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ad({any:t,id:s}){const r=T(),{childrenInfo:a}=Qt({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.distributor),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var w,A,I;if(x(!0),!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){j("Invalid adjustment amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit adjustment."),x(!1);return}const b={userId:(w=v[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:s,authUser:d};try{await r(dr({any:t,id:s,requestData:b})).unwrap(),await r(ue(d._id)).unwrap(),p("Credit adjustment successful!"),i()}catch(M){console.error("Error during credit adjustment:",M);const O=y||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";j(O)}finally{x(!1)}},isCreditAdjustLoading:m,childrenInfo:a,authUser:d,showCreditAdjustMessage:o,showCreditAdjustError:g,errors:n,credit:v}}function Ld(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isCreditAdjustLoading:c,childrenInfo:i,showCreditAdjustMessage:n,showCreditAdjustError:d,errors:o,credit:p}=Ad({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Master Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(i==null?void 0:i.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((i==null?void 0:i.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...r("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...r("password",{required:"Password is required"}),autoComplete:"off"}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),n&&e.jsx("div",{className:"alert alert-success",children:n}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Ed({any:t,id:s}){const r=T(),{childrenInfo:a}=Qt({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.distributor),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var A;x(!0);const f=t,b=s;if(!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const w=parseFloat(h.transferAmount);if(isNaN(w)||w<=0){j("Invalid transfer amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit transfer."),x(!1);return}try{const I={userId:(A=v[0])==null?void 0:A._id,password:h.password,transferAmount:w,toUserId:s,authUser:d},M=await r(cr({parentdistributorId:f,superdistributorsId:b,transferData:I})).unwrap();await r(ue(d._id)).unwrap(),p("Credit transfer successful!"),i()}catch(I){console.error("API Error:",I),j(y)}finally{x(!1)}},childrenInfo:a,authUser:d,showCreditMessage:o,isCreditLoading:m,showCreditError:g,errors:n,credit:v}}function Dd(){var x;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,childrenInfo:c,showCreditMessage:i,isCreditLoading:n,showCreditError:d,errors:o,credit:p}=Ed({any:t,id:s}),m=p===void 0?"0":((x=p==null?void 0:p[0])==null?void 0:x.walletBalance)||0;return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Master Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",m.toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...r("transferAmount",{required:"Amount is required"})}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...r("password",{required:"Password is required"})}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),i&&e.jsx("div",{className:"alert alert-success",children:i}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})]})}),n&&e.jsx("div",{className:" fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function _t(){const{action:t,any:s}=X(),{authUser:r}=D(f=>f.auth),a=r==null?void 0:r.role,{distributor:l,children:c,childrenLoading:i}=bd(s),[n,d]=u.useState(!1),[o,p]=u.useState(null),[m,x]=u.useState(""),[g,j]=u.useState(null),y=(f,b,w)=>{p(f),x(b),j(()=>w),d(!0)},v=()=>{d(!1),j(null)},{handleActivateDeactivate:C}=Nd(v),{handleDelete:h}=yd(v);return t==="edit"?e.jsx(Sd,{}):t==="credittransfer"?e.jsx(Dd,{}):t==="creditadjust"?e.jsx(Ld,{}):t==="create"?e.jsx(Cd,{adminParent:l}):e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-xl-12 stretch-card",children:e.jsxs("div",{className:"row flex-grow",children:[e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-primary text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsxs("h6",{className:"card-title text-white mb-2",children:[l==null?void 0:l.role," Details"]})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"align-items-baseline",children:e.jsx("table",{className:"bg-transparent   w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Username:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Name:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]})]})})})})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-success text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title mb-1 text-white",children:"Credit"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Credit:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.walletBalance})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Commission Point:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.commission})})]})]})})]})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-danger",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"Last Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-orange-400",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"This Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})})]})}),e.jsx("div",{className:"row flex-grow",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2 text-uppercase",children:[e.jsx("b",{children:"Master"}),e.jsx(B,{to:`/${a}/areamanager/players/details/${s}/create`,className:"btn btn-primary btn-md",children:" Add Masters"})]}),e.jsx("div",{className:"card-body",children:e.jsx(dt,{adminId:s,userLInk:"../master/players/details/",editlink:`/${a}/areamanager/players/${s}/edit`,transferlink:`/${a}/areamanager/players/details/${s}/credittransfer`,adjustlink:`/${a}/areamanager/players/details/${s}/creditadjust`,superdistributers:Array.isArray(c)?c:[],openModal:y,handleActivateDeactivate:C,handleDelete:h})})]})}),e.jsx(be,{show:n,onClose:v,title:m,onConfirm:g,children:o}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const $d=t=>{const s=T(),{retailer:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i}=D(d=>d.retailer),n=async d=>{await s(Nr(d)).unwrap()};return u.useEffect(()=>{t&&n(t)},[t]),{retailer:r,children:a,childrenLoading:l,childrenMessage:c,childrenError:i,fetchRetailerChildren:n}};function qd(t){const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.distributor),o=u.useCallback(async(m,x,g)=>{a(!0),c(null),n(null);try{const j=await s(Sr({userId:m,adminId:x,action:g})).unwrap();return n(`User ${m} has been successfully ${g}d.`),j}catch(j){const y=d||j.message||"Failed to update user status.";c(y)}finally{a(!1)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{activateSuperDistributors:o,handleActivateDeactivate:async(m,x,g)=>{const j=g?"deactivate":"activate";try{await o(m,x,j)}catch(y){console.error(`Failed to ${j} user:`,y)}finally{t()}},stateloading:r,errorSuperistributors:l,successSuperDistributorsMessage:i}}const Md=t=>{const s=T(),[r,a]=u.useState(!1),[l,c]=u.useState(null),[i,n]=u.useState(null),{childrenError:d}=D(m=>m.retailer),o=u.useCallback(async(m,x)=>{a(!0);try{await s(Ar({userId:m,adminId:x})).unwrap(),a(!1),n("SuperDistributors deleted successfully.")}catch(g){a(!1);const j=d||g.message||"Failed to delete SuperDistributors.";c(j)}},[s]);return u.useEffect(()=>{if(i||l){const m=setTimeout(()=>{n(null),c(null)},2e3);return()=>clearTimeout(m)}},[i,l]),{handleDelete:async(m,x)=>{try{await o(m,x)}catch(g){console.error(`Failed to ${m} user:`,g)}finally{t()}},deleteloading:r,errorDeleteSuperDistributors:l,successDeleteSuperDistributorsMessage:i,childrenError:d}},Wt=({any:t,id:s})=>{const r=T(),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i}=D(d=>d.retailer),n=async({any:d,id:o})=>{await r(Lr({any:d,id:o})).unwrap()};return u.useEffect(()=>{t&&s&&n({any:t,id:s})},[t,s]),{childrenInfo:a,childrenLoading:l,childrenError:c,childrenMessage:i,fetchretailerByIdById:n}},Id=({any:t,id:s})=>{const r=T(),{childrenInfo:a}=Wt({any:t,id:s}),{retailers:l}=ht(),[c,i]=u.useState(null),[n,d]=u.useState(!1),[o,p]=u.useState(null),{childrenError:m}=D(E=>E.retailer),{register:x,watch:g,handleSubmit:j,reset:y,formState:{errors:v},setValue:C,getValues:h}=Z(),[f,b]=u.useState(""),[w,A]=u.useState(""),[I,M]=u.useState(""),O=u.useMemo(()=>ne.getAllCountries(),[]),G=u.useMemo(()=>f?le.getStatesOfCountry(f):[],[f]),R=u.useMemo(()=>f&&w?ie.getCitiesOfState(f,w):[],[f,w]),P=E=>{b(E),A(""),M(""),C("country",E),C("state",""),C("city","")},z=E=>{A(E),M(""),C("state",E),C("city","")},H=E=>{M(E),C("city",E)};u.useEffect(()=>{var E;if(a){const L=$=>$?new Date($).toISOString().split("T")[0]:"";y({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",dateOfBirth:L(a.dateOfBirth),country:a.country||"",state:a.state||"",city:a.city||"",refId:((E=a.refId)==null?void 0:E._id)||"",pinCode:a.pinCode||"",address:a.address||"",pin:a.pin||"",password:a.password||"",occupation:a.occupation||"",note:a.note??"add notes",userStatus:a.userStatus===!0?"true":"false"}),b(a.country||""),A(a.state||""),M(a.city||"")}},[a,y]);const _=()=>{const E=h(),L={};return Object.keys(E).forEach($=>{let U=E[$];if($==="dateOfBirth"){const K=a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"";(U?new Date(U).toISOString().split("T")[0]:"")!==K&&(L[$]=U);return}if($==="userStatus"){const K=U==="true";K!==a.userStatus&&(L[$]=K);return}if($==="password"){U&&U!==a[$]&&(L[$]=U);return}U!==void 0&&U!==a[$]&&(L[$]=U)}),L},S=async()=>{const E=_();if(Object.keys(E).length===0)return;d(!0);const L=s,$=t;try{await r(vr({parentAdminId:$,superdistributorsId:L,updatedFields:E})).unwrap(),i("User updated successfully!"),setTimeout(()=>window.history.back(),1e3)}catch(U){const K=m||U.message||"server error";p(K)}finally{d(!1)}};return u.useEffect(()=>{if(c||o){const E=setTimeout(()=>{i(null),p(null)},2e3);return()=>clearTimeout(E)}},[c,o]),{register:x,handleSubmit:j,onSubmit:S,isUpdateLoading:n,watch:g,setValue:C,retailers:l,showUpdateMessage:c,showUpdateError:o,errors:v,selectedCountry:f,selectedState:w,selectedCity:I,handleCountryChange:P,handleStateChange:z,handleCityChange:H,countries:O,states:G,cities:R}};function Td(){const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isUpdateLoading:c,watch:i,setValue:n,retailers:d,showUpdateMessage:o,showUpdateError:p}=Id({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Edit Player"}),e.jsx("form",{onSubmit:a(l),children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"User Name:"}),e.jsx("input",{type:"text",className:"form-control",...r("username"),defaultValue:i("username")||"",readOnly:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password:"}),e.jsx("input",{type:"text",className:"form-control",...r("password"),onChange:m=>n("password",m.target.value)})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Commission:"}),e.jsx("input",{type:"number",className:"form-control",...r("commission",{required:!0}),defaultValue:i("commission")??0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Note:"}),e.jsx("input",{type:"text",className:"form-control",...r("note",{required:!0}),defaultValue:i("note")??""})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...r("refId",{required:"Reference is required"}),defaultValue:i("refId")??"",disabled:c,children:[e.jsx("option",{value:"",children:"--Select Reference--"}),d==null?void 0:d.map((m,x)=>e.jsx("option",{value:m._id,children:m.username},x))]})]})}),e.jsx("div",{className:"col-sm-6 pt-9",children:e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"flex text-center items-center gap-[30px]",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus",{required:"Status is required"}),value:"true",checked:i("userStatus")==="true",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Active"})]}),e.jsxs("div",{className:"flex g-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",...r("userStatus"),value:"false",checked:i("userStatus")==="false",disabled:c}),e.jsx("label",{className:"form-check-label",children:"Deactive"})]})]})})}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",children:c?"Updating...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[o&&e.jsx("p",{className:"text-success",children:o}),p&&e.jsx("p",{className:"text-danger",children:p})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function kd({any:t,id:s}){const r=T(),{childrenInfo:a}=Wt({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.superdistributor),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var w,A,I;if(x(!0),!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const f=parseFloat(h.transferAmount);if(isNaN(f)||f<=0){j("Invalid adjustment amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit adjustment."),x(!1);return}const b={userId:(w=v[0])==null?void 0:w._id,password:h.password,adjustAmount:f,transactionType:h.transactionType||"credit",toUserId:s,authUser:d};try{await r(wr({any:t,id:s,requestData:b})).unwrap(),await r(ue(d._id)).unwrap(),p("Credit adjustment successful!"),i()}catch(M){console.error("Error during credit adjustment:",M);const O=y||((I=(A=M==null?void 0:M.response)==null?void 0:A.data)==null?void 0:I.message)||(M==null?void 0:M.message)||"An error occurred.";j(O)}finally{x(!1)}},isCreditAdjustLoading:m,childrenInfo:a,authUser:d,showCreditAdjustMessage:o,showCreditAdjustError:g,errors:n,credit:v}}function Ud(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,isCreditAdjustLoading:c,childrenInfo:i,showCreditAdjustMessage:n,showCreditAdjustError:d,errors:o,credit:p}=kd({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Player Credit Adjust"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(i==null?void 0:i.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Individual Credit: ",((i==null?void 0:i.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",...r("transferAmount",{required:"Amount is required",min:{value:1,message:"Amount must be greater than 0"}}),autoComplete:"off"}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",...r("password",{required:"Password is required"}),autoComplete:"off"}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-6 offset-lg-3",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})}),n&&e.jsx("div",{className:"alert alert-success",children:n}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function Pd({any:t,id:s}){const r=T(),{childrenInfo:a}=Wt({any:t,id:s}),{register:l,handleSubmit:c,reset:i,formState:{errors:n}}=Z(),{authUser:d}=D(h=>h.auth),[o,p]=u.useState(null),[m,x]=u.useState(!1),[g,j]=u.useState(null),{childrenError:y}=D(h=>h.retailer),{credit:v}=D(h=>h.credit);return u.useEffect(()=>{r(de(s))},[s]),u.useEffect(()=>{if(o||g){const h=setTimeout(()=>{p(null),j(null)},3e3);return()=>clearTimeout(h)}},[o,g]),{register:l,handleSubmit:c,onSubmit:async h=>{var A;x(!0);const f=t,b=s;if(!(d!=null&&d._id)){j("User authentication is missing. Please log in again."),x(!1);return}const w=parseFloat(h.transferAmount);if(isNaN(w)||w<=0){j("Invalid transfer amount. Please enter a valid number."),x(!1);return}if(!h.password){j("Password is required for credit transfer."),x(!1);return}try{const I={userId:(A=v[0])==null?void 0:A._id,password:h.password,transferAmount:w,toUserId:s,authUser:d};await r(Cr({parentAdminId:f,superdistributorsId:b,transferData:I})).unwrap(),await r(ue(d._id)).unwrap(),p("Credit transfer successful!"),i()}catch(I){console.error("API Error:",I);const M=y||(I==null?void 0:I.message)||"Unknown error occurred during credit transfer.";j(M)}finally{x(!1)}},childrenInfo:a,authUser:d,showCreditMessage:o,isCreditLoading:m,showCreditError:g,errors:n,credit:v}}function Rd(){var m;const{any:t,id:s}=X(),{register:r,handleSubmit:a,onSubmit:l,childrenInfo:c,showCreditMessage:i,isCreditLoading:n,showCreditError:d,errors:o,credit:p}=Pd({any:t,id:s});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{children:"Player Credit Transfer"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:a(l),children:[e.jsx("div",{className:"form-group d-flex",children:e.jsxs("div",{className:"col-sm-4 offset-lg-3",children:[e.jsxs("h4",{className:"breadcrumb bg-slate-700 text-white",children:["User: ",(c==null?void 0:c.username)||""]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Individual Credit: ",((c==null?void 0:c.walletBalance)||0).toFixed(2)]}),e.jsx("br",{}),e.jsxs("h4",{className:"breadcrumb  bg-slate-700 text-white",children:["Hierarchy Credit: ",(((m=p[0])==null?void 0:m.walletBalance)||0).toFixed(2)]})]})}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Amount to Transfer"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"number",className:"form-control",name:"transferAmount",...r("transferAmount",{required:"Amount is required"})}),o.transferAmount&&e.jsx("span",{className:"text-danger",children:o.transferAmount.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2",children:"Password"}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",...r("password",{required:"Password is required"})}),o.password&&e.jsx("span",{className:"text-danger",children:o.password.message})]})]}),e.jsxs("div",{className:"form-group d-flex",children:[e.jsx("label",{className:"col-sm-2 offset-lg-1 text-right control-label mt-2"}),e.jsxs("div",{className:"col-sm-6",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Processing...":"Credit Transfer"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"btn btn-light",children:"Cancel"})]})]})]}),i&&e.jsx("div",{className:"alert alert-success",children:i}),d&&e.jsx("div",{className:"alert alert-danger",children:d})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Od=t=>{const s=T(),r=ae(),[a,l]=u.useState(null),[c,i]=u.useState(!1),[n,d]=u.useState(null),{register:o,handleSubmit:p,setValue:m,reset:x,formState:{errors:g}}=Z({defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",country:"",state:"",city:"",refId:"",pinCode:"",address:"",pin:"",password:"",occupation:"",note:"add notes",userStatus:!0}}),[j,y]=u.useState(""),[v,C]=u.useState(""),[h,f]=u.useState(""),b=u.useMemo(()=>ne.getAllCountries(),[]),w=u.useMemo(()=>j?le.getStatesOfCountry(j):[],[j]),A=u.useMemo(()=>j&&v?ie.getCitiesOfState(j,v):[],[j,v]),I=R=>{y(R),C(""),f(""),m("country",R),m("state",""),m("city","")},M=R=>{C(R),f(""),m("state",R),m("city","")},O=R=>{f(R),m("city",R)},G=async R=>{var z,H;i(!0);const P=t==null?void 0:t._id;try{await s(yr({childAdminData:R,parentAdminId:P})).unwrap(),l("User created successfully!"),setTimeout(()=>r(-1),1e3),x()}catch(_){const S=((H=(z=_==null?void 0:_.response)==null?void 0:z.data)==null?void 0:H.message)||(_==null?void 0:_.message)||"Failed to create player.";d(S)}finally{i(!1)}};return u.useEffect(()=>{if(a||n){const R=setTimeout(()=>{l(null),d(null)},2e3);return()=>clearTimeout(R)}},[a,n]),{register:o,handleSubmit:p,onSubmit:G,setValue:m,reset:x,adminParent:t,showCreateMessage:a,isCreateLoading:c,showCreateError:n,errors:g,selectedCountry:j,selectedState:v,selectedCity:h,handleCountryChange:I,handleStateChange:M,handleCityChange:O,countries:b,states:w,cities:A}};function _d({adminParent:t}){const{register:s,handleSubmit:r,onSubmit:a,showCreateMessage:l,isCreateLoading:c,showCreateError:i,errors:n,selectedCountry:d,selectedState:o,selectedCity:p,handleCountryChange:m,handleStateChange:x,handleCityChange:g,countries:j,states:y,cities:v}=Od(t),C=ae();return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Add Player"}),e.jsx("form",{className:"forms-sample",onSubmit:r(a),encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("firstName",{required:"First Name is required"}),autoComplete:"off"}),n.firstName&&e.jsx("p",{className:"text-danger",children:n.firstName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name:"}),e.jsx("input",{type:"text",className:"form-control",...s("lastName",{required:"Last Name is required"}),autoComplete:"off"}),n.lastName&&e.jsx("p",{className:"text-danger",children:n.lastName.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country:"}),e.jsxs("select",{className:"form-control",...s("country",{required:"Country is required"}),onChange:h=>m(h.target.value),value:d,children:[e.jsx("option",{value:"",children:"--Select Country--"}),j.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.country&&e.jsx("p",{className:"text-danger",children:n.country.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"State:"}),e.jsxs("select",{className:"form-control",...s("state",{required:"State is required"}),onChange:h=>x(h.target.value),value:o,children:[e.jsx("option",{value:"",children:"--Select State--"}),y.map(h=>e.jsx("option",{value:h.isoCode,children:h.name},h.isoCode))]}),n.state&&e.jsx("p",{className:"text-danger",children:n.state.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"City:"}),e.jsxs("select",{className:"form-control",...s("city",{required:"City is required"}),onChange:h=>g(h.target.value),value:p,children:[e.jsx("option",{value:"",children:"--Select City--"}),v.map(h=>e.jsx("option",{value:h.name,children:h.name},h.name))]}),n.city&&e.jsx("p",{className:"text-danger",children:n.city.message})]})}),e.jsx("input",{type:"hidden",...s("role"),value:"master"}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address:"}),e.jsx("input",{type:"text",className:"form-control",...s("address",{required:"Address is required"})}),n.address&&e.jsx("p",{className:"text-danger",children:n.address.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password :"}),e.jsx("input",{type:"text",className:"form-control",...s("password",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PIN:"}),e.jsx("input",{type:"number",className:"form-control",...s("pin",{required:"PIN is required"})}),n.pin&&e.jsx("p",{className:"text-danger",children:n.pin.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reference:"}),e.jsxs("select",{className:"form-control",...s("refId",{required:!0}),children:[e.jsx("option",{value:"",children:"--Select Ref--"}),e.jsx("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.username},t==null?void 0:t._id),e.jsx("option",{value:"",disabled:!0,children:"No superSuperDistributorss available"})]})]})}),e.jsx("div",{className:"col-sm-6 pt-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:!0,defaultChecked:!0}),"Active"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",...s("userStatus"),value:!1}),"Deactive"]})]})]})}),e.jsxs("div",{className:"col-sm-6 pt-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-2",disabled:c,children:c?"Submitting...":"Submit"}),e.jsx("button",{type:"button",onClick:()=>C(-1),className:"btn btn-light",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"p-1",children:[l&&e.jsx("p",{className:"text-success",children:l}),i&&e.jsx("p",{className:"text-danger",children:i})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}function xs(){const{action:t,any:s}=X(),{authUser:r}=D(f=>f.auth),a=r==null?void 0:r.role,{retailer:l,children:c,childrenLoading:i}=$d(s),[n,d]=u.useState(!1),[o,p]=u.useState(null),[m,x]=u.useState(""),[g,j]=u.useState(null),y=(f,b,w)=>{p(f),x(b),j(()=>w),d(!0)},v=()=>{d(!1),j(null)},{handleActivateDeactivate:C}=qd(v),{handleDelete:h}=Md(v);return t==="edit"?e.jsx(Td,{}):t==="credittransfer"?e.jsx(Rd,{}):t==="creditadjust"?e.jsx(Ud,{}):t==="create"?e.jsx(_d,{adminParent:l}):e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-xl-12 stretch-card",children:e.jsxs("div",{className:"row flex-grow",children:[e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-primary text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsxs("h6",{className:"card-title text-white mb-2",children:[l==null?void 0:l.role," Details"]})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"align-items-baseline",children:e.jsx("table",{className:"bg-transparent   w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Username:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Name:"})}),e.jsx("td",{children:e.jsxs("p",{children:[" ",l==null?void 0:l.username]})})]})]})})})})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-success text-white",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title mb-1 text-white",children:"Credit"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Credit:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.walletBalance})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Commission Point:"})}),e.jsx("td",{children:e.jsx("p",{children:l==null?void 0:l.commission})})]})]})})]})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-danger",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"Last Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})}),e.jsx("div",{className:"col-md-3 grid-margin stretch-card",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body bg-orange-400",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-baseline",children:e.jsx("h6",{className:"card-title text-white mb-2",style:{textTransform:"none"},children:"This Week"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("br",{}),e.jsx("table",{className:"bg-transparent w-100 rounded-2",children:e.jsxs("tbody",{className:"text-white",children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Played:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"Total Won:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("p",{children:"End Point:"})}),e.jsx("td",{children:e.jsx("p",{children:"0.00"})})]})]})})]})}),e.jsx("div",{className:"col-6 col-md-12 col-xl-7",children:e.jsx("div",{id:"apexChart3",className:"mt-md-3 mt-xl-0"})})]})})})]})}),e.jsx("div",{className:"row flex-grow",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2 text-uppercase",children:[e.jsx("b",{children:"players"}),e.jsx(B,{to:`/${a}/master/players/details/${s}/create`,className:"btn btn-primary btn-md",children:" Add Player"})]}),e.jsx("div",{className:"card-body",children:e.jsx(dt,{roles:"players",adminId:s,userLInk:"../player/players/details/",editlink:`/${a}/master/players/${s}/edit`,transferlink:`/${a}/master/players/details/${s}/credittransfer`,adjustlink:`/${a}/master/players/details/${s}/creditadjust`,superdistributers:Array.isArray(c)?c:[],openModal:y,handleActivateDeactivate:C,handleDelete:h})})]})}),e.jsx(be,{show:n,onClose:v,title:m,onConfirm:g,children:o}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Bd=({times:t})=>{const s=[{name:"No",selector:(a,l)=>l+1,sortable:!1,width:"60px"},{name:"Time ID",selector:a=>a._id,sortable:!0},{name:"Time in sec",selector:a=>a.timecount,width:"190px",sortable:!0}],r={pagination:!0,highlightOnHover:!0,responsive:!0,selectableRows:!1,sortIcon:e.jsx("i",{className:"fas fa-sort"})};return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"table-responsive",children:e.jsx(oe,{columns:s,data:t,...r,customStyles:{table:{style:{border:"1px solid #dee2e6"}},headRow:{style:{borderBottom:"2px solid #dee2e6"}},headCells:{style:{borderRight:"1px solid #dee2e6"}},cells:{style:{borderRight:"1px solid #dee2e6"}}}})})})};function Fd(){const{action:t}=X(),s=T();u.useEffect(()=>{s(Je()).unwrap()},[s]);const{times:r}=D(a=>a.times);if(t==="create")return e.jsx(vn,{userType:"Game Master"});if(t==null)return e.jsx("div",{className:"row relative",children:e.jsx("div",{className:"col-md-12 grid-margin stretch-card",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between mb-2",children:[e.jsx("b",{children:"Time Master"}),e.jsx(B,{to:"create",className:"btn btn-primary btn-md",children:"Add Time"})]}),e.jsx("div",{className:"card-body",children:e.jsx(Bd,{times:r})})]})})})}function Gd(){const t=T(),{complaints:s,isComplaintLoading:r,isComplaintError:a,complaintErrorMessage:l}=D(c=>c.complaint);return u.useEffect(()=>{t(rt())},[t]),{complaints:s,isComplaintLoading:r,isComplaintError:a,complaintErrorMessage:l}}function zd(){const t=T();return{handleStatusChange:(r,a)=>{t(tt({id:r,status:a}))}}}function Pa(){const{complaints:t,isComplaintLoading:s,isComplaintError:r,complaintErrorMessage:a}=Gd(),{handleStatusChange:l}=zd();return e.jsxs("div",{className:"row relative",children:[e.jsx("div",{className:"col-12 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-flex flex-wrap justify-content-between align-items-center",children:e.jsx("h4",{className:"font-semibold mb-2 mb-md-0",children:"Contact Us Messages"})}),e.jsxs("div",{className:"card-body table-responsive",children:[r&&e.jsx("div",{className:"alert alert-danger",children:a}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover table-striped text-center align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Enquiry Type"}),e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Mobile"}),e.jsx("th",{children:"Complaint Details"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:t.length>0?t.map((c,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:c.enquiryType}),e.jsx("td",{children:c.fullName}),e.jsx("td",{className:"text-break",children:c.email}),e.jsx("td",{children:c.mobile}),e.jsx("td",{className:"text-break",style:{maxWidth:"200px",whiteSpace:"pre-wrap",overflowX:"auto",overflowY:"auto",maxHeight:"100px",display:"block"},children:c.complaintDetails}),e.jsx("td",{style:{minWidth:"120px"},children:e.jsxs("select",{className:`form-select form-select-sm text-white fw-semibold 
                                                            ${c.status==="Pending"?"bg-warning":c.status==="Completed"?"bg-success":"bg-danger"}`,value:c.status,onChange:n=>l(c._id,n.target.value),style:{minWidth:"100px",maxWidth:"100%",fontSize:"0.875rem",padding:"0.25rem 0.5rem"},children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),e.jsx("td",{children:new Date(c.createdAt).toLocaleString()})]},c._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center",children:"No messages found."})})})]})})]})]})}),s&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsx(F,{})})]})}const Q=(t,s)=>[{path:t,element:s},{path:`${t}/:action`,element:s},{path:`${t}/:action/:any`,element:s},{path:`${t}/details/:any`,element:s},{path:`${t}/details/:any/:action`,element:s},{path:`${t}/details/:any/:action/:id`,element:s},{path:`${t}/:any/:action/:id`,element:s},{path:`${t}/game/:gameId/:adminId/:username`,element:s}],Ra={superadmin:[...Q("dashboard",e.jsx(Kl,{})),...Q("timemaster",e.jsx(Fd,{})),...Q("gamemaster",e.jsx(Vc,{})),...Q("admin",e.jsx(Ni,{})),...Q("superareamanager",e.jsx($a,{})),...Q("areamanager",e.jsx(Ot,{})),...Q("master",e.jsx(hs,{})),...Q("player",e.jsx(Be,{})),...Q("gift",e.jsx(qa,{})),...Q("loan",e.jsx(Ma,{})),...Q("otc",e.jsx(Ia,{})),...Q("game",e.jsx(Ta,{})),...Q("admin/players",e.jsx(yn,{})),...Q("superareamanager/players",e.jsx(Ua,{})),...Q("areamanager/players",e.jsx(_t,{})),...Q("master/players",e.jsx(xs,{})),...Q("player/players",e.jsx(ye,{})),{path:"onlineplayers",element:e.jsx(Fe,{})},{path:"gamehistory",element:e.jsx(ye,{})},{path:"winpercentage",element:e.jsx(Ge,{})},{path:"turnoverreport",element:e.jsx(ze,{})},{path:"transactionreport",element:e.jsx(He,{})},{path:"commissionpayoutReport",element:e.jsx(Ye,{})},{path:"admincommissionreport",element:e.jsx(ka,{})},{path:"logactivities",element:e.jsx(Ke,{})},{path:"contactus",element:e.jsx(Pa,{})},{path:"profile",element:e.jsx(Xe,{})}],admin:[...Q("dashboard",e.jsx(Xl,{})),...Q("superareamanager",e.jsx($a,{})),...Q("areamanager",e.jsx(Ot,{})),...Q("master",e.jsx(hs,{})),...Q("player",e.jsx(Be,{})),...Q("gift",e.jsx(qa,{})),...Q("loan",e.jsx(Ma,{})),...Q("otc",e.jsx(Ia,{})),...Q("game",e.jsx(Ta,{})),...Q("superareamanager/players",e.jsx(Ua,{})),...Q("areamanager/players",e.jsx(_t,{})),...Q("master/players",e.jsx(xs,{})),...Q("player/players",e.jsx(ye,{})),{path:"onlineplayers",element:e.jsx(Fe,{})},{path:"gamehistory",element:e.jsx(ye,{})},{path:"winpercentage",element:e.jsx(Ge,{})},{path:"turnoverreport",element:e.jsx(ze,{})},{path:"transactionreport",element:e.jsx(He,{})},{path:"commissionpayoutReport",element:e.jsx(Ye,{})},{path:"admincommissionreport",element:e.jsx(ka,{})},{path:"logactivities",element:e.jsx(Ke,{})},{path:"contactus",element:e.jsx(Pa,{})},{path:"profile",element:e.jsx(Xe,{})}],superareamanager:[...Q("dashboard",e.jsx(Vl,{})),...Q("areamanager",e.jsx(Ot,{})),...Q("master",e.jsx(hs,{})),...Q("player",e.jsx(Be,{})),...Q("areamanager/players",e.jsx(_t,{})),...Q("master/players",e.jsx(xs,{})),...Q("player/players",e.jsx(ye,{})),{path:"onlineplayers",element:e.jsx(Fe,{})},{path:"gamehistory",element:e.jsx(ye,{})},{path:"winpercentage",element:e.jsx(Ge,{})},{path:"turnoverreport",element:e.jsx(ze,{})},{path:"transactionreport",element:e.jsx(He,{})},{path:"commissionpayoutReport",element:e.jsx(Ye,{})},{path:"logactivities",element:e.jsx(Ke,{})},{path:"profile",element:e.jsx(Xe,{})}],areamanager:[...Q("dashboard",e.jsx(Zl,{})),...Q("master",e.jsx(hs,{})),...Q("player",e.jsx(Be,{})),...Q("master/players",e.jsx(xs,{})),...Q("player/players",e.jsx(ye,{})),{path:"onlineplayers",element:e.jsx(Fe,{})},{path:"gamehistory",element:e.jsx(ye,{})},{path:"winpercentage",element:e.jsx(Ge,{})},{path:"turnoverreport",element:e.jsx(ze,{})},{path:"transactionreport",element:e.jsx(He,{})},{path:"commissionpayoutReport",element:e.jsx(Ye,{})},{path:"logactivities",element:e.jsx(Ke,{})},{path:"profile",element:e.jsx(Xe,{})}],master:[...Q("dashboard",e.jsx(Jl,{})),...Q("player",e.jsx(Be,{})),...Q("player/players",e.jsx(ye,{})),{path:"onlineplayers",element:e.jsx(Fe,{})},{path:"gamehistory",element:e.jsx(ye,{})},{path:"winpercentage",element:e.jsx(Ge,{})},{path:"turnoverreport",element:e.jsx(ze,{})},{path:"transactionreport",element:e.jsx(He,{})},{path:"commissionpayoutReport",element:e.jsx(Ye,{})},{path:"logactivities",element:e.jsx(Ke,{})},{path:"profile",element:e.jsx(Xe,{})}]};function Hd(){const t=T(),s=ae(),[r,a]=u.useState(""),[l,c]=u.useState("");let{isLoading:i,serverError:n}=D(j=>j.auth);const{register:d,handleSubmit:o,reset:p,formState:{errors:m}}=Z({mode:"onBlur"}),x=j=>({username:j.userName.trim(),password:j.userPassword}),g=async j=>{a(""),c("");const y=x(j);try{const v=await t(ps(y)).unwrap();c("Login successful!"),p(),setTimeout(()=>{const C={superadmin:"/superadmin/dashboard",admin:"/admin/dashboard",superdistributor:"/superareamanager/dashboard",distributor:"/areamanager/dashboard",retailer:"/master/dashboard",user:"/"};if(!v||!v.roles){console.error("Roles data is missing or invalid:",v==null?void 0:v.roles),s("/auth/login");return}v.roles?s(C[v.roles.toLowerCase()]):(console.warn("No valid role found, navigating to login."),s("/auth/login"))},1e3)}catch(v){a(v.message||"An error occurred during login.")}};return u.useEffect(()=>{setTimeout(()=>{n=""},1e3)},[]),{register:d,isLoading:i,handleSubmit:o,errors:m,Errors:r,onSubmit:g,serverError:n,successMessage:l}}function Yd(){const{register:t,isLoading:s,handleSubmit:r,errors:a,onSubmit:l,successMessage:c,serverError:i}=Hd();return e.jsx("div",{className:"main-wrapper",id:"app",children:e.jsx("div",{className:"page-wrapper full-page",children:e.jsx("div",{className:"page-content d-flex justify-content-center ",children:e.jsx("div",{className:"row w-full mx-0 auth-page",children:e.jsx("div",{className:"col-md-8 col-xl-6 mx-auto",children:e.jsx("div",{className:"card border-blue-600 ",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"auth-form-wrapper px-4 py-5",children:[e.jsxs("a",{href:"#",className:"noble-ui-logo d-block mb-2",children:["Welcome ",e.jsx("span",{children:"Game King"})]}),e.jsx("h5",{className:"font-semiboldt text-base text-gray-500 mb-4",children:"Welcome back! Log in to your account."}),e.jsxs("form",{onSubmit:r(l),children:[e.jsxs("div",{className:"form-group relative",children:[e.jsx("label",{htmlFor:"userName",children:"Username"}),e.jsx("input",{type:"username",name:"userName",id:"userName",className:"form-control",placeholder:"Enter your User Name",...t("userName",{required:"Username is required"})}),a.userName&&e.jsx("p",{className:"absolute right-3 top-19 p-1 text-red-500",children:a.userName.message})]}),e.jsxs("div",{className:"form-group relative",children:[e.jsx("label",{htmlFor:"userPassword",children:"Password"}),e.jsx("input",{type:"password",name:"userPassword",id:"userPassword",className:"form-control",placeholder:"Enter your password",...t("userPassword",{required:"Password is required",minLength:{value:3,message:"Password must be at least 6 characters"}})}),a.userPassword&&e.jsx("p",{className:"absolute right-3 top-19 p-1 text-red-500",children:a.userPassword.message})]}),e.jsxs("div",{className:"flex flex-col items-start mt-4 relative",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",className:"w-4 h-4 border border-gray-300 rounded bg-gray-50"})}),e.jsx("label",{htmlFor:"rememberMe",className:"ms-2 mt-2 text-blue-600 hover:underline",children:"Remember me"})]}),a.rememberMe&&e.jsx("p",{className:"absolute top-9 text-red-500",children:a.rememberMe.message})]}),e.jsxs("div",{className:"col-md-12 p-0 d-flex mt-4 relative",children:[e.jsx("div",{className:"col-md-6 p-0",children:e.jsx("button",{type:"submit",className:"btn btn-primary mr-2 mb-2 mb-md-0",disabled:s,children:s?"Logging in...":"Login"})}),c&&e.jsx("p",{className:"absolute left-20 pt-1 text-green-500",children:c}),i&&e.jsx("p",{className:"absolute left-20 pt-1 text-red-500",children:i})]})]})]})})})})})})})})})}function Kd(){return e.jsxs("form",{children:[e.jsx("input",{type:"text",placeholder:"Username"}),e.jsx("input",{type:"password",placeholder:"Password"}),e.jsx("input",{type:"submit",value:"Sign Up"})]})}const Xd=({element:t,requiredRoles:s})=>{const{authUser:r}=D(i=>i.auth),a=sessionStorage.getItem("tokenExpiryTime"),l=new Date().getTime(),c="/auth/login";return!a||l>a?(sessionStorage.clear(),e.jsx(Ze,{to:c,replace:!0})):!r||Array.isArray(r)?e.jsx(Ze,{to:c,replace:!0}):s.length>0&&!s.includes(r.role)?e.jsx(Ze,{to:`/${r.role}/dashboard`,replace:!0}):e.jsx(t,{children:e.jsx(qe,{})})},Ve=(t,s)=>!t||!Ra[t]?(console.error(`No routes found for role: ${t}`),null):e.jsxs(Ce,{path:`${t}/*`,element:e.jsx(Xd,{element:s,requiredRoles:[t]}),children:[Ra[t].map(r=>e.jsx(Ce,{path:r.path,element:r.element},r.path)),e.jsx(Ce,{path:"*",element:e.jsx(Ze,{to:`/${t}/dashboard`,replace:!0})})]});function Vd(){return e.jsxs(_n,{children:[e.jsxs(Bn,{children:[e.jsx(Ce,{path:"/",element:e.jsx(Rl,{}),children:e.jsx(Ce,{index:!0,element:e.jsx(jn,{})})}),e.jsxs(Ce,{path:"auth/*",element:e.jsx(Ol,{}),children:[e.jsx(Ce,{path:"login",element:e.jsx(Yd,{})}),e.jsx(Ce,{path:"signup",element:e.jsx(Kd,{})})]}),Ve("superadmin",Bl),Ve("admin",Fl),Ve("superareamanager",Gl),Ve("areamanager",zl),Ve("master",Hl),e.jsx(Ce,{path:"*",element:e.jsx(Ze,{to:"/auth/login",replace:!0})})]}),e.jsx(Yl,{})]})}wn.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Sn,{store:gn,children:e.jsx(Dn,{loading:e.jsx("div",{children:"Loading..."}),persistor:zt,children:e.jsx(Vd,{})})})}));
